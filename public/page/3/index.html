<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/yaya.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/yaya.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/yaya.jpg">
  <link rel="mask-icon" href="/images/yaya.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="lovepli">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="lovepli">
<meta property="og:description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="James Li">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>lovepli</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7f1c1d8fcf32904ec65bc7b9400f8cd8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">lovepli</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/05/%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E5%86%99%E6%B3%95%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/yali.jpg">
      <meta itemprop="name" content="James Li">
      <meta itemprop="description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lovepli">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/05/%E6%B1%82%E8%81%8C%E7%AE%80%E5%8E%86%E5%86%99%E6%B3%95%E6%8A%80%E5%B7%A7/" class="post-title-link" itemprop="url">ç®€å†æ¨¡ç‰ˆ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-05 22:49:20 / ä¿®æ”¹æ—¶é—´ï¼š23:06:29" itemprop="dateCreated datePublished" datetime="2020-05-05T22:49:20+08:00">2020-05-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">å…¶ä»–</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="æ±‚èŒç³»åˆ—æ–‡ç« ï¼š"><a href="#æ±‚èŒç³»åˆ—æ–‡ç« ï¼š" class="headerlink" title="æ±‚èŒç³»åˆ—æ–‡ç« ï¼š"></a>æ±‚èŒç³»åˆ—æ–‡ç« ï¼š</h4><ul>
<li><a target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/38431524" >ç¨‹åºå‘˜å¦‚ä½•å†™ä¸€ä»½æ›´å¥½çš„ç®€å†</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/38432342" >å¦‚ä½•å‡†å¤‡æŠ€æœ¯é¢è¯•</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/51290709" >ç¨‹åºå‘˜å›½å¤–æ±‚èŒæŒ‡å—</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/77857433" >ç³»ç»Ÿè®¾è®¡é¢è¯• 101</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/106950357" >ç¨‹åºå‘˜é¢è¯•æ¨èä¹¦ç±</a></li>
</ul>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul>
<li>ç®€å†æ¨¡ç‰ˆ<ul>
<li><a href="#ç®€å†æ¨¡æ¿åˆ—è¡¨">ç®€å†æ¨¡ç‰ˆ</a></li>
</ul>
</li>
<li>ä¸ªäººç®€ä»‹<ul>
<li><a href="#é€šç”¨ç®€ä»‹">ç®€ä»‹</a></li>
<li><a href="#å‰ç«¯ç®€ä»‹">å‰ç«¯</a></li>
<li><a href="#ç§»åŠ¨ç«¯ç®€ä»‹">ç§»åŠ¨ç«¯</a></li>
<li><a href="#åç«¯ç®€ä»‹">åç«¯</a></li>
</ul>
</li>
<li>é¡¹ç›®ç»éªŒ<ul>
<li><a href="#é€šç”¨ç»éªŒ">é€šç”¨</a></li>
<li><a href="#å‰ç«¯ç»éªŒ">å‰ç«¯</a></li>
<li><a href="#åç«¯ç»éªŒ">åç«¯</a></li>
</ul>
</li>
<li>è‹±æ–‡ç‰ˆæœ¬<ul>
<li><a href="#summary">ç®€ä»‹</a></li>
<li><a href="#project">é¡¹ç›®ç»éªŒ</a></li>
</ul>
</li>
</ul>
<h2 id="ç®€å†æ¨¡æ¿åˆ—è¡¨"><a href="#ç®€å†æ¨¡æ¿åˆ—è¡¨" class="headerlink" title="ç®€å†æ¨¡æ¿åˆ—è¡¨"></a>ç®€å†æ¨¡æ¿åˆ—è¡¨</h2><h4 id="ä¸æƒ³ç®€å†åœ¨æ‹›è˜å¹³å°ä¸­åƒè¿™æ ·æ˜¾ç¤ºæ··ä¹±ï¼Ÿï¼ˆä¸‹å›¾æ¥è‡ªçœŸå®çš„ç®€å†ï¼‰"><a href="#ä¸æƒ³ç®€å†åœ¨æ‹›è˜å¹³å°ä¸­åƒè¿™æ ·æ˜¾ç¤ºæ··ä¹±ï¼Ÿï¼ˆä¸‹å›¾æ¥è‡ªçœŸå®çš„ç®€å†ï¼‰" class="headerlink" title="ä¸æƒ³ç®€å†åœ¨æ‹›è˜å¹³å°ä¸­åƒè¿™æ ·æ˜¾ç¤ºæ··ä¹±ï¼Ÿï¼ˆä¸‹å›¾æ¥è‡ªçœŸå®çš„ç®€å†ï¼‰"></a>ä¸æƒ³ç®€å†åœ¨æ‹›è˜å¹³å°ä¸­åƒè¿™æ ·æ˜¾ç¤ºæ··ä¹±ï¼Ÿï¼ˆä¸‹å›¾æ¥è‡ªçœŸå®çš„ç®€å†ï¼‰</h4><img src="https://raw.githubusercontent.com/resumejob/awesome-resume/master/imgs/wrong_all.png" width="600">

<h4 id="å»ºè®®é€‰æ‹©ä½¿ç”¨æˆ‘ä»¬æµ‹è¯•è¿‡çš„ç®€å†æ¨¡æ¿"><a href="#å»ºè®®é€‰æ‹©ä½¿ç”¨æˆ‘ä»¬æµ‹è¯•è¿‡çš„ç®€å†æ¨¡æ¿" class="headerlink" title="å»ºè®®é€‰æ‹©ä½¿ç”¨æˆ‘ä»¬æµ‹è¯•è¿‡çš„ç®€å†æ¨¡æ¿"></a>å»ºè®®é€‰æ‹©ä½¿ç”¨æˆ‘ä»¬æµ‹è¯•è¿‡çš„ç®€å†æ¨¡æ¿</h4><ul>
<li>æœ¬åœ°ä¿®æ”¹å’Œç”Ÿæˆç®€å†ï¼Œä¸ç”¨æ‹…å¿ƒéšç§æ³„éœ²</li>
<li>ç»è¿‡å¤šä¸ªçƒ­é—¨æ‹›è˜åº”ç”¨çš„æ˜¾ç¤ºæµ‹è¯•ï¼Œæé«˜ 60% é€šè¿‡ç‡</li>
</ul>
<img src="https://raw.githubusercontent.com/resumejob/awesome-resume/master/imgs/all-1.jpg" width="600">
<img src="https://raw.githubusercontent.com/resumejob/awesome-resume/master/imgs/all-2.jpg" width="600">

<ul>
<li>æœ¬é¡¹ç›®çš„ <code>free</code> æ–‡ä»¶å¤¹ä¸­å¸¦æœ‰ä¸€ä¸ªå…è´¹çš„ç®€å†æ¨¡ç‰ˆï¼ˆé€šè¿‡çƒ­é—¨æ‹›è˜ç½‘ç«™çš„æµ‹è¯•ï¼‰ã€‚ä¸‹è½½åå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li>
<li>æ”¶è´¹æ¨¡ç‰ˆè¯·é€šè¿‡<a href="https://resumejob.net/#price-table" target="_blank" rel="noopener">è¿™é‡Œ</a>ä»˜è´¹ä»¥åŠä¸‹è½½ã€‚</li>
</ul>
<h2 id="ä¸ªäººç®€ä»‹"><a href="#ä¸ªäººç®€ä»‹" class="headerlink" title="ä¸ªäººç®€ä»‹"></a>ä¸ªäººç®€ä»‹</h2><h3 id="é€šç”¨ç®€ä»‹ï¼š"><a href="#é€šç”¨ç®€ä»‹ï¼š" class="headerlink" title="é€šç”¨ç®€ä»‹ï¼š"></a>é€šç”¨ç®€ä»‹ï¼š</h3><ul>
<li>æœ‰è‰¯å¥½çš„ä»£ç é£æ ¼ï¼Œé€šè¿‡æ·»åŠ æ³¨é‡Šæé«˜ä»£ç å¯è¯»æ€§ï¼Œæ³¨é‡ä»£ç è´¨é‡ï¼Œç ”è¯»è¿‡ XXXï¼ŒXXXç­‰å¤šä¸ªå¼€æºé¡¹ç›®æºç ä»è€Œå­¦ä¹ å¢å¼ºä»£ç çš„å¥å£®æ€§ä¸æ‰©å±•æ€§ã€‚</li>
<li>å…·å¤‡è‰¯å¥½çš„ä»£ç ç¼–ç¨‹ä¹ æƒ¯åŠæ–‡æ¡£ç¼–å†™èƒ½åŠ›ï¼Œå‚ä¸å¤šä¸ªé«˜æ€§èƒ½ç½‘ç«™æ¶æ„è®¾è®¡ä¸ç³»ç»Ÿæ ¸å¿ƒéƒ¨åˆ†ä»£ç ç¼–å†™ã€é‡æ„ï¼Œèƒ½è¿›è¡ŒæŠ€æœ¯æ”»å…³ï¼Œçªç ´å…³é”®æŠ€æœ¯ç“¶é¢ˆã€‚</li>
<li>è´Ÿè´£æ ¹æ®å…¬å¸ä¸šåŠ¡åŠç›®æ ‡å¼•è¿›äººæ‰ã€åŸ¹å…»æ–°äººã€è§„åˆ’å›¢é˜Ÿäººå‘˜ã€å¹¶å»ºç«‹å®Œå–„çš„ç»©æ•ˆè€ƒæ ¸åˆ¶åº¦æœ‰æ•ˆç•™ä½äººæ‰ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</li>
<li>å¸¦é¢† 10 äººå›¢é˜Ÿå®Œæˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„éš¾ç‚¹åˆ†æä¸æ¶æ„è®¾è®¡å·¥ä½œï¼Œæ‰¿æ‹…æ ¸å¿ƒåŠŸèƒ½ ä»£ç ç¼–å†™ï¼Œå¼€å‘ä¸ç»´æŠ¤ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—ã€‚ä½¿ç”¨ Selenium ç­‰å·¥å…·ååŠ©æŒç»­é›†æˆ ä¸è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¿è¯ä»£ç çš„å¯é å’Œå®‰å…¨ã€‚</li>
<li>å‚ä¸ XXX é¡¹ç›®çš„å…¨æµç¨‹ï¼ŒåŒ…æ‹¬éœ€æ±‚è¯„å®¡ã€è®¾è®¡è¯„å®¡ï¼Œåˆ¶å®šæµ‹è¯•è®¡åˆ’ï¼Œè®¾è®¡å’Œæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼ŒåŠæµ‹è¯•å›å½’ï¼Œè¿›è¡Œç¼ºé™·è·Ÿè¸ªå’Œè½¯ä»¶è´¨é‡åˆ†æç­‰ã€‚</li>
<li>åŸºäºæµ·é‡æ•°æ®ï¼ŒæŒ–æ˜ä¿¡æ¯ï¼Œå»ºç«‹æ¨¡å‹ï¼Œå¹¶å°†æœºå™¨å­¦ä¹ ç®—æ³•åº”ç”¨äºä¸šåŠ¡ç¯èŠ‚ï¼Œ æå‡å…¬å¸å„ç¯èŠ‚æ•ˆç‡ã€‚è°ƒç ”æ–°æŠ€æœ¯åœ¨å¤§æ•°æ®é¢†åŸŸçš„åº”ç”¨ä»·å€¼ï¼Œä»¥æŠ€æœ¯é©±åŠ¨äº§ å“ï¼ŒæŠŠæœ€åˆé€‚çš„ç®—æ³•åº”ç”¨åˆ°å„ç§æœ‰æŒ‘æˆ˜æ€§çš„ç°å®åœºæ™¯ä¸­ã€‚</li>
<li>è´Ÿè´£å…¬å¸æŠ€æœ¯æ–‡æ¡£çš„ç¼–å†™ä»¥åŠç»´æŠ¤ï¼Œå®šæœŸ Review å›¢é˜Ÿçš„ä»£ç ï¼Œä¸å›¢é˜Ÿå…±åŒ å­¦ä¹ ä»¥åŠæˆâ»“ã€‚</li>
<li>å»å¹´åº¦ç»„ç»‡äº†åå¤šæ¬¡æŠ€æœ¯åˆ†äº«æ´»åŠ¨ï¼Œä¸»é¢˜åŒ…æ‹¬ XXXï¼ŒXXXã€‚</li>
<li>ç†Ÿæ‚‰å¸¸ç”¨å¼€å‘ç‰ˆçš„ Linux æœåŠ¡å™¨å®‰è£…ã€é…ç½®å’Œè°ƒä¼˜ï¼Œç†Ÿæ‚‰å¸¸ç”¨å¼€å‘ç¯å¢ƒå¦‚ <strong>Apacheã€MySQLã€Nginx</strong> ç­‰å·¥å…·çš„éƒ¨ç½²ã€è®¾ç½®åŠè°ƒä¼˜ã€‚</li>
<li>æœ‰è‰¯å¥½çš„ä»£ç ç¼–å†™ä¹ æƒ¯ï¼Œå…·æœ‰è‰¯å¥½çš„æ²Ÿé€šã€åä½œèƒ½åŠ›èƒ½åŠ›ï¼Œæœ‰è‰¯å¥½çš„èŒä¸šé“å¾·å’Œè¾ƒå¼ºçš„å·¥ä½œè´£ä»»æ„Ÿã€‚</li>
<li>ç†è§£æ“ä½œç³»ç»Ÿä¸­<strong>è¿›ç¨‹ã€çº¿ç¨‹ã€æ­»é”ã€è™šæ‹ŸåŒ–ã€æ–‡ä»¶ç³»ç»Ÿ</strong>ç­‰åŸç†å’Œç®€å•å®ç°ã€‚</li>
<li>æ‹¥æœ‰æ‰å®çš„ç»Ÿè®¡å­¦åŠŸåº•ï¼Œå¯¹æ•°æ®æ•æ„Ÿã€æ·±åˆ»ç†è§£å’Œç†Ÿç»ƒè¿ç”¨å„ç±»ä¸»æµæœºå™¨å­¦ä¹ ç®—æ³•ï¼ŒåŒ…æ‹¬çº¿æ€§æ¨¡å‹ã€æ ‘æ¨¡å‹ã€æ¦‚ç‡å›¾æ¨¡å‹ã€æ·±åº¦å­¦ä¹ æ¨¡å‹ç­‰ã€‚</li>
<li>æ‹¥æœ‰5å¹´ä»¥ä¸Šå·¥ä¸šç•Œé€šç”¨æœºå™¨å­¦ä¹ ç®—æ³•é¡¹ç›®çš„ç ”å‘ç»å†ï¼Œç†Ÿæ‚‰å¤§è§„æ¨¡æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€åˆ†å¸ƒå¼è®¡ç®—ç­‰ç›¸å…³æŠ€æœ¯ã€‚</li>
<li>åŠ¨æ‰‹èƒ½åŠ›å¼ºï¼Œå¯¹ç®—æ³•æœ‰æå¤§çƒ­æƒ…ï¼Œå…·å¤‡è‰¯å¥½çš„æ–‡çŒ®å­¦ä¹ èƒ½åŠ›ï¼Œèƒ½å¯¹ç®—æ³•è¿›è¡Œå®ç°å’ŒæŒç»­ä¼˜åŒ–ã€‚</li>
<li>ç†Ÿæ‚‰Webç¼–ç¨‹ï¼Œèƒ½å¤Ÿä½¿ç”¨ä¸»æµæ¡†æ¶è¿›è¡Œç½‘ç»œé¡µé¢çš„å¼€å‘ã€‚æ¨åŠ¨ç ”å‘æµç¨‹è¿‡ç¨‹æ”¹è¿›ï¼Œå½±å“å’Œæ¨åŠ¨æ•´ä¸ªç ”å‘å›¢é˜Ÿçš„è´¨é‡æ„è¯†ï¼Œèƒ½æå‡æ•´ä¸ªç ”å‘æ•ˆèƒ½ã€‚</li>
<li>å’Œäº§å“ç»ç†å¯†åˆ‡é…åˆï¼Œä»éœ€æ±‚å‡ºå‘ï¼Œä¸»å¯¼ç³»ç»Ÿåˆ†æä¸æ¶æ„è®¾è®¡å·¥ä½œï¼Œæ‰¿æ‹…æ ¸å¿ƒåŠŸèƒ½ä»£ç ç¼–å†™ï¼Œå¼€å‘ä¸ç»´æŠ¤ç³»ç»Ÿå…¬ç”¨æ ¸å¿ƒæœåŠ¡ã€‚</li>
<li>æœ‰<strong>å¤§å‹äº’è”ç½‘åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>çš„æ¶æ„è®¾è®¡å’Œå¼€å‘ç»éªŒï¼Œæ‹¥æŠ±æ–°æŠ€æœ¯ï¼Œæœ‰å¾ˆå¼ºçš„å­¦ä¹ èƒ½åŠ›ã€‚</li>
<li>å–œæ¬¢é’»ç ”è¯­è¨€åº•å±‚ä¸æ¡†æ¶åŸç†ï¼Œç†Ÿæ‚‰å¤šç§ç®—æ³•ã€å‡½æ•°å¼å¼€å‘ç­‰ç¼–ç¨‹æŠ€æœ¯ï¼Œèƒ½æµç•…é˜…è¯»è‹±æ–‡æ–‡æ¡£ã€‚</li>
<li>æ€è·¯æ¸…æ™°ä¸¥è°¨ï¼Œå…·æœ‰è‰¯å¥½çš„ä»£ç ç¼–å†™ä¹ æƒ¯ï¼Œå–„äºå€¾å¬å’Œå›¢é˜Ÿåˆä½œã€‚</li>
<li>æœ‰æ‰å®çš„è®¡ç®—æœºç†è®ºåŸºç¡€ï¼Œ<strong>è‰¯å¥½çš„ç®—æ³•ä¸æ•°æ®ç»“æ„åŸºç¡€</strong>ï¼Œäº†è§£è®¡ç®—æœºåŸºæœ¬åŸç†ä¸å¸¸è§æœºåˆ¶ã€‚</li>
<li>å–„äºä¸äººæ²Ÿé€šï¼Œè‰¯å¥½çš„å›¢é˜Ÿåˆä½œç²¾ç¥å’Œé«˜åº¦çš„è´£ä»»æ„Ÿï¼Œèƒ½å¤Ÿæ‰¿å—å‹åŠ›ï¼Œæœ‰è¾ƒå¼ºçš„åƒè‹¦è€åŠ³å’Œåˆ›æ–°ç²¾ç¥ã€‚</li>
<li>ä¸»å¯¼æŠ€æœ¯éš¾é¢˜æ”»å…³ï¼Œè§£å†³å„ç±»æ½œåœ¨ç³»ç»ŸæŠ€æœ¯é£é™©ï¼Œä¿è¯ç³»ç»Ÿçš„å¯é æ€§ä»¥åŠç¨³å®šæ€§ã€‚</li>
<li>æ·±åˆ»ç†è§£é¢å‘å¯¹è±¡å¼€å‘ï¼Œå…·æœ‰è¾ƒå¥½çš„ç³»ç»Ÿåˆ†æè®¾è®¡èƒ½åŠ›ã€æ–‡æ¡£æ’°å†™èƒ½åŠ›ã€‚</li>
<li>å¯¹æŠ€æœ¯æœ‰å¼ºçƒˆå…´è¶£ï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼ŒæŠ€æœ¯è§†é‡å¹¿é˜”ï¼Œä¹äºä¸æ–­å­¦ä¹ æ–°çŸ¥è¯†ï¼›</li>
<li>å…·å¤‡æ‰å®çš„ <strong>OOP</strong> åŠç›¸å…³è½¯ä»¶å¼€å‘æŠ€èƒ½ï¼Œèƒ½æ ¹æ®æ¶æ„è¦æ±‚ï¼Œå¼€å‘è®¾è®¡å¯æ‰©å±•ï¼Œå¯å¤ç”¨ï¼Œé«˜æ€§èƒ½çš„åŠŸèƒ½æ¨¡å—ã€‚</li>
<li>æŒæ¡è½¯ä»¶å·¥ç¨‹æ€æƒ³ï¼Œèƒ½å¤Ÿå¯¹å¤æ‚ä»»åŠ¡åˆ†è§£ï¼Œç†Ÿæ‚‰è½¯ä»¶è¿­ä»£å¼€å‘æ–¹æ³•ï¼Œå…·å¤‡è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚</li>
<li>äº†è§£ <strong>Httpï¼ŒTCP/IPï¼ŒWebsocket åè®®</strong>ï¼Œç†Ÿæ‚‰å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œ<strong>XMLå’ŒJSON</strong> æ•°æ®è§£æä»¥åŠæœ¬åœ°ç¼“å­˜ã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Socket ç½‘ç»œç¼–ç¨‹</strong>ï¼Œäº†è§£ <strong>TCPã€UDPã€HTTPã€FTP</strong> ç­‰å¸¸ç”¨ç½‘ç»œåè®®ã€‚</li>
<li>ç†Ÿæ‚‰ç§»åŠ¨ç½‘ç»œé€šä¿¡æœºåˆ¶ï¼Œå¯¹ <strong>HTTPã€TCP/IP åè®®</strong>æœ‰è¾ƒæ·±åˆ»çš„ç†è§£ï¼Œç†Ÿæ‚‰ç½‘ç»œæ€§èƒ½ä¼˜åŒ–ä¸”æœ‰æˆåŠŸå®æ–½ç»éªŒã€‚</li>
</ul>
<h3 id="å‰ç«¯ç®€ä»‹ï¼š"><a href="#å‰ç«¯ç®€ä»‹ï¼š" class="headerlink" title="å‰ç«¯ç®€ä»‹ï¼š"></a>å‰ç«¯ç®€ä»‹ï¼š</h3><ul>
<li>å¯¹å‰åç«¯åˆ†ç¦»æ¨¡å¼ï¼Œå¯è§†åŒ–å¼€å‘æ·±å…¥ç†è§£ï¼Œå¯¹ Vue å’Œ react æœ‰ä¸°å¯Œçš„å¼€å‘ç»éªŒï¼Œå…·å¤‡ä¸€å®šçš„æ¡†æ¶è®¾è®¡èƒ½åŠ›ã€‚</li>
<li>å¯¹ Javascript ä¸­é—­åŒ…ã€å‡½æ•°å¼è¯­è¨€ç­‰æ¦‚å¿µæœ‰æ¸…æ™°çš„è®¤çŸ¥ï¼Œå¯¹å¸¸è§åº“çš„æºç å®ç°æœ‰äº†è§£ã€‚</li>
<li>ç†Ÿæ‚‰æ¨¡å—åŒ–ã€å‰ç«¯ç¼–è¯‘å’Œæ„å»ºå·¥å…·ï¼Œç†Ÿç»ƒè¿ç”¨ä¸»æµçš„ç§»åŠ¨ç«¯ JS åº“å’Œå¼€å‘æ¡†æ¶ï¼Œå¹¶æ·±å…¥ç†è§£å…¶è®¾è®¡åŸç†ï¼Œä¾‹å¦‚ï¼šZeptoã€React ç­‰ã€‚</li>
<li>ç†Ÿæ‚‰ Node.js å¼€å‘ï¼Œç†Ÿç»ƒä½¿ç”¨ npm, webpack, gulp ç­‰å·¥å…·ã€‚ç†Ÿæ‚‰å‰ç«¯æ€§èƒ½çš„ä¼˜åŒ–ï¼Œç†Ÿæ‚‰ä½¿ç”¨ Chromeï¼ŒSafari ç­‰å‰ç«¯è°ƒè¯•å·¥å…·ã€‚</li>
<li>ç†Ÿæ‚‰ Node.js ä»¥åŠ V8 çš„æ€§èƒ½å’Œç¨³å®šæ€§ä¼˜åŒ–ï¼Œèƒ½å¯¹ç³»ç»Ÿæ•´ä½“æ€§èƒ½è¿›è¡Œè¯„ä¼°ï¼Œè§£å†³å†…å­˜ç“¶é¢ˆã€‚</li>
</ul>
<h3 id="ç§»åŠ¨ç«¯ç®€ä»‹ï¼š"><a href="#ç§»åŠ¨ç«¯ç®€ä»‹ï¼š" class="headerlink" title="ç§»åŠ¨ç«¯ç®€ä»‹ï¼š"></a>ç§»åŠ¨ç«¯ç®€ä»‹ï¼š</h3><ul>
<li>ç†Ÿç»ƒæŒæ¡ <strong>Android UI</strong> å¼€å‘ï¼ŒåŒ…æ‹¬å„ç§æ§ä»¶ã€å¸ƒå±€æ–¹å¼ã€åŠ¨ç”»å’Œè‡ªå®šä¹‰æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€‚</li>
<li>ç†Ÿæ‚‰Androidçš„ä¸­é—´ä»¶å¼€å‘æµç¨‹å’Œ <strong>Android Framework</strong> å¼€å‘æŠ€æœ¯ï¼Œèƒ½ç‹¬ç«‹è¿›è¡Œ Android åº”ç”¨ç¨‹åºå¼€å‘ã€‚</li>
<li>ç†Ÿç»ƒç§»åŠ¨ç«¯é¡¹ç›®æ­å»ºä¸æ¶æ„ï¼Œçµæ´»ä½¿ç”¨ <strong>XIB</strong> å’Œ <strong>Storyboard</strong>ï¼ŒæŒæ¡ iOS å„ç‰ˆæœ¬çš„é€‚é…åŠ <strong>Auto Layoutã€Content Hugging</strong> ç­‰å¸ƒå±€ã€‚</li>
<li>è°ƒç”¨ç³»ç»ŸAPIå¯¹åº”ç”¨è¿›è¡Œå®‰å…¨æ€§æ ¡éªŒï¼Œé¿å…å¸¸è§çš„åº”ç”¨crashï¼Œå¦‚æ•°æ®è¶Šç•Œï¼Œå†…å­˜æ³„æ¼ç­‰ã€‚</li>
<li>ç†Ÿæ‚‰æŒæ¡ iOS å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè§£å†³ç³»ç»Ÿå´©æºƒï¼Œå†…å­˜æº¢å‡ºï¼ŒiPhone ç‰ˆæœ¬å…¼å®¹æ€§ç­‰é—®é¢˜ã€‚</li>
<li>å‚ä¸ç§»åŠ¨ç«¯é¡¹ç›®è®¾è®¡ï¼Œæ¡†æ¶é€‰å‹ï¼ŒæŠ€æœ¯ç‚¹æ”»å…‹å’ŒåŠŸèƒ½å¼€å‘å®ç°ï¼Œä¿®å¤ä»£ç  Bug å¹¶äº¤ä»˜æµ‹è¯•ã€‚æé«˜äº§å“ç¨³å®šæ€§ã€‚</li>
<li>ç†Ÿæ‚‰æŒæ¡ç³»ç»Ÿå¸¸ç”¨æ¡†æ¶å¼€å‘ï¼Œäº†è§£å±å¹•é€‚é…ã€æ ¸å¿ƒåŠ¨ç”»ã€å¤šçº¿ç¨‹ã€ç‰ˆæœ¬å…¼å®¹ç­‰åŠŸèƒ½ã€‚</li>
<li>ç†Ÿæ‚‰iOSç³»ç»Ÿè¿è¡Œæœºåˆ¶åŠå†…æ ¸ï¼›æ·±å…¥ç†è§£ <strong>iOS runtime</strong> è¿è¡Œæœºåˆ¶ï¼Œæœ‰ <strong>Method Swizzling</strong> æ–¹é¢çš„å®æˆ˜ç»éªŒã€‚</li>
<li>æœ‰æ‰å®çš„ <strong>Java</strong> åŸºç¡€ï¼ŒæŒæ¡ Android æ¶æ„ä¸‹ç½‘ç»œé€šä¿¡æœºåˆ¶ï¼Œå¯¹ <strong>Socket é€šä¿¡ã€TCP/IP å’Œ HTTP</strong> æœ‰è¾ƒæ·±åˆ»çš„ç†è§£ã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Android Studio</strong> å¼€å‘å·¥å…·å’Œç›¸å…³æµ‹è¯•å·¥å…·çš„ä½¿ç”¨ï¼Œå…·æœ‰Androidç‰ˆæœ¬å…¼å®¹çš„å¼€å‘ç»éªŒã€‚</li>
<li>ç†Ÿç»ƒè¿ç”¨UIKitç­‰è¿›è¡Œç•Œé¢å¼€å‘ï¼›äº†è§£ <strong>Cocoa/UIKit Framework</strong>ï¼Œç†Ÿæ‚‰ iPhone/iPad å„ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿæä¾›å‡ºè‰²çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li>ç†Ÿæ‚‰ç§»åŠ¨ç«¯ç”Ÿå‘½å‘¨æœŸï¼Œæ¨é€æœºåˆ¶ï¼Œç†Ÿç»ƒæŒæ¡ç¬¬ä¸‰æ–¹å³æ—¶é€šè®¯ SDK çš„é›†æˆå’Œä½¿ç”¨ã€‚</li>
<li>ç†Ÿç»ƒä½¿ç”¨ MVC æ¨¡å¼è¿›è¡Œé¡¹ç›®è®¾è®¡ï¼Œç†Ÿæ‚‰<strong>å•ä¾‹ï¼Œå·¥å‚æ¨¡å¼</strong>ç­‰å¸¸è§çš„è®¾è®¡æ¨¡å¼å’Œé€šçŸ¥æœºåˆ¶ã€‚</li>
<li>äº†è§£<strong>å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå†…å­˜ç®¡ç†æœºåˆ¶</strong>ã€‚ç†Ÿç»ƒæŒæ¡ <strong>delegate ï¼Œblock</strong> ç­‰å›è°ƒæœºåˆ¶ã€‚</li>
<li>è‰¯å¥½çš„ç¼–ç å’Œæ–‡æ¡£ä¹ æƒ¯ï¼Œèƒ½æŒç»­çš„å…³æ³¨å’Œä¼˜åŒ–è‡ªå·±åšçš„é¡¹ç›®ã€‚</li>
<li>ç†Ÿç»ƒæŒæ¡é›†æˆç¬¬ä¸‰æ–¹æˆæƒç™»å½•ï¼Œç¬¬ä¸‰æ–¹åˆ†äº«ï¼Œç¬¬ä¸‰æ–¹æ”¯ä»˜ç­‰æŠ€èƒ½ã€‚</li>
<li>ç†Ÿç»ƒæŒæ¡ JSON è§£æï¼Œå†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–ä»¥åŠå¤šçº¿ç¨‹ï¼Œç†Ÿæ‚‰ä½¿ç”¨ CocaTouch æ¡†æ¶ç­‰å¼€æºæ¡†æ¶ä¸ iOS åº•å±‚ SDK çš„è°ƒç”¨ã€‚</li>
<li>å¯¹è½¯ä»¶æ¶æ„è¿›è¡Œæ­å»ºï¼Œè§„åˆ’ï¼Œä¼˜åŒ–åº”ç”¨æ¶æ„é€»è¾‘ï¼Œæå‡é€šä¿¡ä¼ è¾“æ•ˆç‡ä¸å®‰å…¨æ€§ã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Objective-C ä¸ Swift è¯­è¨€</strong>ï¼ŒæŒæ¡ iOS å¼€å‘ä¸­ç”¨ä»£ç ä¸æ•…äº‹æ¿å®ç° UIï¼Œç½‘ç»œé€šä¿¡ï¼Œæ•°æ®åº“ç­‰çš„åŸºç¡€çŸ¥è¯†ï¼ŒæŒæ¡ XCode å¸¸ç”¨çš„è°ƒè¯•æŠ€å·§ä¸æµ‹è¯•æ–¹æ³•ï¼Œæ‡‚å¾— iOS æ€§èƒ½ä¼˜åŒ–çš„å¸¸è§æ€è·¯ã€‚</li>
<li>ç†Ÿæ‚‰ <strong>JS ä¸ WebView</strong> äº¤äº’ï¼Œç†Ÿæ‚‰ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œåˆ†äº«ï¼Œå­—ç¬¦åŠŸèƒ½ï¼Œç†Ÿæ‚‰ APP ä¸Šçº¿å‘å¸ƒï¼Œç‰ˆæœ¬è¿­ä»£çš„å…¨éƒ¨æµç¨‹ï¼Œæœ‰å¤šä¸ªé¡¹ç›®ä¸Šçº¿ç»éªŒã€‚</li>
</ul>
<h3 id="åç«¯ç®€ä»‹ï¼š"><a href="#åç«¯ç®€ä»‹ï¼š" class="headerlink" title="åç«¯ç®€ä»‹ï¼š"></a>åç«¯ç®€ä»‹ï¼š</h3><ul>
<li>ç†Ÿæ‚‰ä½¿ç”¨ <strong>Tomcat</strong> åº”ç”¨æœåŠ¡å™¨çš„åº”ç”¨éƒ¨ç½²å’Œé…ç½®ï¼Œç†Ÿæ‚‰ <strong>jenkins</strong> è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æµ‹è¯•ã€‚</li>
<li>äº†è§£æ•°æ®åˆ†æåº“ <strong>Numpy å’Œ Pandasã€matplotlib</strong> çš„åŸç†ï¼Œæœ‰æ•°æ®å¤„ç†ã€åˆ†æå’Œå»ºæ¨¡çš„ç»éªŒã€‚</li>
<li>æŒæ¡ <strong>Djangoï¼ŒFlask</strong> ç­‰å¼€æºæ¡†æ¶è®¾è®¡åŸç†åŠè¿è¡Œæœºåˆ¶ï¼Œç†Ÿæ‚‰ <strong>LAMP/LNMP</strong> ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼Œæœ‰é«˜å¹¶å‘ WEB åº”ç”¨æ¶æ„ç»éªŒã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Java è¯­è¨€</strong>ï¼ŒæŒæ¡ <strong>Springã€Springboot</strong> ç­‰ä¸»æµæ¡†æ¶ï¼Œäº†è§£ <strong>Memcacheã€Redis</strong> ç­‰ç¼“å­˜ç»„ä»¶ä¸ <strong>RabbitMQ</strong> å¼‚æ­¥å¤„ç†æœºåˆ¶ã€‚</li>
<li>äº†è§£é«˜å¯ç”¨ã€é«˜å¹¶å‘ï¼Œé«˜è´Ÿè½½çš„æ¶æ„ï¼Œå…·æœ‰åˆ†å¸ƒå¼æ¶æ„çš„ç³»ç»Ÿå¼€å‘èƒ½åŠ›ã€‚</li>
<li>ç†Ÿæ‚‰æµå¼è®¡ç®—ï¼Œolapï¼Œåˆ—å¼å­˜å‚¨ç­‰æŠ€æœ¯åŸç†ã€‚ç†Ÿæ‚‰å¸¸ç”¨æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ç®—æ³•ï¼Œå…·æœ‰å°†å¤§æ•°æ®æˆ–æœºå™¨å­¦ä¹ åº”ç”¨äºè™šæ‹Ÿç½‘ç»œçš„ç»éªŒã€‚</li>
<li>ç†Ÿç»ƒæŒæ¡å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“ä»¥åŠéå…³ç³»å‹æ•°æ®åº“ï¼Œç†è§£å…¶ä½¿ç”¨åœºæ™¯åŠé™åˆ¶ã€‚</li>
<li>è´Ÿè´£å…¬å¸æœåŠ¡å™¨çš„è§„åˆ’ã€è°ƒè¯•ä¼˜åŒ–ã€æ—¥å¸¸ç›‘æ§ã€æ•…éšœå¤„ç†ã€æ•°æ®å¤‡ä»½ã€æ—¥å¿—åˆ†æã€æ€§èƒ½ç“¶é¢ˆåˆ†æç­‰å·¥ä½œã€‚å¹¶è´Ÿè´£çº¿ä¸ŠæœåŠ¡å™¨å®æ—¶ç»´æŠ¤ã€æé«˜ç³»ç»Ÿçš„å¯ç”¨ç‡åŠå¯ç»´æŠ¤æ€§ã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Springã€MyBatisã€Hibernate æ¡†æ¶</strong>ï¼Œå¹¶å‚ä¸è®¾è®¡å¤šä¸ªé«˜å¯ç”¨æ€§é¡¹ç›®ã€‚</li>
<li>ç†Ÿç»ƒä½¿ç”¨ <strong>Oracle/MySQL</strong> æ•°æ®åº“ï¼Œå¯¹äº <strong>Mongodb</strong> ç­‰ NOSQL æ•°æ®åº“å…·æœ‰ä¸€å®šçš„äº†è§£ï¼Œæ‹¥æœ‰ä¸€å®šçš„æ•°æ®åº“è®¾è®¡èƒ½åŠ›å’Œä¼˜åŒ–èƒ½åŠ›ã€‚</li>
<li>ç†Ÿæ‚‰ <strong>TCP/IPã€DNS</strong> ç­‰åº•å±‚åè®®ï¼Œç²¾é€š <strong>HTTP åè®®</strong>ï¼Œç†Ÿç»ƒæŒæ¡å„ç§å·¥å…·è¿›è¡Œç½‘ç»œé—®é¢˜è¯Šæ–­ã€‚</li>
<li>ç²¾é€š <strong>golang åç¨‹ï¼Œchannal å’Œé”ç­‰æœºåˆ¶</strong>ï¼Œå¯¹é«˜å¹¶å‘ã€é«˜å¯ç”¨æ¶æ„ç³»ç»Ÿæœ‰æ­£ç¡®ã€æ·±åˆ»çš„ç†è§£ï¼Œæœ‰åˆ†å¸ƒå¼æœåŠ¡å™¨å¼€å‘ç»éªŒã€‚</li>
<li>Java åŸºç¡€æ‰å®, ç†Ÿç»ƒä½¿ç”¨ spring, spring boot, mybatisç­‰å·¥å…·å¹¶äº†è§£å…¶å®ç°åŸç†ã€‚</li>
<li>ç†Ÿæ‚‰ Tomcatã€Weblogicï¼ŒWAS ç­‰ä¸»æµåº”ç”¨æœåŠ¡å™¨çš„ç¯å¢ƒæ­å»ºåŠç»´æŠ¤ã€‚</li>
<li>ç²¾é€š MySQL åº”ç”¨å¼€å‘ï¼Œç†Ÿæ‚‰æ•°æ®åº“åŸç†å’Œå¸¸ç”¨æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ã€‚</li>
<li>äº†è§£ <strong>Djangoï¼ŒFlask æ¡†æ¶</strong>çš„è®¾è®¡å’Œå®ç°åŸç†ï¼Œç†Ÿæ‚‰åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡å’Œå¼€å‘ï¼Œå¯¹ç³»ç»Ÿé«˜å¯ç”¨æœ‰ä¸€å®šç»éªŒã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Redisã€MySQL</strong> ç­‰æ•°æ®åº“ï¼Œç†Ÿæ‚‰ <strong>Shellè„šæœ¬</strong> ç¼–å†™ã€Linux ç³»ç»ŸåŠå¸¸ç”¨å‘½ä»¤ã€‚</li>
<li>ä¸¤å¹´ä»¥ä¸Š Go é¡¹ç›®å¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰ä¸»æµ Go è¯­è¨€ä¸‹å¸¸ç”¨çš„ RPC æ¡†æ¶ï¼Œæ·±å…¥äº†è§£ Go è¯­è¨€å†…éƒ¨è¿è¡Œæœºåˆ¶ï¼Œå¯¹ Go æºç æœ‰ä¸€å®šçš„äº†è§£ã€‚</li>
<li>JAVA åŸºç¡€æ‰å®ï¼Œå¯¹ <strong>JVM</strong> æœ‰ä¸€å®šäº†è§£ï¼Œèƒ½å¯¹ JVM åšæ€§èƒ½åˆ†æåŠè°ƒä¼˜ã€‚</li>
<li>ç†Ÿç»ƒæŒæ¡ PHP è¯­è¨€ <strong>Laravel æ¡†æ¶ï¼Œyii æ¡†æ¶</strong>ä¸å¸¸ç”¨å·¥å…·ï¼Œæœ‰ä¸°å¯Œçš„ <strong>LAMP</strong> å¼€å‘ä¸è‰¯å¥½çš„ Web ç½‘ç»œç¼–ç¨‹ç»éªŒã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Docker å¾®æœåŠ¡</strong>æ¶æ„ï¼Œ<strong>Redis, Memcached</strong> ç¼“å­˜æŠ€æœ¯ï¼Œ<strong>Nginx</strong> è´Ÿè½½å‡è¡¡ï¼Œ<strong>RabbitMQ</strong> æ¶ˆæ¯é˜Ÿåˆ—ç­‰é¢†åŸŸã€‚</li>
<li>ç†Ÿæ‚‰ <strong>Python çˆ¬è™«ç³»ç»Ÿ</strong>çš„è®¾è®¡ï¼Œèƒ½ç¼–å†™é«˜è´¨é‡ç½‘ç»œçˆ¬è™«ï¼Œè¯†åˆ«å¸¸è§éªŒè¯ç ï¼ˆçˆ¬å–è¿‡çŸ¥ä¹ï¼Œæ·˜å®ç­‰ç½‘ç«™æ•°æ®ï¼‰äº†è§£ <strong>Celery</strong> åˆ†å¸ƒå¼çˆ¬è™«æœºåˆ¶ã€‚</li>
<li>æ·±ç†Ÿç»ƒæŒæ¡å…¨æ ˆå¼€å‘ï¼Œå¯¹åç«¯åˆ°å‰ç«¯çš„æŠ€æœ¯åŸç†æœ‰å…¨é¢çš„è®¤è¯†ï¼Œç†Ÿæ‚‰ç½‘ç«™å¼€å‘æµç¨‹ï¼Œèƒ½å¤Ÿç‹¬ç«‹æ­å»ºå®Œæ•´çš„ç½‘ç«™ã€‚</li>
<li>æ·±å…¥ç†è§£æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œå¹¶èƒ½å¤Ÿå®ç°<strong>å“ˆå¸Œè¡¨ã€é“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆã€äºŒå‰æ ‘</strong>ç­‰æ•°æ®ç»“æ„ã€‚</li>
<li>æ‰å®çš„ Python åŸºç¡€ï¼Œç†Ÿæ‚‰æ–‡ä»¶ I/Oã€å¤šçº¿ç¨‹ã€è£…é¥°å™¨ã€åŸºç¡€æ•°æ®ç»“æ„åŠæ¨¡å—åŒ–ã€‚</li>
<li>ç†Ÿç»ƒåŸºäº <strong>Scrapy</strong> æ¡†æ¶è¿›è¡Œåˆ†å¸ƒå¼çˆ¬è™«ï¼Œåˆ©ç”¨ <strong>Xpathï¼ŒBeautifulSoupï¼ŒRe</strong> è¿›è¡Œæ•°æ®æ¸…æ´—ï¼Œå¹¶è§£å†³éªŒè¯ç ï¼Œç™»å½•ï¼ŒJavascriptæ··æ·†ï¼Œç­‰å„ç§åçˆ¬æªæ–½ã€‚</li>
<li>ç†Ÿæ‚‰ Socket ç½‘ç»œç¼–ç¨‹ã€äº†è§£<strong>å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹ã€å¼‚æ­¥I/Oã€I/Oå¤šè·¯å¤ç”¨å¦‚ selectã€pollã€epoll</strong>çš„åŸç†åŠä½¿ç”¨ã€‚</li>
<li>ä½¿ç”¨ Flaskï¼ŒSQLAlchemy, Mysqlï¼ŒRedis ååŠ©å®Œæˆæ•°æ®ç®¡ç†æ¨¡å—ï¼Œå¹¶é€šè¿‡æµ‹è¯•å·¥å…·ä¼˜åŒ– 15% åç«¯ API æ¥å£æ€§èƒ½ã€‚</li>
<li>ååŠ©è¿ç»´ç›‘æ§ 6å° åå°æœåŠ¡å™¨ä»¥åŠ 3å°Redis æœåŠ¡å™¨ã€‚ä¿è¯ uptime è¾¾åˆ° 99%ã€‚</li>
<li>ç†Ÿç»ƒä½¿ç”¨ <strong>Selenium, Puppeteer</strong> è¿›è¡Œé¡µé¢æµ‹è¯•ï¼Œæ„å»ºå•å…ƒæµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>ç†Ÿæ‚‰ <strong>Django web</strong> å¼€å‘æ¡†æ¶ï¼Œç†Ÿæ‚‰ MVC æ¨¡å‹ï¼Œç†Ÿæ‚‰ä¸­é—´ä»¶ã€Admin ç«™ç‚¹ç®¡ç†ã€å›¾ç‰‡ä¸Šä¼ ã€åˆ†é¡µï¼Œé‚®ä»¶ä¼ è¾“ã€‚</li>
<li>æŒæ¡ MySQL æ•°æ®åº“çš„åŸºæœ¬åŸç†ä¸å¸¸ç”¨è¯­æ³•ï¼Œäº†è§£ <strong>MongoDBã€Redis</strong> ç­‰ NoSQL æ•°æ®åº“ï¼›</li>
<li>ç†Ÿæ‚‰ Mysql å·¥ä½œåŸç†åŠç¨‹åºä¸Šå¦‚ä½•é«˜æ€§èƒ½é…ç½®ï¼Œäº†è§£ä¸»æµå¼€æº NoSQL ç³»ç»Ÿï¼ˆMemcachedã€Redisã€MongoDBç­‰ï¼‰çš„ä½¿ç”¨å’ŒåŸç†ï¼Œæœ‰åˆ†å¸ƒå¼ç³»ç»Ÿä½¿ç”¨ç»éªŒï¼›</li>
<li>ä½¿ç”¨ <strong>Scrapy</strong> æ¡†æ¶å¯¹é‡‡é›†ç›®æ ‡è¿›è¡Œæ•°æ®æ”¶é›†ï¼Œè·Ÿè¸ªç½‘é¡µé“¾æ¥æ„å»ºåˆ†ç±»ä¿¡æ¯å­—æ®µåˆ†æç›®æ ‡ç½‘å€ï¼Œä½¿ç”¨** Xpath, re **æå–ä¿¡æ¯ã€‚é€šè¿‡æŠ“åŒ…å·¥å…·è·å– Ajax é“¾æ¥å¹¶è§£æ json æ•°æ®ã€‚</li>
</ul>
<h2 id="é¡¹ç›®ç»éªŒ"><a href="#é¡¹ç›®ç»éªŒ" class="headerlink" title="é¡¹ç›®ç»éªŒ"></a>é¡¹ç›®ç»éªŒ</h2><h3 id="é€šç”¨ç»éªŒ"><a href="#é€šç”¨ç»éªŒ" class="headerlink" title="é€šç”¨ç»éªŒ"></a>é€šç”¨ç»éªŒ</h3><ul>
<li>ç‹¬è‡ªè´Ÿè´£å®¢æˆ·ç«¯ä»æ— åˆ°æœ‰çš„äº§å“è®¾è®¡ï¼Œç ”å‘ï¼Œæµç¨‹å›¾åŠå¼€å‘æ–‡æ¡£ï¼Œç”¨ä¸¤ä¸ªæœˆçš„æ—¶é—´ç‹¬ç«‹å¼€å‘äº†åˆç‰ˆçš„ APPï¼Œé›†æˆäº†æ”¯ä»˜æ¨¡å—ã€æ–‡ä»¶ä¸‹è½½ï¼Œæ•°æ®æœ¬åœ°ç¼“å­˜åŠŸèƒ½ã€‚</li>
<li>è´Ÿè´£é¡¹ç›®ç®¡ç†ï¼Œäº§å“ç ”å‘éƒ¨é—¨çš„å·¥ä½œä»»åŠ¡åˆ†é…ï¼Œå·¥ä½œç»†åŒ–åˆ’åˆ†ï¼Œä¿è¯é¡¹ç›®æŒ‰æ—¶ä¸Šçº¿ã€‚</li>
<li>ä¸äº§å“ç»ç†ä¿æŒæ²Ÿé€šï¼Œå¯¹è®¢å•ç®¡ç†æ¨¡å—è¿›è¡Œç»´æŠ¤ä¸é«˜æ•ˆé‡æ„ï¼Œä¸€ä¸ªæœˆä¿®å¤è¶…è¿‡åå°ç®¡ç†ç³»ç»Ÿ 30ä¸ª Bugã€‚</li>
<li>ä¸è®¾è®¡ã€è¿è¥ç­‰åˆä½œéƒ¨é—¨æ²Ÿé€šåä½œï¼Œæ¨åŠ¨äº§å“çš„å®ç°ä¸æœ€ç»ˆæ•ˆæœçš„è¯„ä¼°ï¼Œåˆ¶å®šäº§å“çš„æµ‹è¯•æ ‡å‡†ï¼Œä¸Šçº¿æ ‡å‡†ï¼Œå¹¶è¿›è¡Œæ•°æ®è·Ÿè¸ªåˆ†æã€‚</li>
<li>æ„å»º <strong>ip</strong> ä»£ç†æ± ï¼Œ<strong>cookies</strong> æ± ï¼Œå¼€å‘ç”¨æˆ·ä¸ªäººä¿¡æ¯çˆ¬è™«ï¼Œç¼–å†™å„ç§åçˆ¬è™«ç®—æ³•ï¼Œçˆ¬å–ç”¨æˆ·ä¸ªäººä¿¡æ¯å’Œå¾®åšå†…å®¹ã€‚å¹¶è´Ÿè´£æ•°æ®çš„æ¸…æ´—ã€è§£æã€çˆ¬å–çš„å»é‡ä»¥åŠè¿›è¡Œæ•°æ®æŒ–æ˜ä¸ç ”ç©¶ã€‚</li>
<li>ä½œä¸ºè½¯ä»¶å¼€å‘å›¢é˜Ÿçš„æ ¸å¿ƒæˆå‘˜ï¼Œä¸ºå¤§æ•°æ®åº”ç”¨è®¾è®¡å¼€å‘é«˜è´¨é‡çš„è½¯ä»¶å¹³å°ã€‚å¯¹å¾®æœåŠ¡æ¶æ„ç»„ä»¶æœ‰å®è·µç»éªŒï¼Œç†è§£å¸¸è§æ¶æ„çš„é«˜å¯ç”¨æ€§ä¸å¯æ‰©å±•æ€§ã€‚</li>
<li>æœ‰é¡¹ç›®äº‘æœåŠ¡åŒ–æˆ–è€…ç›¸å…³å¼€å‘ä»¥åŠé¡¹ç›®è°ƒä¼˜ï¼Œéƒ¨ç½²ç»éªŒã€‚ç†Ÿæ‚‰å¤§è§„æ¨¡ã€é«˜å¹¶å‘ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼Œèƒ½ç‹¬ç«‹å®Œæˆç³»ç»Ÿçš„è®¾è®¡åŠå¼€å‘ã€‚</li>
</ul>
<h3 id="å‰ç«¯ç»éªŒ"><a href="#å‰ç«¯ç»éªŒ" class="headerlink" title="å‰ç«¯ç»éªŒ"></a>å‰ç«¯ç»éªŒ</h3><ul>
<li>å¯¹ <strong>ListViewï¼ŒConvertView</strong> è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶é€šè¿‡ <strong>ViewHolder</strong> ç¼“å­˜ Item æ¡ç›®ï¼Œå‡å°‘é‡å¤ä»£ç çš„å†—ä½™ï¼Œå‡å°‘ <strong>30%</strong> é¡µé¢åŠ è½½æ—¶é—´ã€‚</li>
<li>ä½¿ç”¨å¤šä¸ªç±»å®ç°ä¸åŒåŠŸèƒ½ï¼Œå¦‚ Loading ç±»è´Ÿè´£åŠ è½½æ•°æ®å’Œå¸ƒå±€æ–‡ä»¶ï¼ŒAdapter ç±»è´Ÿè´£ ListView æ§ä»¶ä¸å±•ç¤ºæ•°æ®ã€‚å®ç°é¡¹ç›®æ¨¡å—åŒ–å¼€å‘ï¼Œé™ä½ç»„ä»¶è€¦åˆåº¦ã€‚</li>
<li>ä½¿ç”¨ <strong>AsyncSocket</strong> è¿›è¡Œå®Œæˆå³æ—¶é€šè®¯åŠŸèƒ½ï¼Œå¹¶ååŠ©ç»„é•¿å®Œæˆå®¢æˆ·ç«¯ä¸åµŒå…¥å¼ç½‘çš„ <strong>Socket</strong> å¯¹æ¥ä¸é€šä¿¡ï¼Œå®ç°é€šè¿‡ iOS è®¾å¤‡æ§åˆ¶æ’åº§çš„å¼€å…³ã€å®šæ—¶å¼€å…³ã€æ¸©åº¦æ£€æµ‹åŠæŠ¥è­¦ç­‰ 8ä¸ª åŠŸèƒ½ã€‚</li>
<li>ç†Ÿæ‚‰å¸¸è§çš„å‰ç«¯è°ƒè¯•å·¥å…·ï¼Œèƒ½å¤Ÿé«˜ä¿çœŸè¿˜åŸè®¾è®¡ç¨¿ï¼Œå…·å¤‡è‰¯å¥½çš„ä»£ç é£æ ¼ä»¥åŠæ¥å£ã€æ¶æ„è®¾è®¡èƒ½åŠ›ã€‚ç†Ÿæ‚‰ JS æ€§èƒ½ä¼˜åŒ–ï¼Œç†Ÿç»ƒè§£å†³å„ç§æµè§ˆå™¨å…¼å®¹é—®é¢˜ã€‚</li>
<li>æ·±å…¥ç†è§£ <strong>W3C</strong> æ ‡å‡†ä¸ <strong>ES</strong> è§„èŒƒï¼Œç†Ÿæ‚‰ <strong>HTMLã€CSSã€JavaScript</strong> ç­‰ <strong>Web</strong> åŸºç¡€ä»¥åŠå¸¸ç”¨æµè§ˆå™¨å…¼å®¹æ–¹æ¡ˆã€‚</li>
<li>æ·±å…¥äº†è§£ iOS é¡µé¢è®¾è®¡å’Œæ•°æ®ä¼ é€’å®ç°åŸç†ï¼Œå®ç° App å¸¸è§çš„æ–°å¢ï¼Œè¯»å–ï¼Œä¿®æ”¹ï¼Œåˆ é™¤åŠŸèƒ½ï¼Œ</li>
<li>åˆ©ç”¨ Vuex çš„ getters æ­é… filter å®ç°å•†å“æœå¯»åŠåˆ†ç±»çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿é¡¾å®¢æŸ¥æ‰¾éœ€è¦çš„å•†å“ã€‚ä½¿ç”¨ VeeValidate å®ç°è¡¨å•éªŒè¯ã€‚</li>
<li>ç†Ÿç»ƒæŒæ¡ PC ç«¯å’Œç§»åŠ¨ç«¯çš„å¸ƒå±€æ–¹å¼ï¼Œå¦‚å“åº”å¼å¸ƒå±€ä»¥åŠæµå¼å¸ƒå±€ï¼Œå¹¶èƒ½æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå°è£…é«˜å¤ç”¨ã€å¯ç»´æŠ¤æ€§å¥½çš„å‰ç«¯ç»„ä»¶ã€‚</li>
<li>ç†Ÿç»ƒæŒæ¡æµè§ˆå™¨æ¸²æŸ“åŸç†ä»¥åŠæœºåˆ¶ï¼Œå¯¹è‡³å°‘ä¸€ç§ä¸»æµå‰ç«¯æ¡†æ¶æœ‰æ·±å…¥åº”ç”¨å¹¶èƒ½å¤Ÿæ·±å…¥ç†è§£å…¶è®¾è®¡åŸç†ã€‚</li>
<li>å‚ä¸å¼€å‘ã€æŒç»­æ”¹è¿›å‰ç«¯é¡µé¢è®¾è®¡å¹³å°ï¼Œé€šè¿‡é€šè¿‡å¼€å‘å·¥å…·ã€æ”¹è¿›æµç¨‹ï¼Œä¿è¯å‰ç«¯ä¸šåŠ¡å¼€å‘çš„é«˜æ•ˆæ€§ã€‚</li>
<li>åˆ©ç”¨ <strong>CTFramesetterRef</strong> ç»˜åˆ¶å†…å®¹å®ç°åœ¨çº¿é˜…è¯»åŠŸèƒ½ï¼Œåˆ©ç”¨ <strong>UITableViewCell</strong> é«˜åº¦è‡ªé€‚åº”å’Œ <strong>ZXPAutoLayout</strong> å¸ƒå±€å®ç°æ¶ˆæ¯å‘å¸ƒåŠŸèƒ½ã€‚</li>
<li>åˆ©ç”¨ <strong>UI PLayer</strong> å®ç°äºŒç»´ç /æ¡å½¢ç çš„æ‰«æä¸è¯†åˆ«ï¼Œè‡ªå®šä¹‰ <strong>UITextField</strong> å®ç°å®æ—¶è¾“å…¥å®æ—¶æœç´¢åŠŸèƒ½ã€‚</li>
<li>ä½¿ç”¨ <strong>AVPlayer</strong> å®ç°éŸ³é¢‘çš„åœ¨çº¿æ’­æ”¾ã€æš‚åœã€ã€å¿«é€€å¿«è¿›ç­‰6ä¸ªåŠŸèƒ½ã€‚</li>
<li>åˆ©ç”¨ <strong>CLLocationManager</strong> è¿›è¡Œåœ°ç†å®šä½ï¼Œè§„åˆ’æ­¥è¡Œã€é©¾è½¦ç­‰ä¸åŒå‡ºè¡Œæ–¹å¼çš„çº¿è·¯ï¼Œå¹¶é€šè¿‡ä¸åŒæ—¶é—´æ®µçš„åœ°ç†ä½ç½®ï¼Œåœ¨åœ°å›¾ä¸Šç»˜åˆ¶è½¨è¿¹ä¿¡æ¯ï¼Œå¹¶é™„å¸¦è¯¦ç»†çš„æ—¶é—´åœ°å€æ•°æ®ã€‚</li>
<li>å¯¹åº”ç”¨è¿›è¡Œæ¶æ„ï¼Œå…¼å®¹åˆ° <strong>iOS11</strong> æœ€æ–°ç‰ˆæœ¬ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬è·å– <strong>GPS</strong>ï¼ŒäºŒç»´ç æ‰«ç ã€‚åŒæ—¶ä½¿ç”¨æˆ·å¯ä»¥è¿›è¡Œè¯„è®ºä¸æ„è§åé¦ˆã€‚</li>
<li>ä½¿ç”¨<strong>å¤šçº¿ç¨‹</strong>å®šæ—¶å™¨å®ç°å›¾ç‰‡è½®æ’­å™¨æ•ˆæœï¼Œä½¿ç”¨ CoreData å¯¹é¦–é¡µæ•°æ®è¿›è¡Œæ•°æ®å‚¨å­˜ä»¥åŠå®ç°æœç´¢ç•Œé¢çš„æ¨¡ç³Šæœç´¢åŠŸèƒ½ã€‚</li>
<li>å°è£… FMDatabaseQueue ç±»é˜²æ­¢å¤šçº¿ç¨‹è®¿é—®æ•°æ®åº“æ­»é”ï¼Œä¿®æ”¹åæ¯”èµ·ç³»ç»ŸåŸç”Ÿæ¡†æ¶æ‹¥æœ‰è¾ƒé«˜çš„æ•ˆç‡å’Œæ›´ä¸ºæ–¹ä¾¿çš„è°ƒç”¨æ–¹å¼ã€‚</li>
<li>ä½¿ç”¨ <strong>JavaScript</strong> ä¸åŸç”Ÿ <strong>Objective-C</strong> ç½‘é¡µäº¤äº’,å®ç°ç‚¹å‡»ç½‘é¡µæŒ‰é’®è·³è½¬åŠŸèƒ½ã€‚</li>
<li>ä½¿ç”¨FTPæœåŠ¡å™¨å®ç°CDNåˆ†çº§æ¨é€ï¼Œå®ç°ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶é¢„åŠ çƒ­æµç¨‹ï¼Œæé«˜50%ç¼“å­˜å‘½ä¸­ç‡ã€‚</li>
</ul>
<h3 id="åç«¯ç»éªŒ"><a href="#åç«¯ç»éªŒ" class="headerlink" title="åç«¯ç»éªŒ"></a>åç«¯ç»éªŒ</h3><ul>
<li>åœ¨ç®¡ç†å¤„æ‹…ä»»å®ä¹ ç”Ÿï¼Œä»è®¾å®š Linux ç¯å¢ƒï¼Œç¼–è¯‘ MySQLï¼Œè®¾å®š Apache ä¸ Nginx ç­‰æœåŠ¡å™¨ï¼Œåˆ°æœ€å PHP çš„å¼€å‘ç¯å¢ƒåŠå‚æ•°è®¾å®šï¼Œå­¦ä¹ æ¶è®¾ LAMPï¼ŒXAMMP ç­‰å¼€å‘ç¯å¢ƒã€‚</li>
</ul>
<h2 id="English-Version"><a href="#English-Version" class="headerlink" title="English Version"></a>English Version</h2><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><ul>
<li>I have defined and executed the technical roadmap for multiple startups. This involved designing and implementing infrastructure, backend and frontend architecture and building several engineering teams from scratch including hiring, training and selection of appropriate working practices.</li>
<li>I enjoy proactively finding structured, lasting solutions to interdisciplinary and complex problems with minimal dependency on other stakeholders. A strong believer in the performance of teams, previous management experience and my cross domain expertise allow me to significantly add value to a team in multiple ways. References available upon request.</li>
<li>Highly innovative. Good Analytical and Entrepreneurial skills that lead to find out newer ideas from existing systems and data.Highly adaptable. Continual self-learner. Enjoys working both as a team member and individual.</li>
<li>Leveraged responsive tools to consistently complete product deliverables ahead of schedule.</li>
<li>Designed and developed an auto tweeting utility that gave exposure to buyers and sellers in social media.</li>
</ul>
<h3 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h3><ul>
<li>Revamped the entire back-end/front-end structure of Tradeshows section that helped to increase the traffic from 1500 visits/day to 5000 visits/day.</li>
<li>Developed team management module for in-house CRM system in PHP that helped managers to assign members and keep track of their performance by using comprehensive dashboards and reports.</li>
<li>Sourced, set up, and deployed Engineering order management system organizing and tracking support requests.</li>
<li>Design and developed different admin and front-end section of the application that provided a gateway to members to interact with each other as well as customer support.</li>
<li>Developed the customized FileNET Capture Application in VB.NET and MSSQL Server2000 that enhanced the basic functionality by adding role management system to have a complete control in different phases.</li>
<li>Collaborated with senior consultants (developers, designers, UX designers) and project/product managers in a small, agile team building responsive, cross-browser compatible and scalable web apps. Daily stand-up. Peer reviewing PR. Involved in front-end &amp; back-end. Exposed to UX.</li>
<li>Developed the front-end of customersâ€™websites and newsletters and of the companyâ€™s own web portals.</li>
<li>Consultation for light &amp; shadow mapping, and general rendering code written for Unity 3D engine.</li>
<li>Coordinated recruiting, interviewing, training of interns.</li>
<li>Implemented new shadowing and pseudo ambient occlusion rendering with fast performance.</li>
<li>Created and renovated websites for dozens of clients from many different industries. Attended client meetings to discuss their business goals and milestones. Client websites range from CMS-built to bespoke websites from the ground up. Development of a CRM application for a long-term client using PHP and AJAX.</li>
<li>Redesigned customer-facing websites and internal tools. Designed and implemented new products and features using Angular JS,Twitter Bootstrap and an internal API based on Django REST Framework.</li>
<li>Responsible for the design and production of marketing materials including landing pages, banner ads, billboards, email newsletters and presentations. Screened and interviewed engineering candidates.</li>
<li>Redesigned and implemented new features for the web-based version of a major Electronic Health Record platform. Implemented design patterns using Twitter Bootstrap and jQuery.</li>
<li>Designed the web and iPhone versions of a Personal Health Record app. Collaborated with the engineering, marketing, sales and support teams to conceive product ideas and implement new features.</li>
<li>Created marketing materials including landing pages, banner ads, email newsletters and trade show displays. </li>
<li>Designed and produced in-house marketing materials including websites, direct mail, press packs, portfolios and presentations.</li>
<li>Managed social media platforms and public relations, including pitching editorial content to book publishers and magazines. Collaborated with architects to create architectural graphics and renderings.</li>
<li>Built a performance dashboard that monitors latency issues, resource usage and data transactions in the broker system.</li>
<li>Built a load-test framework for the trading platform. Built easily repro-able new tests that improved coverage by 30%. Tests are run in AWS cloud managed by Mesos. Mesos framework scaled AWS automatically and simulate 8000 users. </li>
<li>Built an innovative real-time fixed income evaluation service for European and Asian markets. Successfully launched the complex continuous pricing platform in production to help brokers to accurately evaluate bond prices.</li>
<li>Planned and coordinated work of the team, spoke with potential clients and investors. </li>
<li>Used Hadoop, Kafka, Cassandra, and Storm to develop a lambda architecture that enables real-time big data processing that is highly available, scalable and extensible.</li>
<li>Examined machine learning to analyze purchase data and to generate recommendations to both sellers and buyers.</li>
<li>Improved the kernel of the high-volume digital ads platform and ensured high throughput, low latency.</li>
<li>Maintained legacy support and new feature development for an enterprise Zend Framework PHP application responsible for directing workflows and task assignment for a team of 100+ remote editors and translators</li>
<li>Continuous refactoring, debugging and bug fixes to ensure high-quality ads service. Optimized startup time by 20%.</li>
<li>Led a mobile backend project as the on-site solution architect, collaborated closely with client management teams.</li>
<li>Implemented Solr cluster (master-slave architecture) for near real-time search and reduced search time by up to 20%. </li>
<li>Integrated Coherence/GemFire caching for customers including Oracle, VMware and reduced request latency by 25%.</li>
<li>Built a high-performance data integration tool for Sanoma, a leading media group; migrated its contents in minutes.</li>
<li>Built a web-based application for Belgium Post Office to enable central management via the portal. </li>
<li>Lectured Java Bootcamp and advanced Java courses to 100 professionals at TTI University; was a speaker at Java User Group and LatCraft conferences.</li>
<li>Built a marketing permissions tool for TeliaSonera, a leading telephone provider. Integrated into the Liferay portal.</li>
</ul>
<h3 id="Cover-Letter"><a href="#Cover-Letter" class="headerlink" title="Cover Letter"></a>Cover Letter</h3><blockquote>
<p>Dear XXX</p>
<p>Please find my application to join Bromley Tech Solutions as a Computer Programmer. You will find that I am suitably qualified and experienced and I have the skills and abilities laid out in the job description advertised. </p>
<p>In my role as Computer Programmer I had a number of day-to-day responsibilities that included write special code, test written code and execute them, participated in the design, testing and installing client servers, mentored trainee Computer Programmers and worked on developing cyber security infrastructures for internal and external clients.</p>
<p>The following is a summary of the highlights of my professional career thus far:</p>
<ul>
<li>Have a proven track record of integrating user and business requirements to provide cost-effective, secure and easy-to-use solutions.</li>
<li>Served as a principal group member in identifying and prioritizing technology investments.</li>
<li>Designed and initiated a cross-platform, Java-based POS system that was completed ahead of target date and well within budget.</li>
<li>Wrote code for new solutions that improved scalability by 45%</li>
</ul>
</blockquote>
<hr>

<blockquote>
<p>Dear XXX</p>
<p>I am writing to introduce myself to you as a student of International School of Technology (ISTech.). Iâ€™m responding to your advertisement in the local Employment News for want of a software developer for your development section.</p>
<p>As you can see in the enclosed resume, I have a very strong academic background in operating systems combined with over five years research experience in search engine optimization. My recent internship at Major Infosystems, New York, allowed me to further develop and strengthen my technical skills. I have good hands on programming languages like C, C++, Java and Assembly. I believe that I could make a significant and valuable contribution in your firm.</p>
<p>I would appreciate the opportunity to discuss how my education and experience will be helpful to you. I will be contacting you tomorrow morning on phone to talk about the possibility of arranging an interview. Thank you for your time and consideration.</p>
<p>Sincerely,</p>
<p>XXX</p>
</blockquote>
<hr>

<blockquote>
<p>Dear XXX,</p>
<p>A five-year experience in computer programming has urged me to apply for this position. I was excited to learn about your job post at (mention the name of the magazine/ newspaper/ website). I have enclosed my resume that will provide you with proper details about my educational background and work experience.</p>
<p>Programming is something I was always interested since my school days. I am currently working at (mention the name of your current work place) and have gained a valuable experience here as a senior computer programmer. Here, I am responsible to create special language files and then finally execute them in the computer. I am fluent with a number of language programs such as COBOL, JAVA, C and C++. This matches up with the requirements for the post in your organization.</p>
<p>I would like to meet you and discuss on this more. I would be glad if you could tell me when and where we can meet. I can be contacted at (insert contact details) or email me at (mention your email address).</p>
<p>Sincerely,</p>
<p>XXX</p>
</blockquote>
<hr>

<blockquote>
<p>Dear XXX,</p>
<p>Since 2015, I have served as a software engineer for Action Company, where I have been repeatedly recognized for developing innovative solutions for multimillion-dollar, globally deployed software and systems. I am responsible for full lifecycle development of next-generation software, from initial requirement gathering to design, coding, testing, documentation and implementation.</p>
<p>Known for excellent client-facing skills, I have participated in proposals and presentations that have landed six-figure contracts. I also excel in merging business and user needs into high-quality, cost-effective design solutions while keeping within budgetary constraints.</p>
<p>My technical expertise includes cross-platform proficiency (Windows, Unix, Linux and VxWorks); fluency in 13 scripting/programming languages (including C, C++, VB, Java, Perl and SQL); and advanced knowledge of developer applications, tools, methodologies and best practices (including OOD, client/server architecture and self-test automation).</p>
<p>My experience developing user-friendly solutions on time and on budget would enable me to step into a software engineering role at XYZ Company and hit the ground running. I will follow up with you next week, and you may reach me at (215) 555-5555. I look forward to speaking with you.</p>
<p>Sincerely,</p>
<p>XXX</p>
</blockquote>
<hr>

<blockquote>
<p>Dear XXX:</p>
<p>Iâ€™m writing to express my interest in the Senior Programmer Analyst position posted on your company website. I believe that my strong technical experience and education makes me a competitive candidate for this position.</p>
<p>My key strengths that would be a good match with the position include:</p>
<p>Successfully designing, developing and supporting live use applications.<br>A self-starter and eager to learn new things. I continuously seek to build my skill set and thrive in high-paced environments.</p>
<p>Striving for continued excellence. My contributions to the team during my senior year internship led to an offer with the company after graduation, and Iâ€™ve continued to assume new responsibilities and challenges during my tenure.</p>
<p>Providing exceptional contributions to customer service. In my previous role, I improved first call resolution rates by 8 percent last quarter, while keeping talk time flat.</p>
<p>Sincerely,</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/05/%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BD%E6%8A%80%E6%9C%AF%E7%AE%80%E5%8E%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/yali.jpg">
      <meta itemprop="name" content="James Li">
      <meta itemprop="description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lovepli">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/05/%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BD%E6%8A%80%E6%9C%AF%E7%AE%80%E5%8E%86/" class="post-title-link" itemprop="url">æŠ€æœ¯ç®€å†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-05 22:49:20 / ä¿®æ”¹æ—¶é—´ï¼š22:58:17" itemprop="dateCreated datePublished" datetime="2020-05-05T22:49:20+08:00">2020-05-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">å…¶ä»–</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cyc2018.github.io/Resources/xiaozhuanlan.css"> 

<p>âœğŸ»</p>
<h1 id="1-é‡è¦æ€§"><a href="#1-é‡è¦æ€§" class="headerlink" title="1. é‡è¦æ€§"></a>1. é‡è¦æ€§</h1><ul>
<li><p>å„å¤§å…¬å¸æ¯å¹´éƒ½è¦æ¥æ”¶æˆåƒä¸Šä¸‡ä»½ç®€å†ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æ‹›è˜æˆæœ¬ï¼Œç®€å†è¦å…ˆç»è¿‡ç³»ç»Ÿå’Œ HR ç­›é€‰ï¼Œç®€å†ç­›é€‰å†³å®šäº†ä½ æ˜¯å¦æœ‰ç¬”è¯•å’Œé¢è¯•èµ„æ ¼ã€‚HR éœ€è¦ä»è¿™ä¹ˆå¤šçš„ç®€å†ä¸­ç­›é€‰å‡ºåˆé€‚çš„ç®€å†ï¼Œé‚£ä¹ˆä¸€ä»½ç®€å†é€šå¸¸ä¸ä¼šèŠ±ç‰¹åˆ«å¤šçš„æ—¶é—´è¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥å°±éœ€è¦è®© HR åœ¨å¾ˆçŸ­çš„ç­›é€‰æ—¶é—´ä¸­è®¤å¯ä½ çš„ç®€å†ã€‚</p>
</li>
<li><p>ç®€å†é€šè¿‡ç­›é€‰ä¹‹åå°±è¢«æ”¾å…¥äººæ‰åº“ä¸­ï¼Œç­‰å¾…å‘èµ·ç¬”è¯•å’Œé¢è¯•ã€‚å¦‚æœç®€å†è¶³å¤Ÿä¼˜ç§€ï¼Œå¯ä»¥åœ¨æå‰æ‰¹é˜¶æ®µå…ç¬”è¯•ç›´æ¥è·å¾—é¢è¯•æœºä¼šï¼Œæˆ–è€…ç¬”è¯•æˆç»©ä¸ç†æƒ³ä½†ä¹Ÿæœ‰é¢è¯•æœºä¼šï¼Œè¿™ä¸»è¦çœ‹æœ‰æ²¡æœ‰é¢è¯•å®˜ä»äººæ‰åº“ä¸­æŠŠä½ çš„ç®€å†æèµ·æ¥ã€‚</p>
</li>
<li><p>é¢è¯•è¿‡ç¨‹é€šå¸¸ä¼šæŒ‰ç…§ç®€å†ä¸Šçš„å†…å®¹è¿›è¡Œæé—®ï¼Œæ‰€ä»¥ç®€å†ä¹Ÿå¯ä»¥å½“æˆæ˜¯é¢è¯•å¤§çº²ã€‚å¦‚æœä½ å¸Œæœ›æŸäº›å†…å®¹è¢«é¢è¯•å®˜é—®åˆ°ï¼Œé‚£ä¹ˆæœ€å¥½æŠŠè¿™äº›å†…å®¹æ”¾åœ¨é¢è¯•å®˜æ¯”è¾ƒèƒ½æ³¨æ„åˆ°çš„ä½ç½®ã€‚</p>
</li>
</ul>
<p>âœğŸ»</p>
<h1 id="2-æœ¬è´¨"><a href="#2-æœ¬è´¨" class="headerlink" title="2. æœ¬è´¨"></a>2. æœ¬è´¨</h1><p>ç®€å†ç›¸å½“äºå‘ä¼ä¸šæ¨é”€è‡ªå·±çš„å·¥å…·ï¼Œåœ¨ç®€å†ä¸Šä½ éœ€è¦å°½å¯èƒ½å±•ç°è‡ªå·±èƒ½ç»™ä¼ä¸šå¸¦æ¥çš„ä»·å€¼ï¼Œè¿™ç§ä»·å€¼ä»ä¸¤æ–¹é¢å»è¯„ä¼°ï¼š</p>
<ul>
<li><p>æŠ€èƒ½çš„åŒ¹é…ç¨‹åº¦ã€‚é™¤äº†åˆ¤æ–­æŠ€èƒ½æ ˆæ˜¯å¦å’Œå²—ä½æ‰€è¦æ±‚çš„æŠ€èƒ½æ ˆåŒ¹é…ä¹‹å¤–ï¼Œè¿˜è¦çœ‹æ˜¯å¦å…·å¤‡å…¬å¸ç›®å‰ä¸šåŠ¡ç›¸å…³çš„é¡¹ç›®ç»å†ã€‚</p>
</li>
<li><p>èƒ½åŠ›è¯æ˜ã€‚å³ä½¿æŠ€èƒ½åŒ¹é…äº†ï¼Œä½†æ˜¯å¦‚æœèƒ½åŠ›ä¸è¶³çš„è¯ä¾ç„¶ä¸èƒ½èƒœä»»å·¥ä½œä»»åŠ¡ã€‚å¯ä»¥é€šè¿‡å­¦å†ã€å¤§èµ›å¥–é¡¹ã€å·¥ä½œå’Œå®ä¹ ç»å†ã€é¡¹ç›®ä¸­è§£å†³çš„é—®é¢˜ç­‰æ–¹é¢å»è¯æ˜è‡ªå·±çš„èƒ½åŠ›ã€‚åº”è¯¥åˆ†æ¸…å“ªä¸ªæ˜¯ä½ çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼Œçªå‡ºä¼˜åŠ¿å¹¶å¼±åŒ–åŠ£åŠ¿ï¼Œæ¯”å¦‚å­¦å†ä¸å¥½çš„è¯å°±æŠŠæ•™è‚²ç»å†æ”¾åé¢ä¸€äº›ã€‚</p>
</li>
</ul>
<p>âœğŸ»</p>
<h1 id="3-å½¢å¼"><a href="#3-å½¢å¼" class="headerlink" title="3. å½¢å¼"></a>3. å½¢å¼</h1><p>é™¤äº†åœ¨æ‹›è˜ç½‘ç«™ä¸Šå¡«å†™è‡ªå·±çš„ä¿¡æ¯ä¹‹å¤–ï¼Œé€šå¸¸è¿˜éœ€è¦é™„å¸¦ä¸€ä»½ PDF ç®€å†ï¼Œå¹¶ä¸”é¢è¯•çš„æ—¶å€™ä¹Ÿéœ€è¦è‡ªå·±æºå¸¦ä¸€ä»½çº¸è´¨ç®€å†ï¼ˆæœ€å¥½å¤šå¸¦å‡ ä»½ï¼Œä»¥å…å½“å¤©æœ‰å¤šåœºé¢è¯•ï¼‰ã€‚</p>
<p>é™¤äº† PDF ç®€å†ä¹‹å¤–ï¼Œé€šå¸¸è¿˜æœ‰ Markdownã€Wordã€Latex ç®€å†ï¼Œä½†æ˜¯è¿™äº›å½¢å¼çš„ç®€å†æœ€åä¹Ÿéƒ½éœ€è¦è½¬æ¢æˆ PDF ç®€å†ï¼Œå› ä¸º PDF æ’ç‰ˆå’Œæ ¼å¼éƒ½ä¸å®¹æ˜“åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸”ä¹Ÿæ–¹ä¾¿æ‰“å°ï¼Œæ‰€ä»¥é€‚åˆä½œä¸ºæ­£å¼æ–‡æ¡£ã€‚</p>
<p>æ¨èä½¿ç”¨ Markdown ç®€å†ï¼Œç„¶åè½¬æ¢ä¸º PDF ç®€å†ã€‚å› ä¸º Markdown æ’ç‰ˆç®€æ´ï¼Œè€Œä¸”æ›´å®¹æ˜“ä¿®æ”¹ã€‚ä½†æ˜¯ Markdown ç®€å†æœ‰ä¸€ä¸ªä¸è¶³ä¹‹å¤„ï¼Œå°±æ˜¯ä¸å¤Ÿç´§å‡‘ï¼Œæœ¬æ¥ä¸€é¡µçš„ç®€å†å¯èƒ½éœ€è¦ä¸¤é¡µã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡ä¿®æ”¹æ ·å¼è¡¨çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡å°è¡Œé—´è·ã€å‡å°è¾¹è·ã€ç¼©å°å­—ä½“ã€‚ä»¥ Typora ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œåœ¨æ ·å¼æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ base.user.css æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ shift+F12 å¿«æ·é”®æ‰“å¼€ DevTools æ¥ä¿®æ”¹æ ·å¼ï¼Œå…·ä½“æ­¥éª¤è¯·å‚è€ƒ <a href="https://support.typora.io/Add-Custom-CSS/" target="_blank" rel="noopener">Add Custom CSS</a>ã€‚</p>
<p>ä¸Šé¢ä»‹ç»çš„ç®€å†éƒ½ä»¥æ–‡æœ¬ä¸ºä¸»ï¼Œå¦‚æœæƒ³è¦å±•ç¤ºå›¾æ–‡å†…å®¹çš„è¯ï¼Œæ¨èä½¿ç”¨ HTML ç®€å†ï¼Œå®ƒå¯ä»¥æ›´è¯¦ç»†å’Œç›´è§‚åœ°æ¼”ç¤ºé¡¹ç›®ç»å†ç­‰ã€‚åšå¥½ä¹‹åéƒ¨ç½²åˆ° Github Pages ä¸Šï¼Œå¹¶å°†åœ°å€é™„åœ¨ PDF ç®€å†ä¸Šã€‚</p>
<p>âœğŸ»</p>
<h1 id="4-æ¨¡ç‰ˆ"><a href="#4-æ¨¡ç‰ˆ" class="headerlink" title="4. æ¨¡ç‰ˆ"></a>4. æ¨¡ç‰ˆ</h1><h2 id="4-1-Markdown-Resume"><a href="#4-1-Markdown-Resume" class="headerlink" title="4.1 Markdown-Resume"></a>4.1 Markdown-Resume</h2><p>è¿™é‡Œæä¾›ä¸€ä¸‹ç¬”è€…åˆ¶ä½œçš„ Markdown ç®€å†æ¨¡ç‰ˆï¼š<a href="https://github.com/CyC2018/Markdown-Resume" target="_blank" rel="noopener">Markdown-Resume</a>ï¼Œclone åˆ°æœ¬åœ°ï¼Œç„¶åä½¿ç”¨ Typora ç­‰ç¼–è¾‘å™¨ä¿®æ”¹ï¼Œå¹¶å¯¼å‡ºæˆ PDFã€‚</p>
<p><img src="https://diycode.b0.upaiyun.com/photo/2019/4e58bf5af094acc04448a6af1ab87738.png" alt=""></p>
<h2 id="4-2-Mobirise"><a href="#4-2-Mobirise" class="headerlink" title="4.2 Mobirise"></a>4.2 Mobirise</h2><p>ç¬”è€…çš„ <a href="https://cyc2018.github.io/" target="_blank" rel="noopener">HTML ç®€å†</a> ä¸»è¦ä½¿ç”¨  <a href="https://mobirise.com/" target="_blank" rel="noopener">Mobirise</a> æ­å»ºï¼Œå®ƒæ˜¯å…è´¹çš„ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œä¸éœ€è¦ HTML ç­‰å‰ç«¯çŸ¥è¯†å°±å¯ä»¥ä½¿ç”¨ï¼ŒåŸºæœ¬ä¸Šæ‹–ä¸€æ‹–ç»„ä»¶å°±èƒ½æ­å¥½ä¸€ä¸ªå¾ˆå¥½çœ‹çš„ HTML é¡µé¢ã€‚</p>
<p><img src="https://diycode.b0.upaiyun.com/photo/2019/ed1d4c4987607960681a87d4de231255.png" alt=""></p>
<p>å¦‚æœç®€å†ä¸Šæœ‰å¾ˆå¤š GIF å›¾ç‰‡ï¼Œåˆšè¿›å»çš„æ—¶å€™ GIF åŠ è½½ä¸å®Œå…¨çš„è¯æ¼”ç¤ºæ•ˆæœç‰¹åˆ«ä¸å¥½ï¼Œæ‰€ä»¥ç¬”è€…çš„ HTML ç®€å†å¢åŠ äº†ä¸€ä¸ªåŠ è½½é¡µç”¨æ¥åŠ è½½å›¾ç‰‡ã€‚åŠ è½½é¡µæ²¡åŠæ³•ä½¿ç”¨ Mobirise æ¥å®ç°ï¼Œéœ€è¦æœ‰ä¸€å®šçš„å‰ç«¯åŸºç¡€ã€‚</p>
<p>âœğŸ»</p>
<h1 id="5-å†…å®¹"><a href="#5-å†…å®¹" class="headerlink" title="5. å†…å®¹"></a>5. å†…å®¹</h1><p>å¿…é¡»å†™çš„å†…å®¹ï¼š</p>
<ul>
<li>å§“åç›¸å½“äºä½ çš„ IDï¼Œåº”è¯¥æŠŠå§“åæ”¾åœ¨æœ€æ˜¾çœ¼çš„åœ°æ–¹ã€‚</li>
<li>ä¸ºäº†æ–¹ä¾¿ HR è”ç³»ä½ ï¼Œä¹Ÿè¦æŠŠè”ç³»ä¿¡æ¯ä¹Ÿæ”¾åœ¨å’Œå§“åä¸€æ ·æ˜¾çœ¼çš„ä½ç½®ã€‚</li>
<li>ä¸ªäººåšå®¢å’Œ Github ç­‰æŠ€æœ¯ç¤¾åŒºè´¦å·å¯ä»¥ä½œä¸ºåŠ åˆ†é¡¹ã€‚</li>
<li>æ•™è‚²ç»å†å’Œå·¥ä½œç»å†æŒ‰å¹´ä»½é€†åºæ¥å†™ã€‚</li>
<li>é¡¹ç›®ç»å†å¯ä»¥å†™ç§‘ç ”é¡¹ç›®ã€ä¸ªäººé¡¹ç›®ã€å®ä¹ å’Œå·¥ä½œé¡¹ç›®ã€‚</li>
<li>æŠ€èƒ½æ¸…å•æœ€å¥½å¯ä»¥è®©äººä¸€çœ¼å°±çœ‹å‡ºä½ çš„ç†Ÿç»ƒåº¦ï¼Œå¯ä»¥ä½¿ç”¨ç²¾é€šã€ç†Ÿæ‚‰ã€äº†è§£ç­‰è¯è¯­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ â˜…â˜…â˜† è¿™ç§å›¾æ ‡ã€‚</li>
</ul>
<p>éœ€è¦è°¨æ…è€ƒè™‘çš„å†…å®¹ï¼š</p>
<ul>
<li>æœ‰äº›ä¼ä¸šä¼šæ ¹æ®æ€§åˆ«ã€å¹´é¾„ç­‰ä¿¡æ¯ç­›é€‰äººï¼Œæœ€å¥½å†™ä¸Šï¼Œä¸å†™ä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ã€‚</li>
<li>å·¥ä½œç»éªŒå’ŒæœŸæœ›è–ªèµ„å¯¹äºæ ¡æ‹›ç”Ÿæ¥è¯´ä¸éœ€è¦å†™ï¼Œä½†æ˜¯ç¤¾æ‹›ç”Ÿå°±ä¸€å®šè¦å†™ã€‚</li>
<li>åªå†™å¯ä»¥ç»™ä¼ä¸šå¸¦æ¥ä»·å€¼çš„å…´è¶£çˆ±å¥½ï¼Œå…¶å®ƒçš„æ— å…³å…´è¶£çˆ±å¥½ä¸è¦å†™ã€‚</li>
<li>å’ŒæŠ€æœ¯ç›¸å…³çš„å¤§èµ›è·å¥–ç»å†å¯ä»¥å†™ï¼Œä½†æ˜¯å…¶å®ƒä¸€äº›æ¯”èµ›è·å¥–å°±ä¸è¦å†™ã€‚</li>
<li>ä¸‰å¥½å­¦ç”Ÿã€å¥–å­¦é‡‘ã€å››å…­çº§æˆç»©ã€ç»©ç‚¹å¯ä»¥å†™ï¼Œä»¥è¯æ˜ä½ çš„å­¦ä¹ èƒ½åŠ›ï¼Œä½†æ˜¯å°½é‡ä¸è¦å å¤ªå¤šè¡Œï¼Œå¦‚æœä¸æ˜¯ç‰¹åˆ«å¥½çš„è¯ä¹Ÿå¯ä»¥ä¸å†™ã€‚</li>
<li>ä¸ªäººè¯„ä»·å¦‚æœè¦å†™çš„è¯ä¸è¦å¤ªç©ºæ³›ï¼Œä»€ä¹ˆçƒ­çˆ±å­¦ä¹ åƒè‹¦è€åŠ³ç­‰å°±ä¸è¦å†™äº†ï¼Œè¦å†™å¾—è¯å¯ä»¥å†™åœ¨æœ€åå½“åšæ˜¯ç®€å†å…¶å®ƒå†…å®¹çš„æ€»ç»“ã€‚</li>
</ul>
<p>âœğŸ»</p>
<h1 id="6-æ’ç‰ˆ"><a href="#6-æ’ç‰ˆ" class="headerlink" title="6. æ’ç‰ˆ"></a>6. æ’ç‰ˆ</h1><p>è™½ç„¶å†…å®¹æ¯”æ’ç‰ˆé‡è¦ï¼Œä½†æ˜¯å¥½çš„æ’ç‰ˆä¼šè®©äººçœ‹ç€èˆ’æœï¼Œä¹Ÿå°±ä¼šè®©é¢è¯•å®˜å’Œ HR æ›´æ„¿æ„å»å‘ç°ä½ çš„ä»·å€¼ã€‚</p>
<ul>
<li>ä¸­æ–‡å’Œæ•°å­—è‹±æ–‡ä¹‹é—´åŠ ç©ºæ ¼ï¼Œå› ä¸ºä¸­æ–‡çš„å­—ä½“æ’ç‰ˆå’Œæ•°å­—è‹±æ–‡çš„æœ‰å¾ˆå¤§ä¸åŒï¼Œæ•°å­—è‹±æ–‡åå°ä¸€äº›ã€‚å¦‚æœä¸åŠ ç©ºæ ¼çš„è¯ï¼Œé‚£ä¹ˆæ•´ç¯‡æ–‡ç« çœ‹ç€ä¼šéå¸¸å¯†é›†æ‚ä¹±ï¼Œä¸­æ–‡å’Œæ•°å­—è‹±æ–‡æ··åœ¨ä¸€èµ·å‚å·®ä¸é½ã€‚</li>
<li>ä¸“æœ‰åè¯ä¸€å®šè¦ä¿è¯å¤§å°å†™å®Œå…¨æ­£ç¡®ï¼Œä¾‹å¦‚ä½¿ç”¨ Java è€Œä¸æ˜¯ javaï¼ŒjQuery è€Œä¸æ˜¯ Jqueryã€‚</li>
<li>å†…å®¹ä¹Ÿåº”è¯¥æ³¨æ„å¯¹é½ï¼Œå¦åˆ™ä¼šå¾ˆä¹±ã€‚</li>
<li>æœ€é‡è¦çš„æ˜¯ä¸è¦å¤ªèŠ±å“¨ï¼Œå°½é‡ç®€æ´ã€‚</li>
</ul>
<p>âœğŸ»</p>
<h1 id="7-é¡¹ç›®ä»‹ç»"><a href="#7-é¡¹ç›®ä»‹ç»" class="headerlink" title="7. é¡¹ç›®ä»‹ç»"></a>7. é¡¹ç›®ä»‹ç»</h1><p>å‰é¢è®²åˆ°é¡¹ç›®ç»å†ä¸€æ–¹é¢å¯ä»¥ç”¨äºåŒ¹é…æŠ€èƒ½ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥é€šè¿‡ä½ åœ¨é¡¹ç›®ä¸­è§£å†³çš„é—®é¢˜æ¥å±•ç¤ºä½ çš„èƒ½åŠ›ã€‚å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ä»‹ç»é¡¹ç›®ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆåšè¿™ä¸ªé¡¹ç›®ï¼›</li>
<li>é¡¹ç›®æœ‰å“ªäº›åŠŸèƒ½ï¼›</li>
<li>ä½ åœ¨é¡¹ç›®ä¸­æ‹…ä»»çš„è§’è‰²ï¼›</li>
<li>ç¢°åˆ°äº†å“ªäº›é—®é¢˜ï¼›</li>
<li>ä½¿ç”¨ä»€ä¹ˆæ–¹å¼å»è§£å†³é—®é¢˜çš„ï¼›</li>
<li>è§£å†³æ•ˆæœæ˜¯æ€æ ·ï¼Œå’Œåˆ«äººç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ã€‚</li>
</ul>
<p>ä¸è¦ç”¨å¤ªè¿‡ä¸»è§‚çš„è¯­è¨€ï¼Œè€Œæ˜¯ç”¨æ•°æ®ç­‰å®¢è§‚äº‹å®ã€‚æ¯”å¦‚ä»‹ç»ç¢°åˆ°çš„é—®é¢˜æ—¶ï¼Œä¸è¦ç”¨â€œéå¸¸éš¾è§£å†³â€ç­‰è¯è¯­ï¼Œè€Œæ˜¯ç”¨â€œå¹¶å‘ç”¨æˆ·æ•°è¾¾åˆ°XXXå¯¼è‡´å“åº”æ—¶é—´å¢åŠ åˆ°XXXâ€ç­‰æ•°æ®ã€‚</p>
<p>ä¹Ÿä¸è¦å †å æ— æ„ä¹‰çš„æŠ€æœ¯åè¯ï¼Œæ¯”å¦‚â€œåŸºäº Springã€SpringMVCã€Hibernate å®ç°äº† XXX ç³»ç»Ÿï¼ŒåŒ…å«å¢åˆ æŸ¥æ”¹ç­‰åŠŸèƒ½â€ã€‚</p>
<h1 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a>åŸæ–‡é“¾æ¥</h1><p><a href="https://xiaozhuanlan.com/topic/5039476182" target="_blank" rel="noopener">https://xiaozhuanlan.com/topic/5039476182</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/30/%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E8%B5%9A%E9%92%B1%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/yali.jpg">
      <meta itemprop="name" content="James Li">
      <meta itemprop="description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lovepli">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/30/%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E8%B5%9A%E9%92%B1%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" class="post-title-link" itemprop="url">ç‹¬ç«‹å¼€å‘è€…èµšé’±ç»éªŒåˆ†äº«</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-30 15:54:20" itemprop="dateCreated datePublished" datetime="2020-04-30T15:54:20+08:00">2020-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-05 23:19:18" itemprop="dateModified" datetime="2020-05-05T23:19:18+08:00">2020-05-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">å…¶ä»–</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>ä¹‹å‰ Vue çš„ä½œè€…å°¤å¤§åœ¨å¾®åšä¸Šè¯´ï¼š</strong></p>
<blockquote>
<p>è¢«åŠ¨æ”¶å…¥æ˜¯æœ€èƒ½å¸¦æ¥è‡ªç”±çš„ä¸œè¥¿ï¼Œè¿™ä¸ªæ—¶ä»£çš„ç¨‹åºå‘˜å…¶å®åœ¨åˆ›é€ è¢«åŠ¨æ”¶å…¥ä¸Šæœ‰å¤©ç„¶ä¼˜åŠ¿ï¼Œç„¶è€Œå¤§éƒ¨åˆ†äººéƒ½åœ¨å‡ºå–è‡ªç”±ä¸ºåˆ«äººæ‰“å·¥ã€‚</p>
</blockquote>
<p>è€Œæˆ‘ä½œä¸ºä¸€ä¸ªåˆ›ä¸šè€…ï¼Œä»¥å‰å°±æœ‰ç‹¬ç«‹å¼€å‘è€…çš„ç»éªŒï¼Œè€Œä¸”èº«è¾¹ä¹Ÿæœ‰å¾ˆå¤šç‹¬ç«‹å¼€å‘è€…ï¼Œæˆ‘ä¹Ÿè®¤è¯†å¾ˆå¤šç‹¬ç«‹å¼€å‘è€…ï¼Œæ‰€ä»¥æˆ‘å°±æ€»ç»“å’Œåˆ†äº«ä¸€äº›æˆ‘çŸ¥é“çš„ç‹¬ç«‹å¼€å‘è€…èµšé’±æ–¹å¼æˆ–è€…æ–¹æ³•ï¼Œå°¤å…¶æ˜¯ç¨‹åºå‘˜çš„æ¡ˆä¾‹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©å¤§å®¶ï¼Œæ‰“å¼€æ€ç»´ï¼Œæ€è·¯ï¼Œå¯å‘å¤§å®¶å¯ä»¥å»ä¸ºè‡ªå·±åˆ›é€ ä»·å€¼ã€‚</p>
<p>è€Œä¸”æˆ‘å‘ç°ï¼š <strong>åŸæ¥åœ¨é—·å£°å‘å¤§è´¢çš„ç¨‹åºå‘˜ï¼Œå…¶å®æŒºå¤šçš„ã€‚</strong> ç„¶åæ ¹æ®å¤§å®¶æçš„é—®é¢˜å’Œæˆ‘æ‰€çŸ¥é“çš„ä¸€äº›æ¡ˆä¾‹ï¼Œæˆ‘ä»ä»¥ä¸‹å‡ æ–¹é¢è¿›è¡Œäº†æ€»ç»“å’Œåˆ†äº«ï¼š</p>
<ol>
<li><p>ç¨‹åºå‘˜æ²¡æœ‰é’±ï¼Œä¸æ‡‚å¸‚åœºçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ¨å¹¿è‡ªå·±çš„äº§å“æˆ–è€…è½¯ä»¶ï¼Œå»æ‰“å¼€å¸‚åœºï¼Ÿ</p>
</li>
<li><p>ç¨‹åºå‘˜æ˜¯ä¸ªäººå¼€å‘è€…ï¼Œå¦‚ä½•æ³¨å†Œä¸‹æ¥æ”¯ä»˜åŠŸèƒ½ï¼Œè¿›è¡Œæ¥ç›ˆåˆ©ï¼Ÿ</p>
</li>
<li><p>ç¨‹åºå‘˜ä¸æ‡‚ UI ï¼Œå¦‚ä½•å»è®¾è®¡è‡ªå·±çš„äº§å“ï¼Ÿ</p>
</li>
<li><p>ä¸€äº›ç¨‹åºå‘˜åšç‹¬ç«‹å¼€å‘è€…èµšé’±çš„æ¡ˆä¾‹ã€‚</p>
</li>
<li><p>æˆ‘æ‰€çŸ¥é“çš„å…¶ä»–çš„äº’è”ç½‘äººå£«èµšé’±çš„æ€è·¯ï¼Œå¥—è·¯å’Œæ–¹æ³•ï¼Œå¼€æ‹“å¤§å®¶çš„è®¤çŸ¥ã€‚</p>
</li>
</ol>
<p>ä½ çœ‹å®Œä¸‹é¢æˆ‘æ€»ç»“çš„è¿™äº›æ–‡ç« ï¼Œä½ ç»å¯¹èƒ½å¤Ÿè·å¾—ä¸Šé¢ 5 ç‚¹ç»éªŒï¼Œç»å¯¹è®©ä½ æ”¶è·é¢‡ä¸°ã€‚ç›¸ä¿¡æˆ‘ï¼</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/04/30/%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E8%B5%9A%E9%92%B1%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/30/SpringBoot%E7%BB%8F%E5%85%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/yali.jpg">
      <meta itemprop="name" content="James Li">
      <meta itemprop="description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lovepli">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/30/SpringBoot%E7%BB%8F%E5%85%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">SpringBootç»å…¸å­¦ä¹ ç¬”è®°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-30 15:38:00" itemprop="dateCreated datePublished" datetime="2020-04-30T15:38:00+08:00">2020-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-10 10:03:18" itemprop="dateModified" datetime="2020-05-10T10:03:18+08:00">2020-05-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">æ¡†æ¶</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>è½¬è½½ï¼Œ åŸæ–‡åœ°å€å¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="å¯¼è¯»ï¼šè¯¾ç¨‹æ¦‚è§ˆ"><a href="#å¯¼è¯»ï¼šè¯¾ç¨‹æ¦‚è§ˆ" class="headerlink" title="å¯¼è¯»ï¼šè¯¾ç¨‹æ¦‚è§ˆ"></a>å¯¼è¯»ï¼šè¯¾ç¨‹æ¦‚è§ˆ</h1><h2 id="1-Spring-Bootæ˜¯ä»€ä¹ˆ"><a href="#1-Spring-Bootæ˜¯ä»€ä¹ˆ" class="headerlink" title="1. Spring Bootæ˜¯ä»€ä¹ˆ"></a>1. Spring Bootæ˜¯ä»€ä¹ˆ</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œä» 2002 å¹´å¼€å§‹ï¼ŒSpring ä¸€ç›´åœ¨é£é€Ÿçš„å‘å±•ï¼Œå¦‚ä»Šå·²ç»æˆä¸ºäº†åœ¨Java EEï¼ˆJava Enterprise Editionï¼‰å¼€å‘ä¸­çœŸæ­£æ„ä¹‰ä¸Šçš„æ ‡å‡†ï¼Œä½†æ˜¯éšç€æŠ€æœ¯çš„å‘å±•ï¼ŒJava EEä½¿ç”¨ Spring é€æ¸å˜å¾—ç¬¨é‡èµ·æ¥ï¼Œå¤§é‡çš„ XML æ–‡ä»¶å­˜åœ¨äºé¡¹ç›®ä¹‹ä¸­ã€‚<strong>ç¹ççš„é…ç½®ï¼Œæ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶çš„é…ç½®é—®é¢˜ï¼Œå¯¼è‡´äº†å¼€å‘å’Œéƒ¨ç½²æ•ˆç‡çš„é™ä½</strong>ã€‚  </p>
<p>2012 å¹´ 10 æœˆï¼ŒMike Youngstrom åœ¨ Spring jira ä¸­åˆ›å»ºäº†ä¸€ä¸ªåŠŸèƒ½è¯·æ±‚ï¼Œè¦æ±‚<strong>åœ¨ Spring æ¡†æ¶ä¸­æ”¯æŒæ— å®¹å™¨ Web åº”ç”¨ç¨‹åºä½“ç³»ç»“æ„</strong>ã€‚ä»–è°ˆåˆ°äº†åœ¨ä¸»å®¹å™¨å¼•å¯¼ spring å®¹å™¨å†…é…ç½® Web å®¹å™¨æœåŠ¡ã€‚è¿™æ˜¯ jira è¯·æ±‚çš„æ‘˜å½•ï¼š</p>
<blockquote>
<p>æˆ‘è®¤ä¸º Spring çš„ Web åº”ç”¨ä½“ç³»ç»“æ„å¯ä»¥å¤§å¤§ç®€åŒ–ï¼Œå¦‚æœå®ƒæä¾›äº†ä»ä¸Šåˆ°ä¸‹åˆ©ç”¨ Spring ç»„ä»¶å’Œé…ç½®æ¨¡å‹çš„å·¥å…·å’Œå‚è€ƒä½“ç³»ç»“æ„ã€‚åœ¨ç®€å•çš„ <code>main()</code>æ–¹æ³•å¼•å¯¼çš„ Spring å®¹å™¨å†…åµŒå…¥å’Œç»Ÿä¸€è¿™äº›å¸¸ç”¨Web å®¹å™¨æœåŠ¡çš„é…ç½®ã€‚ </p>
</blockquote>
<p>è¿™ä¸€è¦æ±‚ä¿ƒä½¿äº† 2013 å¹´åˆå¼€å§‹çš„ Spring Boot é¡¹ç›®çš„ç ”å‘ï¼Œåˆ°ä»Šå¤©ï¼ŒSpring Boot çš„ç‰ˆæœ¬å·²ç»åˆ°äº† 2.0.3 RELEASEã€‚Spring Boot å¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œ<strong>æ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·</strong>ã€‚</p>
<p>å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ŒSpring Bootåº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥æ˜¯é›¶é…ç½®çš„å¼€ç®±å³ç”¨ï¼ˆout-of-the-boxï¼‰ï¼Œå¤§éƒ¨åˆ†çš„ Spring Boot åº”ç”¨éƒ½åªéœ€è¦éå¸¸å°‘é‡çš„é…ç½®ä»£ç ï¼ˆåŸºäº Java çš„é…ç½®ï¼‰ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚   </p>
<h2 id="2-ä¸ºä»€ä¹ˆå­¦ä¹ Spring-Boot"><a href="#2-ä¸ºä»€ä¹ˆå­¦ä¹ Spring-Boot" class="headerlink" title="2. ä¸ºä»€ä¹ˆå­¦ä¹ Spring Boot"></a>2. ä¸ºä»€ä¹ˆå­¦ä¹ Spring Boot</h2><h3 id="2-1-ä»Springå®˜æ–¹æ¥çœ‹"><a href="#2-1-ä»Springå®˜æ–¹æ¥çœ‹" class="headerlink" title="2.1 ä»Springå®˜æ–¹æ¥çœ‹"></a>2.1 ä»Springå®˜æ–¹æ¥çœ‹</h3><p>æˆ‘ä»¬æ‰“å¼€ Spring çš„<a href="http://spring.io/" target="_blank" rel="noopener">å®˜æ–¹ç½‘ç«™</a>ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾ï¼š  </p>
<p><img src="https://images.gitbook.cn/98fda7f0-8656-11e8-8675-5537a701ae7d" alt="Springå®˜ç½‘é¦–å›¾"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾ä¸­å®˜æ–¹å¯¹ Spring Boot çš„å®šä½ï¼š<em>Build Anything</em>ï¼Œ Buildä»»ä½•ä¸œè¥¿ã€‚Spring Bootæ—¨åœ¨å°½å¯èƒ½å¿«åœ°å¯åŠ¨å’Œè¿è¡Œï¼Œå¹¶ä¸”åªéœ€æœ€å°‘çš„ Spring å‰æœŸé…ç½®ã€‚  åŒæ—¶æˆ‘ä»¬ä¹Ÿæ¥çœ‹ä¸€ä¸‹å®˜æ–¹å¯¹åé¢ä¸¤ä¸ªçš„å®šä½ï¼š  </p>
<p>SpringCloudï¼š<em>Coordinate Anything</em>ï¼Œåè°ƒä»»ä½•äº‹æƒ…ï¼›<br>SpringCloud Data Flowï¼š<em>Connect everything</em>ï¼Œè¿æ¥ä»»ä½•ä¸œè¥¿ã€‚</p>
<p>ä»”ç»†å“å‘³ä¸€ä¸‹ï¼ŒSpring å®˜ç½‘å¯¹ Spring Bootã€SpringCloud å’Œ SpringCloud Data Flowä¸‰è€…å®šä½çš„æªè¾éå¸¸æœ‰å‘³é“ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒSpring å®˜æ–¹å¯¹è¿™ä¸‰ä¸ªæŠ€æœ¯éå¸¸é‡è§†ï¼Œæ˜¯ç°åœ¨ä»¥åŠä»Šåå­¦ä¹ çš„é‡ç‚¹ï¼ˆSpringCloud ç›¸å…³è¾¾äººè¯¾è¯¾ç¨‹å±Šæ—¶ä¹Ÿä¼šä¸Šçº¿ï¼‰ã€‚</p>
<h3 id="2-2-ä»Spring-Bootçš„ä¼˜ç‚¹æ¥çœ‹"><a href="#2-2-ä»Spring-Bootçš„ä¼˜ç‚¹æ¥çœ‹" class="headerlink" title="2.2 ä»Spring Bootçš„ä¼˜ç‚¹æ¥çœ‹"></a>2.2 ä»Spring Bootçš„ä¼˜ç‚¹æ¥çœ‹</h3><p>Spring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿä¸»è¦ç»™æˆ‘ä»¬è§£å†³äº†å“ªäº›é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬ä»¥ä¸‹å›¾æ¥è¯´æ˜ï¼š</p>
<p><img src="https://images.gitbook.cn/e17b8c40-8656-11e8-8a91-d70bc2d847c5" alt="Spring Bootçš„ä¼˜ç‚¹"></p>
<h4 id="2-2-1-è‰¯å¥½çš„åŸºå› "><a href="#2-2-1-è‰¯å¥½çš„åŸºå› " class="headerlink" title="2.2.1 è‰¯å¥½çš„åŸºå› "></a>2.2.1 è‰¯å¥½çš„åŸºå› </h4><p>Spring Boot æ˜¯ä¼´éšç€ Spring 4.0 è¯ç”Ÿçš„ï¼Œä»å­—é¢ç†è§£ï¼ŒBootæ˜¯å¼•å¯¼çš„æ„æ€ï¼Œå› æ­¤ Spring Boot æ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»º Spring æ¡†æ¶ã€‚Spring Boot ç»§æ‰¿äº†åŸæœ‰ Spring æ¡†æ¶çš„ä¼˜ç§€åŸºå› ï¼Œä½¿ Spring åœ¨ä½¿ç”¨ä¸­æ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚</p>
<p><img src="https://images.gitbook.cn/00078650-8657-11e8-87de-d910a3ee087e" alt="Spring Bootä¸Spring"></p>
<h4 id="2-2-2-ç®€åŒ–ç¼–ç "><a href="#2-2-2-ç®€åŒ–ç¼–ç " class="headerlink" title="2.2.2 ç®€åŒ–ç¼–ç "></a>2.2.2 ç®€åŒ–ç¼–ç </h4><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª web é¡¹ç›®ï¼Œä½¿ç”¨ Spring çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œåœ¨ä½¿ç”¨ Spring çš„æ—¶å€™ï¼Œéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ å¤šä¸ªä¾èµ–ï¼Œè€Œ Spring Boot åˆ™ä¼šå¸®åŠ©å¼€å‘ç€å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª web å®¹å™¨ï¼Œåœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸€ä¸ª starter-web ä¾èµ–å³å¯ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç‚¹å‡»è¿›å…¥è¯¥ä¾èµ–åå¯ä»¥çœ‹åˆ°ï¼ŒSpring Boot è¿™ä¸ª starter-web å·²ç»åŒ…å«äº†å¤šä¸ªä¾èµ–ï¼ŒåŒ…æ‹¬ä¹‹å‰åœ¨ Spring å·¥ç¨‹ä¸­éœ€è¦å¯¼å…¥çš„ä¾èµ–ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- .....çœç•¥å…¶ä»–ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼ŒSpring Boot å¤§å¤§ç®€åŒ–äº†æˆ‘ä»¬çš„ç¼–ç ï¼Œæˆ‘ä»¬ä¸ç”¨ä¸€ä¸ªä¸ªå¯¼å…¥ä¾èµ–ï¼Œç›´æ¥ä¸€ä¸ªä¾èµ–å³å¯ã€‚</p>
<h4 id="2-2-3-ç®€åŒ–é…ç½®"><a href="#2-2-3-ç®€åŒ–é…ç½®" class="headerlink" title="2.2.3 ç®€åŒ–é…ç½®"></a>2.2.3 ç®€åŒ–é…ç½®</h4><p>Spring è™½ç„¶ä½¿Java EEè½»é‡çº§æ¡†æ¶ï¼Œä½†ç”±äºå…¶ç¹ççš„é…ç½®ï¼Œä¸€åº¦è¢«äººè®¤ä¸ºæ˜¯â€œé…ç½®åœ°ç‹±â€ã€‚å„ç§XMLã€Annotationé…ç½®ä¼šè®©äººçœ¼èŠ±ç¼­ä¹±ï¼Œè€Œä¸”é…ç½®å¤šçš„è¯ï¼Œå¦‚æœå‡ºé”™äº†ä¹Ÿå¾ˆéš¾æ‰¾å‡ºåŸå› ã€‚Spring Bootæ›´å¤šçš„æ˜¯é‡‡ç”¨ Java Config çš„æ–¹å¼ï¼Œå¯¹ Spring è¿›è¡Œé…ç½®ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>æˆ‘æ–°å»ºä¸€ä¸ªç±»ï¼Œä½†æ˜¯æˆ‘ä¸ç”¨ <code>@Service</code>æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯ä¸ªæ™®é€šçš„ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä½¿å®ƒä¹Ÿæˆä¸ºä¸€ä¸ª Bean è®© Spring å»ç®¡ç†å‘¢ï¼Ÿåªéœ€è¦<code>@Configuration</code> å’Œ<code>@Bean</code>ä¸¤ä¸ªæ³¨è§£å³å¯ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello Spring Boot!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TestService <span class="title">getTestService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TestService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Configuration</code>è¡¨ç¤ºè¯¥ç±»æ˜¯ä¸ªé…ç½®ç±»ï¼Œ<code>@Bean</code>è¡¨ç¤ºè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª Beanã€‚è¿™æ ·å°±æŠŠ<code>TestService</code>ä½œä¸º Bean è®© Spring å»ç®¡ç†äº†ï¼Œåœ¨å…¶ä»–åœ°æ–¹ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦ä½¿ç”¨è¯¥ Beanï¼Œå’ŒåŸæ¥ä¸€æ ·ï¼Œç›´æ¥ä½¿ç”¨<code>@Resource</code>æ³¨è§£æ³¨å…¥è¿›æ¥å³å¯ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> TestService testService;</span><br></pre></td></tr></table></figure>

<p>å¦å¤–ï¼Œéƒ¨ç½²é…ç½®æ–¹é¢ï¼ŒåŸæ¥ Spring æœ‰å¤šä¸ª xml å’Œ propertiesé…ç½®ï¼Œåœ¨ Spring Boot ä¸­åªéœ€è¦ä¸ª application.ymlå³å¯ã€‚</p>
<h4 id="2-2-4-ç®€åŒ–éƒ¨ç½²"><a href="#2-2-4-ç®€åŒ–éƒ¨ç½²" class="headerlink" title="2.2.4 ç®€åŒ–éƒ¨ç½²"></a>2.2.4 ç®€åŒ–éƒ¨ç½²</h4><p>åœ¨ä½¿ç”¨ Spring æ—¶ï¼Œé¡¹ç›®éƒ¨ç½²æ—¶éœ€è¦æˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½² tomcatï¼Œç„¶åæŠŠé¡¹ç›®æ‰“æˆ war åŒ…æ‰”åˆ° tomcaté‡Œï¼Œåœ¨ä½¿ç”¨ Spring Boot åï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå»éƒ¨ç½² tomcatï¼Œå› ä¸º Spring Boot å†…åµŒäº† tomcatï¼Œæˆ‘ä»¬åªéœ€è¦å°†é¡¹ç›®æ‰“æˆ jar åŒ…ï¼Œä½¿ç”¨ <code>java -jar xxx.jar</code>ä¸€é”®å¼å¯åŠ¨é¡¹ç›®ã€‚</p>
<p>å¦å¤–ï¼Œä¹Ÿé™ä½å¯¹è¿è¡Œç¯å¢ƒçš„åŸºæœ¬è¦æ±‚ï¼Œç¯å¢ƒå˜é‡ä¸­æœ‰JDKå³å¯ã€‚</p>
<h4 id="2-2-5-ç®€åŒ–ç›‘æ§"><a href="#2-2-5-ç®€åŒ–ç›‘æ§" class="headerlink" title="2.2.5 ç®€åŒ–ç›‘æ§"></a>2.2.5 ç®€åŒ–ç›‘æ§</h4><p>æˆ‘ä»¬å¯ä»¥å¼•å…¥ spring-boot-start-actuator ä¾èµ–ï¼Œç›´æ¥ä½¿ç”¨ REST æ–¹å¼æ¥è·å–è¿›ç¨‹çš„è¿è¡ŒæœŸæ€§èƒ½å‚æ•°ï¼Œä»è€Œè¾¾åˆ°ç›‘æ§çš„ç›®çš„ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚ä½†æ˜¯ Spring Boot åªæ˜¯ä¸ªå¾®æ¡†æ¶ï¼Œæ²¡æœ‰æä¾›ç›¸åº”çš„æœåŠ¡å‘ç°ä¸æ³¨å†Œçš„é…å¥—åŠŸèƒ½ï¼Œæ²¡æœ‰å¤–å›´ç›‘æ§é›†æˆæ–¹æ¡ˆï¼Œæ²¡æœ‰å¤–å›´å®‰å…¨ç®¡ç†æ–¹æ¡ˆï¼Œæ‰€ä»¥åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œè¿˜éœ€è¦ Spring Cloud æ¥é…åˆä¸€èµ·ä½¿ç”¨ã€‚</p>
<h3 id="2-3-ä»æœªæ¥å‘å±•çš„è¶‹åŠ¿æ¥çœ‹"><a href="#2-3-ä»æœªæ¥å‘å±•çš„è¶‹åŠ¿æ¥çœ‹" class="headerlink" title="2.3 ä»æœªæ¥å‘å±•çš„è¶‹åŠ¿æ¥çœ‹"></a>2.3 ä»æœªæ¥å‘å±•çš„è¶‹åŠ¿æ¥çœ‹</h3><p>å¾®æœåŠ¡æ˜¯æœªæ¥å‘å±•çš„è¶‹åŠ¿ï¼Œé¡¹ç›®ä¼šä»ä¼ ç»Ÿæ¶æ„æ…¢æ…¢è½¬å‘å¾®æœåŠ¡æ¶æ„ï¼Œå› ä¸ºå¾®æœåŠ¡å¯ä»¥ä½¿ä¸åŒçš„å›¢é˜Ÿä¸“æ³¨äºæ›´å°èŒƒå›´çš„å·¥ä½œèŒè´£ã€ä½¿ç”¨ç‹¬ç«‹çš„æŠ€æœ¯ã€æ›´å®‰å…¨æ›´é¢‘ç¹åœ°éƒ¨ç½²ã€‚è€Œ ç»§æ‰¿äº† Spring çš„ä¼˜è‰¯ç‰¹æ€§ï¼Œä¸ Spring ä¸€è„‰ç›¸æ‰¿ï¼Œè€Œä¸” æ”¯æŒå„ç§REST API çš„å®ç°æ–¹å¼ã€‚Spring Boot ä¹Ÿæ˜¯å®˜æ–¹å¤§åŠ›æ¨èçš„æŠ€æœ¯ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒSpring Boot æ˜¯æœªæ¥å‘å±•çš„ä¸€ä¸ªå¤§è¶‹åŠ¿ã€‚</p>
<h2 id="3-æœ¬è¯¾ç¨‹èƒ½å­¦åˆ°ä»€ä¹ˆ"><a href="#3-æœ¬è¯¾ç¨‹èƒ½å­¦åˆ°ä»€ä¹ˆ" class="headerlink" title="3. æœ¬è¯¾ç¨‹èƒ½å­¦åˆ°ä»€ä¹ˆ"></a>3. æœ¬è¯¾ç¨‹èƒ½å­¦åˆ°ä»€ä¹ˆ</h2><p>æœ¬è¯¾ç¨‹ä½¿ç”¨ç›®å‰ Spring Boot æœ€æ–°ç‰ˆæœ¬2.0.3 RELEASEï¼Œè¯¾ç¨‹æ–‡ç« å‡ä¸ºä½œè€…åœ¨å®é™…é¡¹ç›®ä¸­å‰¥ç¦»å‡ºæ¥çš„åœºæ™¯å’Œdemoï¼Œç›®æ ‡æ˜¯å¸¦é¢†å­¦ä¹ è€…å¿«é€Ÿä¸Šæ‰‹ Spring Bootï¼Œå°† Spring Boot ç›¸å…³æŠ€æœ¯ç‚¹å¿«é€Ÿè¿ç”¨åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­ã€‚å…¨ç¯‡åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šåŸºç¡€ç¯‡å’Œè¿›é˜¶ç¯‡ã€‚  </p>
<p>åŸºç¡€ç¯‡ï¼ˆ01â€”10è¯¾ï¼‰ä¸»è¦ä»‹ç» Spring Boot åœ¨é¡¹ç›®ä¸­æœ€å¸¸ä½¿ç”¨çš„ä¸€äº›åŠŸèƒ½ç‚¹ï¼Œæ—¨åœ¨å¸¦é¢†å­¦ä¹ è€…å¿«é€ŸæŒæ¡ Spring Boot åœ¨å¼€å‘æ—¶éœ€è¦çš„çŸ¥è¯†ç‚¹ï¼Œèƒ½å¤ŸæŠŠ Spring Boot ç›¸å…³æŠ€æœ¯è¿ç”¨åˆ°å®é™…é¡¹ç›®æ¶æ„ä¸­å»ã€‚è¯¥éƒ¨åˆ†ä»¥ Spring Boot æ¡†æ¶ä¸ºä¸»çº¿ï¼Œå†…å®¹åŒ…æ‹¬Jsonæ•°æ®å°è£…ã€æ—¥å¿—è®°å½•ã€å±æ€§é…ç½®ã€MVCæ”¯æŒã€åœ¨çº¿æ–‡æ¡£ã€æ¨¡æ¿å¼•æ“ã€å¼‚å¸¸å¤„ç†ã€AOP å¤„ç†ã€æŒä¹…å±‚é›†æˆç­‰ç­‰ã€‚  </p>
<p>è¿›é˜¶ç¯‡ï¼ˆ11â€”17è¯¾ï¼‰ä¸»è¦æ˜¯ä»‹ç» Spring Boot åœ¨é¡¹ç›®ä¸­æ‹”é«˜ä¸€äº›çš„æŠ€æœ¯ç‚¹ï¼ŒåŒ…æ‹¬é›†æˆçš„ä¸€äº›ç»„ä»¶ï¼Œæ—¨åœ¨å¸¦é¢†å­¦ä¹ è€…åœ¨é¡¹ç›®ä¸­é‡åˆ°å…·ä½“çš„åœºæ™¯æ—¶èƒ½å¤Ÿå¿«é€Ÿé›†æˆï¼Œå®Œæˆå¯¹åº”çš„åŠŸèƒ½ã€‚è¯¥éƒ¨åˆ†ä»¥ Spring Boot æ¡†æ¶ä¸ºä¸»çº¿ï¼Œå†…å®¹åŒ…æ‹¬æ‹¦æˆªå™¨ã€ç›‘å¬å™¨ã€ç¼“å­˜ã€å®‰å…¨è®¤è¯ã€åˆ†è¯æ’ä»¶ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ç­‰ã€‚  </p>
<p>è®¤çœŸè¯»å®Œè¯¥ç³»åˆ—æ–‡ç« ä¹‹åï¼Œå­¦ä¹ è€…ä¼šå¿«é€Ÿäº†è§£å¹¶æŒæ¡ Spring Boot åœ¨é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„æŠ€æœ¯ç‚¹ï¼Œä½œè€…è¯¾ç¨‹çš„æœ€åï¼Œä¼šåŸºäºè¯¾ç¨‹å†…å®¹æ­å»ºä¸€ä¸ª Spring Boot é¡¹ç›®çš„ç©ºæ¶æ„ï¼Œè¯¥æ¶æ„ä¹Ÿæ˜¯ä»å®é™…é¡¹ç›®ä¸­å‰¥ç¦»å‡ºæ¥ï¼Œå­¦ä¹ è€…å¯ä»¥è¿ç”¨è¯¥æ¶æ„äºå®é™…é¡¹ç›®ä¸­ï¼Œå…·å¤‡ä½¿ç”¨ Spring Boot è¿›è¡Œå®é™…é¡¹ç›®å¼€å‘çš„èƒ½åŠ›ã€‚  </p>
<p>è¯¾ç¨‹æ‰€æœ‰æºç æä¾›å…è´¹ä¸‹è½½ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a>ã€‚</p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h2 id="4-é€‚åˆé˜…è¯»çš„äººç¾¤"><a href="#4-é€‚åˆé˜…è¯»çš„äººç¾¤" class="headerlink" title="4. é€‚åˆé˜…è¯»çš„äººç¾¤"></a>4. é€‚åˆé˜…è¯»çš„äººç¾¤</h2><p>æœ¬è¯¾ç¨‹é€‚åˆä»¥ä¸‹äººç¾¤é˜…è¯»ï¼š</p>
<ul>
<li>æœ‰ä¸€å®šçš„Javaè¯­è¨€åŸºç¡€ï¼Œäº†è§£Springã€Mavençš„åœ¨æ ¡å­¦ç”Ÿæˆ–è‡ªå­¦è€…</li>
<li>æœ‰ä¼ ç»Ÿé¡¹ç›®ç»éªŒï¼Œæƒ³å¾€å¾®æœåŠ¡æ–¹å‘å‘å±•çš„å·¥ä½œäººå‘˜</li>
<li>çƒ­è¡·äºæ–°æŠ€æœ¯å¹¶å¯¹ Spring Boot æ„Ÿå…´è¶£çš„äººå‘˜</li>
<li>å¸Œæœ›äº†è§£ Spring Boot 2.0.3 çš„ç ”ç©¶äººå‘˜<h2 id="5-æœ¬è¯¾ç¨‹å¼€å‘ç¯å¢ƒå’Œæ’ä»¶"><a href="#5-æœ¬è¯¾ç¨‹å¼€å‘ç¯å¢ƒå’Œæ’ä»¶" class="headerlink" title="5. æœ¬è¯¾ç¨‹å¼€å‘ç¯å¢ƒå’Œæ’ä»¶"></a>5. æœ¬è¯¾ç¨‹å¼€å‘ç¯å¢ƒå’Œæ’ä»¶</h2></li>
</ul>
<p>æœ¬è¯¾ç¨‹çš„å¼€å‘ç¯å¢ƒï¼š</p>
<ul>
<li>å¼€å‘å·¥å…·ï¼šIDEA 2017</li>
<li>JDKç‰ˆæœ¬ï¼š JDK 1.8</li>
<li>Spring Bootç‰ˆæœ¬ï¼š2.0.3 RELEASE</li>
<li>Mavenç‰ˆæœ¬ï¼š3.5.2</li>
</ul>
<p>æ¶‰åŠåˆ°çš„æ’ä»¶ï¼š</p>
<ul>
<li>FastJson</li>
<li>Swagger2</li>
<li>Thymeleaf</li>
<li>MyBatis</li>
<li>Redis</li>
<li>ActiveMQ</li>
<li>Shiro</li>
<li>Lucence</li>
</ul>
<h2 id="6-è¯¾ç¨‹ç›®å½•"><a href="#6-è¯¾ç¨‹ç›®å½•" class="headerlink" title="6. è¯¾ç¨‹ç›®å½•"></a>6. è¯¾ç¨‹ç›®å½•</h2><ul>
<li>å¯¼è¯»ï¼šè¯¾ç¨‹æ¦‚è§ˆ</li>
<li>ç¬¬01è¯¾ï¼šSpring Bootå¼€å‘ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®å¯åŠ¨</li>
<li>ç¬¬02è¯¾ï¼šSpring Bootè¿”å›Jsonæ•°æ®åŠæ•°æ®å°è£…</li>
<li>ç¬¬03è¯¾ï¼šSpring Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•</li>
<li>ç¬¬04è¯¾ï¼šSpring Bootä¸­çš„é¡¹ç›®å±æ€§é…ç½®</li>
<li>ç¬¬05è¯¾ï¼šSpring Bootä¸­çš„MVCæ”¯æŒ</li>
<li>ç¬¬06è¯¾ï¼šSpring Booté›†æˆSwagger2å±•ç°åœ¨çº¿æ¥å£æ–‡æ¡£</li>
<li>ç¬¬07è¯¾ï¼šSpring Booté›†æˆThymeleafæ¨¡æ¿å¼•æ“</li>
<li>ç¬¬08è¯¾ï¼šSpring Bootä¸­çš„å…¨å±€å¼‚å¸¸å¤„ç†</li>
<li>ç¬¬09è¯¾ï¼šSpring Bootä¸­çš„åˆ‡é¢AOPå¤„ç†</li>
<li>ç¬¬10è¯¾ï¼šSpring Bootä¸­é›†æˆMyBatis</li>
<li>ç¬¬11è¯¾ï¼šSpring Bootäº‹åŠ¡é…ç½®ç®¡ç†</li>
<li>ç¬¬12è¯¾ï¼šSpring Bootä¸­ä½¿ç”¨ç›‘å¬å™¨</li>
<li>ç¬¬13è¯¾ï¼šSpring Bootä¸­ä½¿ç”¨æ‹¦æˆªå™¨</li>
<li>ç¬¬14è¯¾ï¼šSpring Bootä¸­é›†æˆRedis</li>
<li>ç¬¬15è¯¾ï¼šSpring Bootä¸­é›†æˆActiveMQ</li>
<li>ç¬¬16è¯¾ï¼šSpring Bootä¸­é›†æˆShiro</li>
<li>ç¬¬17è¯¾ï¼šSpring Bootä¸­ç»“æˆLucence</li>
<li>ç¬¬18è¯¾ï¼šSpring Bootæ­å»ºå®é™…é¡¹ç›®å¼€å‘ä¸­çš„æ¶æ„</li>
</ul>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬01è¯¾ï¼šSpring-Bootå¼€å‘ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®å¯åŠ¨"><a href="#ç¬¬01è¯¾ï¼šSpring-Bootå¼€å‘ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®å¯åŠ¨" class="headerlink" title="ç¬¬01è¯¾ï¼šSpring Bootå¼€å‘ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®å¯åŠ¨"></a>ç¬¬01è¯¾ï¼šSpring Bootå¼€å‘ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®å¯åŠ¨</h1><p>ä¸Šä¸€èŠ‚å¯¹ SpringBoot çš„ç‰¹æ€§åšäº†ä¸€ä¸ªä»‹ç»ï¼Œæœ¬èŠ‚ä¸»è¦å¯¹ <strong>jdk çš„é…ç½®ã€Spring Bootå·¥ç¨‹çš„æ„å»ºå’Œé¡¹ç›®çš„å¯åŠ¨ã€Spring Boot é¡¹ç›®å·¥ç¨‹çš„ç»“æ„åšä¸€ä¸‹è®²è§£å’Œåˆ†æ</strong>ã€‚</p>
<h2 id="1-jdk-çš„é…ç½®"><a href="#1-jdk-çš„é…ç½®" class="headerlink" title="1. jdk çš„é…ç½®"></a>1. jdk çš„é…ç½®</h2><p>æœ¬è¯¾ç¨‹æ˜¯ä½¿ç”¨ IDEA è¿›è¡Œå¼€å‘ï¼Œåœ¨IDEA ä¸­é…ç½® jdk çš„æ–¹å¼å¾ˆç®€å•ï¼Œæ‰“å¼€<code>File-&gt;Project Structure</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ï¼š</p>
<p><img src="https://images.gitbook.cn/9befde80-8659-11e8-9b0d-95de449dc107" alt="IDEAä¸­é…ç½®jdk"></p>
<ol>
<li>é€‰æ‹© SDKs</li>
<li>åœ¨ JDK home path ä¸­é€‰æ‹©æœ¬åœ° jdk çš„å®‰è£…ç›®å½•</li>
<li>åœ¨ Name ä¸­ä¸º jdk è‡ªå®šä¹‰åå­—</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šä¸‰æ­¥éª¤ï¼Œå³å¯å¯¼å…¥æœ¬åœ°å®‰è£…çš„ jdkã€‚å¦‚æœæ˜¯ä½¿ç”¨ STS æˆ–è€… eclipse çš„æœ‹å‹ï¼Œå¯ä»¥é€šè¿‡ä¸¤æ­¥éª¤æ·»åŠ ï¼š</p>
<ul>
<li><code>window-&gt;preference-&gt;java-&gt;Instralled JRES</code>æ¥æ·»åŠ æœ¬åœ° jdkã€‚</li>
<li><code>window--&gt;preference--&gt;java--&gt;Compiler</code>é€‰æ‹© jreï¼Œå’Œ jdk ä¿æŒä¸€è‡´ã€‚</li>
</ul>
<h2 id="2-Spring-Boot-å·¥ç¨‹çš„æ„å»º"><a href="#2-Spring-Boot-å·¥ç¨‹çš„æ„å»º" class="headerlink" title="2. Spring Boot å·¥ç¨‹çš„æ„å»º"></a>2. Spring Boot å·¥ç¨‹çš„æ„å»º</h2><h3 id="2-1-IDEA-å¿«é€Ÿæ„å»º"><a href="#2-1-IDEA-å¿«é€Ÿæ„å»º" class="headerlink" title="2.1 IDEA å¿«é€Ÿæ„å»º"></a>2.1 IDEA å¿«é€Ÿæ„å»º</h3><p>IDEA ä¸­å¯ä»¥é€šè¿‡<code>File-&gt;New-&gt;Project</code>æ¥å¿«é€Ÿæ„å»º Spring Boot å·¥ç¨‹ã€‚å¦‚ä¸‹ï¼Œé€‰æ‹© Spring Initializrï¼Œåœ¨ Project SDK ä¸­é€‰æ‹©åˆšåˆšæˆ‘ä»¬å¯¼å…¥çš„ jdkï¼Œç‚¹å‡» Nextï¼Œåˆ°äº†é¡¹ç›®çš„é…ç½®ä¿¡æ¯ã€‚</p>
<ul>
<li>Groupï¼šå¡«ä¼ä¸šåŸŸåï¼Œæœ¬è¯¾ç¨‹ä½¿ç”¨com.itcodai</li>
<li>Artifactï¼šå¡«é¡¹ç›®åç§°ï¼Œæœ¬è¯¾ç¨‹ä¸­æ¯ä¸€è¯¾çš„å·¥ç¨‹åä»¥<code>course+è¯¾å·</code>å‘½ä»¤ï¼Œè¿™é‡Œä½¿ç”¨ course01</li>
<li>Dependenciesï¼šå¯ä»¥æ·»åŠ æˆ‘ä»¬é¡¹ç›®ä¸­æ‰€éœ€è¦çš„ä¾èµ–ä¿¡æ¯ï¼Œæ ¹æ®å®é™…æƒ…å†µæ¥æ·»åŠ ï¼Œæœ¬è¯¾ç¨‹åªéœ€è¦é€‰æ‹© Web å³å¯ã€‚</li>
</ul>
<h3 id="2-2-å®˜æ–¹æ„å»º"><a href="#2-2-å®˜æ–¹æ„å»º" class="headerlink" title="2.2 å®˜æ–¹æ„å»º"></a>2.2 å®˜æ–¹æ„å»º</h3><p>ç¬¬äºŒç§æ–¹å¼å¯ä»¥é€šè¿‡å®˜æ–¹æ„å»ºï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®¿é—® <a href="http://start.spring.io/ã€‚" target="_blank" rel="noopener">http://start.spring.io/ã€‚</a></li>
<li>åœ¨é¡µé¢ä¸Šè¾“å…¥ç›¸åº”çš„ Spring Boot ç‰ˆæœ¬ã€Group å’Œ Artifact ä¿¡æ¯ä»¥åŠé¡¹ç›®ä¾èµ–ï¼Œç„¶ååˆ›å»ºé¡¹ç›®ã€‚</li>
<li><img src="https://images.gitbook.cn/014a1ba0-865b-11e8-956e-f528114b28bd" alt="åˆ›å»ºSpring Bootå·¥ç¨‹"></li>
<li>è§£å‹åï¼Œä½¿ç”¨ IDEA å¯¼å…¥è¯¥ maven å·¥ç¨‹ï¼š<code>File-&gt;New-&gt;Model from Existing Source</code>ï¼Œç„¶åé€‰æ‹©è§£å‹åçš„é¡¹ç›®æ–‡ä»¶å¤¹å³å¯ã€‚å¦‚æœæ˜¯ä½¿ç”¨ eclipse çš„æœ‹å‹ï¼Œå¯ä»¥é€šè¿‡<code>Import-&gt;Existing Maven Projects-&gt;Next</code>ï¼Œç„¶åé€‰æ‹©è§£å‹åçš„é¡¹ç›®æ–‡ä»¶å¤¹å³å¯ã€‚</li>
</ul>
<h3 id="2-3-mavené…ç½®"><a href="#2-3-mavené…ç½®" class="headerlink" title="2.3 mavené…ç½®"></a>2.3 mavené…ç½®</h3><p>åˆ›å»ºäº† Spring Boot é¡¹ç›®ä¹‹åï¼Œéœ€è¦è¿›è¡Œ maven é…ç½®ã€‚æ‰“å¼€<code>File-&gt;settings</code>ï¼Œæœç´¢ mavenï¼Œé…ç½®ä¸€ä¸‹æœ¬åœ°çš„ maven ä¿¡æ¯ã€‚å¦‚ä¸‹ï¼š</p>
<p><img src="https://images.gitbook.cn/2ff7b930-865b-11e8-8675-5537a701ae7d" alt="mavené…ç½®"></p>
<p>åœ¨ Maven home directory ä¸­é€‰æ‹©æœ¬åœ° Maven çš„å®‰è£…è·¯å¾„ï¼›åœ¨ User settings file ä¸­é€‰æ‹©æœ¬åœ° Maven çš„é…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é…ç½®ä¸€ä¸‹å›½å†…é˜¿é‡Œçš„é•œåƒï¼Œè¿™æ ·åœ¨ä¸‹è½½ maven ä¾èµ–æ—¶ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯ä½¿ç”¨ eclipse çš„æœ‹å‹ï¼Œå¯ä»¥é€šè¿‡<code>window--&gt;preference--&gt;Maven--&gt;User Settings</code>æ¥é…ç½®ï¼Œé…ç½®æ–¹å¼å’Œä¸Šé¢ä¸€è‡´ã€‚</p>
<h3 id="2-4-ç¼–ç é…ç½®"><a href="#2-4-ç¼–ç é…ç½®" class="headerlink" title="2.4 ç¼–ç é…ç½®"></a>2.4 ç¼–ç é…ç½®</h3><p>åŒæ ·åœ°ï¼Œæ–°å»ºé¡¹ç›®åï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½éœ€è¦é…ç½®ç¼–ç ï¼Œè¿™ç‚¹éå¸¸é‡è¦ï¼Œå¾ˆå¤šåˆå­¦è€…éƒ½ä¼šå¿˜è®°è¿™ä¸€æ­¥ï¼Œæ‰€ä»¥è¦å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ã€‚</p>
<p>IDEA ä¸­ï¼Œä»ç„¶æ˜¯æ‰“å¼€<code>File-&gt;settings</code>ï¼Œæœç´¢ encodingï¼Œé…ç½®ä¸€ä¸‹æœ¬åœ°çš„ç¼–ç ä¿¡æ¯ã€‚å¦‚ä¸‹ï¼š</p>
<p><img src="https://images.gitbook.cn/57564e60-865b-11e8-8a91-d70bc2d847c5" alt="ç¼–ç é…ç½®"></p>
<p>å¦‚æœæ˜¯ä½¿ç”¨ eclipse çš„æœ‹å‹ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦è®¾ç½®ä¸€ä¸‹ç¼–ç ï¼š</p>
<ul>
<li>windowâ€“&gt; perferencesâ€“&gt;Generalâ€“&gt;Workspaceï¼Œå°†Text file encodingæ”¹æˆutf-8</li>
<li>windowâ€“&gt;perferencesâ€“&gt;Generalâ€“&gt;content typesï¼Œé€‰ä¸­Textï¼Œå°†Default encodingå¡«å…¥utf-8</li>
</ul>
<p>OKï¼Œç¼–ç è®¾ç½®å®Œæˆå³å¯å¯åŠ¨é¡¹ç›®å·¥ç¨‹äº†ã€‚</p>
<h2 id="3-Spring-Boot-é¡¹ç›®å·¥ç¨‹ç»“æ„"><a href="#3-Spring-Boot-é¡¹ç›®å·¥ç¨‹ç»“æ„" class="headerlink" title="3. Spring Boot é¡¹ç›®å·¥ç¨‹ç»“æ„"></a>3. Spring Boot é¡¹ç›®å·¥ç¨‹ç»“æ„</h2><p>Spring Boot é¡¹ç›®æ€»å…±æœ‰ä¸‰ä¸ªæ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://images.gitbook.cn/8b32fa80-865b-11e8-9d13-03ea4b4d8504" alt="Spring Booté¡¹ç›®å·¥ç¨‹ç»“æ„"></p>
<ul>
<li>src/main/javaè·¯å¾„ï¼šä¸»è¦ç¼–å†™ä¸šåŠ¡ç¨‹åº</li>
<li>src/main/resourcesè·¯å¾„ï¼šå­˜æ”¾é™æ€æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶</li>
<li>src/test/javaè·¯å¾„ï¼šä¸»è¦ç¼–å†™æµ‹è¯•ç¨‹åº</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºä¼šåˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±» Course01Applicationï¼Œè¯¥ç±»ä¸Šé¢æœ‰ä¸ª<code>@SpringBootApplication</code>æ³¨è§£ï¼Œè¯¥å¯åŠ¨ç±»ä¸­æœ‰ä¸ª main æ–¹æ³•ï¼Œæ²¡é”™ï¼ŒSpring Boot å¯åŠ¨åªè¦è¿è¡Œè¯¥ main æ–¹æ³•å³å¯ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦å¤–ï¼ŒSpring Boot å†…éƒ¨é›†æˆäº† tomcatï¼Œä¸éœ€è¦æˆ‘ä»¬äººä¸ºæ‰‹åŠ¨å»é…ç½® tomcatï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å³å¯ã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒSpring Boot å°±å¯åŠ¨æˆåŠŸäº†ï¼Œä¸ºäº†æ¯”è¾ƒæ¸…æ¥šçš„çœ‹åˆ°æ•ˆæœï¼Œæˆ‘ä»¬å†™ä¸€ä¸ª Controller æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itcodai.course01.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/start"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/springboot"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">startSpringBoot</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Welcome to the world of Spring Boot!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°è¿è¡Œ main æ–¹æ³•å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/start/springboot</code>ï¼Œå¦‚æœçœ‹åˆ° <code>â€œWelcome to the world of Spring Boot!â€</code>ï¼Œé‚£ä¹ˆæ­å–œä½ é¡¹ç›®å¯åŠ¨æˆåŠŸï¼Spring Boot å°±æ˜¯è¿™ä¹ˆç®€å•æ–¹ä¾¿ï¼ç«¯å£å·é»˜è®¤æ˜¯8080ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ï¼Œå¯ä»¥åœ¨ application.yml æ–‡ä»¶ä¸­ä½¿ç”¨ <code>server.port</code> æ¥äººä¸ºæŒ‡å®šç«¯å£ï¼Œå¦‚8001ç«¯å£ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8001</span><br></pre></td></tr></table></figure>

<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬èŠ‚æˆ‘ä»¬å¿«é€Ÿå­¦ä¹ äº†å¦‚ä½•åœ¨ IDEA ä¸­å¯¼å…¥ jdkï¼Œä»¥åŠä½¿ç”¨ IDEA å¦‚ä½•é…ç½® maven å’Œç¼–ç ï¼Œå¦‚ä½•å¿«é€Ÿçš„åˆ›å»ºå’Œå¯åŠ¨ Spring Boot å·¥ç¨‹ã€‚IDEA å¯¹ Spring Boot çš„æ”¯æŒéå¸¸å‹å¥½ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨ IDEA è¿›è¡Œ Spring Boot çš„å¼€å‘ï¼Œä»ä¸‹ä¸€è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬çœŸæ­£è¿›å…¥ Spring Boot çš„å­¦ä¹ ä¸­ã€‚<br>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬02è¯¾ï¼šSpring-Bootè¿”å›Jsonæ•°æ®åŠæ•°æ®å°è£…"><a href="#ç¬¬02è¯¾ï¼šSpring-Bootè¿”å›Jsonæ•°æ®åŠæ•°æ®å°è£…" class="headerlink" title="ç¬¬02è¯¾ï¼šSpring Bootè¿”å›Jsonæ•°æ®åŠæ•°æ®å°è£…"></a>ç¬¬02è¯¾ï¼šSpring Bootè¿”å›Jsonæ•°æ®åŠæ•°æ®å°è£…</h1><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¥å£ä¸æ¥å£ä¹‹é—´ï¼Œå‰åç«¯ä¹‹é—´æ•°æ®çš„ä¼ è¾“éƒ½ä½¿ç”¨ Json æ ¼å¼ï¼Œåœ¨ Spring Boot ä¸­ï¼Œæ¥å£è¿”å› Json æ ¼å¼çš„æ•°æ®å¾ˆç®€å•ï¼Œåœ¨ Controller ä¸­ä½¿ç”¨<code>@RestController</code>æ³¨è§£å³å¯è¿”å› Json æ ¼å¼çš„æ•°æ®ï¼Œ<code>@RestController</code>ä¹Ÿæ˜¯ Spring Boot æ–°å¢çš„ä¸€ä¸ªæ³¨è§£ï¼Œæˆ‘ä»¬ç‚¹è¿›å»çœ‹ä¸€ä¸‹è¯¥æ³¨è§£éƒ½åŒ…å«äº†å“ªäº›ä¸œè¥¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RestController &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œ <code>@RestController</code> æ³¨è§£åŒ…å«äº†åŸæ¥çš„ <code>@Controller</code> å’Œ <code>@ResponseBody</code> æ³¨è§£ï¼Œä½¿ç”¨è¿‡ Spring çš„æœ‹å‹å¯¹ <code>@Controller</code> æ³¨è§£å·²ç»éå¸¸äº†è§£äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œ <code>@ResponseBody</code> æ³¨è§£æ˜¯å°†è¿”å›çš„æ•°æ®ç»“æ„è½¬æ¢ä¸º Json æ ¼å¼ã€‚æ‰€ä»¥åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨äº† <code>@RestController</code> æ³¨è§£å³å¯å°†è¿”å›çš„æ•°æ®ç»“æ„è½¬æ¢æˆ Json æ ¼å¼ï¼ŒSpring Boot ä¸­é»˜è®¤ä½¿ç”¨çš„ Json è§£ææŠ€æœ¯æ¡†æ¶æ˜¯ jacksonã€‚æˆ‘ä»¬ç‚¹å¼€ pom.xml ä¸­çš„ <code>spring-boot-starter-web</code> ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ª <code>spring-boot-starter-json</code> ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Spring Boot ä¸­å¯¹ä¾èµ–éƒ½åšäº†å¾ˆå¥½çš„å°è£…ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤š <code>spring-boot-starter-xxx</code> ç³»åˆ—çš„ä¾èµ–ï¼Œè¿™æ˜¯ Spring Boot çš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œä¸éœ€è¦äººä¸ºå»å¼•å…¥å¾ˆå¤šç›¸å…³çš„ä¾èµ–äº†ï¼Œstarter-xxx ç³»åˆ—ç›´æ¥éƒ½åŒ…å«äº†æ‰€å¿…è¦çš„ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å†æ¬¡ç‚¹è¿›å»ä¸Šé¢è¿™ä¸ª <code>spring-boot-starter-json</code> ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jdk8<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.module<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-module-parameter-names<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çŸ¥é“äº† Spring Boot ä¸­é»˜è®¤ä½¿ç”¨çš„ json è§£ææ¡†æ¶æ˜¯ jacksonã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹é»˜è®¤çš„ jackson æ¡†æ¶å¯¹å¸¸ç”¨æ•°æ®ç±»å‹çš„è½¬ Json å¤„ç†ã€‚</p>
<h2 id="1-Spring-Boot-é»˜è®¤å¯¹Jsonçš„å¤„ç†"><a href="#1-Spring-Boot-é»˜è®¤å¯¹Jsonçš„å¤„ç†" class="headerlink" title="1. Spring Boot é»˜è®¤å¯¹Jsonçš„å¤„ç†"></a>1. Spring Boot é»˜è®¤å¯¹Jsonçš„å¤„ç†</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¸¸ç”¨çš„æ•°æ®ç»“æ„æ— éæœ‰ç±»å¯¹è±¡ã€Listå¯¹è±¡ã€Mapå¯¹è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹é»˜è®¤çš„ jackson æ¡†æ¶å¯¹è¿™ä¸‰ä¸ªå¸¸ç”¨çš„æ•°æ®ç»“æ„è½¬æˆ json åçš„æ ¼å¼å¦‚ä½•ã€‚</p>
<h3 id="1-1-åˆ›å»º-User-å®ä½“ç±»"><a href="#1-1-åˆ›å»º-User-å®ä½“ç±»" class="headerlink" title="1.1 åˆ›å»º User å®ä½“ç±»"></a>1.1 åˆ›å»º User å®ä½“ç±»</h3><p>ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç”¨ User æ¥æ¼”ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">	<span class="comment">/* çœç•¥getã€setå’Œå¸¦å‚æ„é€ æ–¹æ³• */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-åˆ›å»ºControllerç±»"><a href="#1-2-åˆ›å»ºControllerç±»" class="headerlink" title="1.2 åˆ›å»ºControllerç±»"></a>1.2 åˆ›å»ºControllerç±»</h3><p>ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Controllerï¼Œåˆ†åˆ«è¿”å› <code>User</code>å¯¹è±¡ã€<code>List&lt;User&gt;</code> å’Œ <code>Map&lt;String, Object&gt;</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.itcodai.course02.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/json"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        User user1 = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        User user2 = <span class="keyword">new</span> User(<span class="number">2</span>, <span class="string">"è¾¾äººè¯¾"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        userList.add(user1);</span><br><span class="line">        userList.add(user2);</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/map"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        map.put(<span class="string">"ä½œè€…ä¿¡æ¯"</span>, user);</span><br><span class="line">        map.put(<span class="string">"åšå®¢åœ°å€"</span>, <span class="string">"http://blog.itcodai.com"</span>);</span><br><span class="line">        map.put(<span class="string">"CSDNåœ°å€"</span>, <span class="string">"http://blog.csdn.net/eson_15"</span>);</span><br><span class="line">        map.put(<span class="string">"ç²‰ä¸æ•°é‡"</span>, <span class="number">4153</span>);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-3-æµ‹è¯•ä¸åŒæ•°æ®ç±»å‹è¿”å›çš„json"><a href="#1-3-æµ‹è¯•ä¸åŒæ•°æ®ç±»å‹è¿”å›çš„json" class="headerlink" title="1.3 æµ‹è¯•ä¸åŒæ•°æ®ç±»å‹è¿”å›çš„json"></a>1.3 æµ‹è¯•ä¸åŒæ•°æ®ç±»å‹è¿”å›çš„json</h3><p>OKï¼Œå†™å¥½äº†æ¥å£ï¼Œåˆ†åˆ«è¿”å›äº†ä¸€ä¸ª User å¯¹è±¡ã€ä¸€ä¸ª List é›†åˆå’Œä¸€ä¸ª Map é›†åˆï¼Œå…¶ä¸­ Map é›†åˆä¸­çš„ value å­˜çš„æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¾æ¬¡æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœã€‚</p>
<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>localhost:8080/json/user</code> è¿”å› json å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>localhost:8080/json/list</code> è¿”å› json å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>&#125;,&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"username"</span>:<span class="string">"è¾¾äººè¯¾"</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>localhost:8080/json/map</code> è¿”å› json å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"ä½œè€…ä¿¡æ¯"</span>:&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>&#125;,<span class="attr">"CSDNåœ°å€"</span>:<span class="string">"http://blog.csdn.net/eson_15"</span>,<span class="attr">"ç²‰ä¸æ•°é‡"</span>:<span class="number">4153</span>,<span class="attr">"åšå®¢åœ°å€"</span>:<span class="string">"http://blog.itcodai.com"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œmap ä¸­ä¸ç®¡æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œéƒ½å¯ä»¥è½¬æˆç›¸åº”çš„ json æ ¼å¼ï¼Œè¿™æ ·å°±éå¸¸æ–¹ä¾¿ã€‚</p>
<h3 id="1-4-jackson-ä¸­å¯¹nullçš„å¤„ç†"><a href="#1-4-jackson-ä¸­å¯¹nullçš„å¤„ç†" class="headerlink" title="1.4 jackson ä¸­å¯¹nullçš„å¤„ç†"></a>1.4 jackson ä¸­å¯¹nullçš„å¤„ç†</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éš¾å…ä¼šé‡åˆ°ä¸€äº› null å€¼å‡ºç°ï¼Œæˆ‘ä»¬è½¬ json æ—¶ï¼Œæ˜¯ä¸å¸Œæœ›æœ‰è¿™äº› null å‡ºç°çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æœŸæœ›æ‰€æœ‰çš„ null åœ¨è½¬ json æ—¶éƒ½å˜æˆ â€œâ€ è¿™ç§ç©ºå­—ç¬¦ä¸²ï¼Œé‚£æ€ä¹ˆåšå‘¢ï¼Ÿåœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬åšä¸€ä¸‹é…ç½®å³å¯ï¼Œæ–°å»ºä¸€ä¸ª jackson çš„é…ç½®ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonGenerator;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.JsonSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.SerializerProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Primary;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JacksonConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(ObjectMapper<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ObjectMapper</span> <span class="title">jacksonObjectMapper</span>(<span class="title">Jackson2ObjectMapperBuilder</span> <span class="title">builder</span>) </span>&#123;</span><br><span class="line">        ObjectMapper objectMapper = builder.createXmlMapper(<span class="keyword">false</span>).build();</span><br><span class="line">        objectMapper.getSerializerProvider().setNullValueSerializer(<span class="keyword">new</span> JsonSerializer&lt;Object&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serialize</span><span class="params">(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                jsonGenerator.writeString(<span class="string">""</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> objectMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢è¿”å› map çš„æ¥å£ï¼Œå°†å‡ ä¸ªå€¼æ”¹æˆ null æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/map"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="keyword">null</span>);</span><br><span class="line">    map.put(<span class="string">"ä½œè€…ä¿¡æ¯"</span>, user);</span><br><span class="line">    map.put(<span class="string">"åšå®¢åœ°å€"</span>, <span class="string">"http://blog.itcodai.com"</span>);</span><br><span class="line">    map.put(<span class="string">"CSDNåœ°å€"</span>, <span class="keyword">null</span>);</span><br><span class="line">    map.put(<span class="string">"ç²‰ä¸æ•°é‡"</span>, <span class="number">4153</span>);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯é¡¹ç›®ï¼Œå†æ¬¡è¾“å…¥ï¼š<code>localhost:8080/json/map</code>ï¼Œå¯ä»¥çœ‹åˆ° jackson å·²ç»å°†æ‰€æœ‰ null å­—æ®µè½¬æˆäº†ç©ºå­—ç¬¦ä¸²äº†ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"ä½œè€…ä¿¡æ¯"</span>:&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>,<span class="attr">"password"</span>:<span class="string">""</span>&#125;,<span class="attr">"CSDNåœ°å€"</span>:<span class="string">""</span>,<span class="attr">"ç²‰ä¸æ•°é‡"</span>:<span class="number">4153</span>,<span class="attr">"åšå®¢åœ°å€"</span>:<span class="string">"http://blog.itcodai.com"</span>&#125;</span><br></pre></td></tr></table></figure>


<h2 id="2-ä½¿ç”¨é˜¿é‡Œå·´å·´FastJsonçš„è®¾ç½®"><a href="#2-ä½¿ç”¨é˜¿é‡Œå·´å·´FastJsonçš„è®¾ç½®" class="headerlink" title="2. ä½¿ç”¨é˜¿é‡Œå·´å·´FastJsonçš„è®¾ç½®"></a>2. ä½¿ç”¨é˜¿é‡Œå·´å·´FastJsonçš„è®¾ç½®</h2><h3 id="2-1-jackson-å’Œ-fastJson-çš„å¯¹æ¯”"><a href="#2-1-jackson-å’Œ-fastJson-çš„å¯¹æ¯”" class="headerlink" title="2.1 jackson å’Œ fastJson çš„å¯¹æ¯”"></a>2.1 jackson å’Œ fastJson çš„å¯¹æ¯”</h3><p>æœ‰å¾ˆå¤šæœ‹å‹ä¹ æƒ¯äºä½¿ç”¨é˜¿é‡Œå·´å·´çš„ fastJson æ¥åšé¡¹ç›®ä¸­ json è½¬æ¢çš„ç›¸å…³å·¥ä½œï¼Œç›®å‰æˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨çš„å°±æ˜¯é˜¿é‡Œçš„ fastJsonï¼Œé‚£ä¹ˆ jackson å’Œ fastJson æœ‰å“ªäº›åŒºåˆ«å‘¢ï¼Ÿæ ¹æ®ç½‘ä¸Šå…¬å¼€çš„èµ„æ–™æ¯”è¾ƒå¾—åˆ°ä¸‹è¡¨ã€‚<br>| é€‰é¡¹ | fastJson | jackson |<br>| :-: | :-: | :-: |<br>| ä¸Šæ‰‹éš¾æ˜“ç¨‹åº¦ | å®¹æ˜“ | ä¸­ç­‰ |<br>| é«˜çº§ç‰¹æ€§æ”¯æŒ | ä¸­ç­‰ | ä¸°å¯Œ |<br>| å®˜æ–¹æ–‡æ¡£ã€Exampleæ”¯æŒ | ä¸­æ–‡ | è‹±æ–‡ |<br>| å¤„ç†jsoné€Ÿåº¦ | ç•¥å¿« | å¿« |</p>
<p>å…³äº fastJson å’Œ jackson çš„å¯¹æ¯”ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šèµ„æ–™å¯ä»¥æŸ¥çœ‹ï¼Œä¸»è¦æ˜¯æ ¹æ®è‡ªå·±å®é™…é¡¹ç›®æƒ…å†µæ¥é€‰æ‹©åˆé€‚çš„æ¡†æ¶ã€‚ä»æ‰©å±•ä¸Šæ¥çœ‹ï¼ŒfastJson æ²¡æœ‰ jackson çµæ´»ï¼Œä»é€Ÿåº¦æˆ–è€…ä¸Šæ‰‹éš¾åº¦æ¥çœ‹ï¼ŒfastJson å¯ä»¥è€ƒè™‘ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­ç›®å‰ä½¿ç”¨çš„æ˜¯é˜¿é‡Œçš„ fastJsonï¼ŒæŒºæ–¹ä¾¿çš„ã€‚</p>
<h3 id="2-2-fastJsonä¾èµ–å¯¼å…¥"><a href="#2-2-fastJsonä¾èµ–å¯¼å…¥" class="headerlink" title="2.2 fastJsonä¾èµ–å¯¼å…¥"></a>2.2 fastJsonä¾èµ–å¯¼å…¥</h3><p>ä½¿ç”¨ fastJson éœ€è¦å¯¼å…¥ä¾èµ–ï¼Œæœ¬è¯¾ç¨‹ä½¿ç”¨ 1.2.35 ç‰ˆæœ¬ï¼Œä¾èµ–å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.35<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-ä½¿ç”¨-fastJson-å¤„ç†-null"><a href="#2-2-ä½¿ç”¨-fastJson-å¤„ç†-null" class="headerlink" title="2.2 ä½¿ç”¨ fastJson å¤„ç† null"></a>2.2 ä½¿ç”¨ fastJson å¤„ç† null</h3><p>ä½¿ç”¨ fastJson æ—¶ï¼Œå¯¹ null çš„å¤„ç†å’Œ jackson æœ‰äº›ä¸åŒï¼Œéœ€è¦ç»§æ‰¿  <code>WebMvcConfigurationSupport</code> ç±»ï¼Œç„¶åè¦†ç›– <code>configureMessageConverters</code> æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¯¹è¦å®ç° null è½¬æ¢çš„åœºæ™¯ï¼Œé…ç½®å¥½å³å¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.serializer.SerializerFeature;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.support.config.FastJsonConfig;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.converter.HttpMessageConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">fastJsonConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨é˜¿é‡Œ FastJson ä½œä¸ºJSON MessageConverter</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> converters</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> </span>&#123;</span><br><span class="line">        FastJsonHttpMessageConverter converter = <span class="keyword">new</span> FastJsonHttpMessageConverter();</span><br><span class="line">        FastJsonConfig config = <span class="keyword">new</span> FastJsonConfig();</span><br><span class="line">        config.setSerializerFeatures(</span><br><span class="line">                <span class="comment">// ä¿ç•™mapç©ºçš„å­—æ®µ</span></span><br><span class="line">                SerializerFeature.WriteMapNullValue,</span><br><span class="line">                <span class="comment">// å°†Stringç±»å‹çš„nullè½¬æˆ""</span></span><br><span class="line">                SerializerFeature.WriteNullStringAsEmpty,</span><br><span class="line">                <span class="comment">// å°†Numberç±»å‹çš„nullè½¬æˆ0</span></span><br><span class="line">                SerializerFeature.WriteNullNumberAsZero,</span><br><span class="line">                <span class="comment">// å°†Listç±»å‹çš„nullè½¬æˆ[]</span></span><br><span class="line">                SerializerFeature.WriteNullListAsEmpty,</span><br><span class="line">                <span class="comment">// å°†Booleanç±»å‹çš„nullè½¬æˆfalse</span></span><br><span class="line">                SerializerFeature.WriteNullBooleanAsFalse,</span><br><span class="line">                <span class="comment">// é¿å…å¾ªç¯å¼•ç”¨</span></span><br><span class="line">                SerializerFeature.DisableCircularReferenceDetect);</span><br><span class="line"></span><br><span class="line">        converter.setFastJsonConfig(config);</span><br><span class="line">        converter.setDefaultCharset(Charset.forName(<span class="string">"UTF-8"</span>));</span><br><span class="line">        List&lt;MediaType&gt; mediaTypeList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">// è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œç›¸å½“äºåœ¨Controllerä¸Šçš„@RequestMappingä¸­åŠ äº†ä¸ªå±æ€§produces = "application/json"</span></span><br><span class="line">        mediaTypeList.add(MediaType.APPLICATION_JSON);</span><br><span class="line">        converter.setSupportedMediaTypes(mediaTypeList);</span><br><span class="line">        converters.add(converter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-å°è£…ç»Ÿä¸€è¿”å›çš„æ•°æ®ç»“æ„"><a href="#3-å°è£…ç»Ÿä¸€è¿”å›çš„æ•°æ®ç»“æ„" class="headerlink" title="3. å°è£…ç»Ÿä¸€è¿”å›çš„æ•°æ®ç»“æ„"></a>3. å°è£…ç»Ÿä¸€è¿”å›çš„æ•°æ®ç»“æ„</h2><p>ä»¥ä¸Šæ˜¯ Spring Boot è¿”å› json çš„å‡ ä¸ªä»£è¡¨çš„ä¾‹å­ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé™¤äº†è¦å°è£…æ•°æ®ä¹‹å¤–ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦åœ¨è¿”å›çš„ json ä¸­æ·»åŠ ä¸€äº›å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚è¿”å›ä¸€äº›çŠ¶æ€ç  code ï¼Œè¿”å›ä¸€äº› msg ç»™è°ƒç”¨è€…ï¼Œè¿™æ ·è°ƒç”¨è€…å¯ä»¥æ ¹æ® code æˆ–è€… msg åšä¸€äº›é€»è¾‘åˆ¤æ–­ã€‚æ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªç»Ÿä¸€çš„ json è¿”å›ç»“æ„å­˜å‚¨è¿”å›ä¿¡æ¯ã€‚ </p>
<h3 id="3-1-å®šä¹‰ç»Ÿä¸€çš„-json-ç»“æ„"><a href="#3-1-å®šä¹‰ç»Ÿä¸€çš„-json-ç»“æ„" class="headerlink" title="3.1 å®šä¹‰ç»Ÿä¸€çš„ json ç»“æ„"></a>3.1 å®šä¹‰ç»Ÿä¸€çš„ json ç»“æ„</h3><p>ç”±äºå°è£…çš„ json æ•°æ®çš„ç±»å‹ä¸ç¡®å®šï¼Œæ‰€ä»¥åœ¨å®šä¹‰ç»Ÿä¸€çš„ json ç»“æ„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°æ³›å‹ã€‚ç»Ÿä¸€çš„ json ç»“æ„ä¸­å±æ€§åŒ…æ‹¬æ•°æ®ã€çŠ¶æ€ç ã€æç¤ºä¿¡æ¯å³å¯ï¼Œæ„é€ æ–¹æ³•å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚åšç›¸åº”çš„æ·»åŠ å³å¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥æœ‰é»˜è®¤çš„è¿”å›ç»“æ„ï¼Œä¹Ÿåº”è¯¥æœ‰ç”¨æˆ·æŒ‡å®šçš„è¿”å›ç»“æ„ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonResult</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‹¥æ²¡æœ‰æ•°æ®è¿”å›ï¼Œé»˜è®¤çŠ¶æ€ç ä¸º0ï¼Œæç¤ºä¿¡æ¯ä¸ºï¼šæ“ä½œæˆåŠŸï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"0"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">"æ“ä½œæˆåŠŸï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‹¥æ²¡æœ‰æ•°æ®è¿”å›ï¼Œå¯ä»¥äººä¸ºæŒ‡å®šçŠ¶æ€ç å’Œæç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ‰æ•°æ®è¿”å›æ—¶ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œé»˜è®¤æç¤ºä¿¡æ¯ä¸ºï¼šæ“ä½œæˆåŠŸï¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"0"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">"æ“ä½œæˆåŠŸï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ‰æ•°æ®è¿”å›ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œäººä¸ºæŒ‡å®šæç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(T data, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"0"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// çœç•¥getå’Œsetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-ä¿®æ”¹-Controller-ä¸­çš„è¿”å›å€¼ç±»å‹åŠæµ‹è¯•"><a href="#3-2-ä¿®æ”¹-Controller-ä¸­çš„è¿”å›å€¼ç±»å‹åŠæµ‹è¯•" class="headerlink" title="3.2 ä¿®æ”¹ Controller ä¸­çš„è¿”å›å€¼ç±»å‹åŠæµ‹è¯•"></a>3.2 ä¿®æ”¹ Controller ä¸­çš„è¿”å›å€¼ç±»å‹åŠæµ‹è¯•</h3><p>ç”±äº JsonResult ä½¿ç”¨äº†æ³›å‹ï¼Œæ‰€ä»¥æ‰€æœ‰çš„è¿”å›å€¼ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨è¯¥ç»Ÿä¸€ç»“æ„ï¼Œåœ¨å…·ä½“çš„åœºæ™¯å°†æ³›å‹æ›¿æ¢æˆå…·ä½“çš„æ•°æ®ç±»å‹å³å¯ï¼Œéå¸¸æ–¹ä¾¿ï¼Œä¹Ÿä¾¿äºç»´æŠ¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿˜å¯ä»¥ç»§ç»­å°è£…ï¼Œæ¯”å¦‚çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯å¯ä»¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œä»¥åæˆ‘ä»¬åªéœ€è¦ç»´æŠ¤è¿™ä¸ªæšä¸¾ç±»å‹ä¸­çš„æ•°æ®å³å¯ï¼ˆåœ¨æœ¬è¯¾ç¨‹ä¸­å°±ä¸å±•å¼€äº†ï¼‰ã€‚æ ¹æ®ä»¥ä¸Šçš„ JsonResultï¼Œæˆ‘ä»¬æ”¹å†™ä¸€ä¸‹ Controllerï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/jsonresult"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonResultController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult&lt;User&gt; <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult&lt;&gt;(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult&lt;List&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        User user1 = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        User user2 = <span class="keyword">new</span> User(<span class="number">2</span>, <span class="string">"è¾¾äººè¯¾"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        userList.add(user1);</span><br><span class="line">        userList.add(user2);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult&lt;&gt;(userList, <span class="string">"è·å–ç”¨æˆ·åˆ—è¡¨æˆåŠŸ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/map"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult&lt;Map&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="keyword">null</span>);</span><br><span class="line">        map.put(<span class="string">"ä½œè€…ä¿¡æ¯"</span>, user);</span><br><span class="line">        map.put(<span class="string">"åšå®¢åœ°å€"</span>, <span class="string">"http://blog.itcodai.com"</span>);</span><br><span class="line">        map.put(<span class="string">"CSDNåœ°å€"</span>, <span class="keyword">null</span>);</span><br><span class="line">        map.put(<span class="string">"ç²‰ä¸æ•°é‡"</span>, <span class="number">4153</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult&lt;&gt;(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é‡æ–°åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>localhost:8080/jsonresult/user</code> è¿”å› json å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"code"</span>:<span class="string">"0"</span>,<span class="attr">"data"</span>:&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>&#125;,<span class="attr">"msg"</span>:<span class="string">"æ“ä½œæˆåŠŸï¼"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ï¼š<code>localhost:8080/jsonresult/list</code>ï¼Œè¿”å› json å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"code"</span>:<span class="string">"0"</span>,<span class="attr">"data"</span>:[&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>&#125;,&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>,<span class="attr">"username"</span>:<span class="string">"è¾¾äººè¯¾"</span>&#125;],<span class="attr">"msg"</span>:<span class="string">"è·å–ç”¨æˆ·åˆ—è¡¨æˆåŠŸ"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ï¼š<code>localhost:8080/jsonresult/map</code>ï¼Œè¿”å› json å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"code"</span>:<span class="string">"0"</span>,<span class="attr">"data"</span>:&#123;<span class="attr">"ä½œè€…ä¿¡æ¯"</span>:&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"password"</span>:<span class="string">""</span>,<span class="attr">"username"</span>:<span class="string">"å€ªå‡æ­¦"</span>&#125;,<span class="attr">"CSDNåœ°å€"</span>:<span class="literal">null</span>,<span class="attr">"ç²‰ä¸æ•°é‡"</span>:<span class="number">4153</span>,<span class="attr">"åšå®¢åœ°å€"</span>:<span class="string">"http://blog.itcodai.com"</span>&#125;,<span class="attr">"msg"</span>:<span class="string">"æ“ä½œæˆåŠŸï¼"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å°è£…ï¼Œæˆ‘ä»¬ä¸ä½†å°†æ•°æ®é€šè¿‡ json ä¼ ç»™å‰ç«¯æˆ–è€…å…¶ä»–æ¥å£ï¼Œè¿˜å¸¦ä¸Šäº†çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯ï¼Œè¿™åœ¨å®é™…é¡¹ç›®åœºæ™¯ä¸­åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p>
<h2 id="4-æ€»ç»“-1"><a href="#4-æ€»ç»“-1" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬èŠ‚ä¸»è¦å¯¹ Spring Boot ä¸­ json æ•°æ®çš„è¿”å›åšäº†è¯¦ç»†çš„åˆ†æï¼Œä» Spring Boot é»˜è®¤çš„ jackson æ¡†æ¶åˆ°é˜¿é‡Œå·´å·´çš„ fastJson æ¡†æ¶ï¼Œåˆ†åˆ«å¯¹å®ƒä»¬çš„é…ç½®åšäº†ç›¸åº”çš„è®²è§£ã€‚å¦å¤–ï¼Œç»“åˆå®é™…é¡¹ç›®æƒ…å†µï¼Œæ€»ç»“äº†å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„ json å°è£…ç»“æ„ä½“ï¼ŒåŠ å…¥äº†çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯ï¼Œä½¿å¾—è¿”å›çš„ json æ•°æ®ä¿¡æ¯æ›´åŠ å®Œæ•´ã€‚<br>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬03è¯¾ï¼šSpring-Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•"><a href="#ç¬¬03è¯¾ï¼šSpring-Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•" class="headerlink" title="ç¬¬03è¯¾ï¼šSpring Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•"></a>ç¬¬03è¯¾ï¼šSpring Bootä½¿ç”¨slf4jè¿›è¡Œæ—¥å¿—è®°å½•</h1><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ <code>System.out.println()</code> æ¥æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œä½†æ˜¯è¿™æ ·ä¸å¥½ï¼Œå› ä¸ºå¤§é‡çš„ä½¿ç”¨ <code>System.out</code> ä¼šå¢åŠ èµ„æºçš„æ¶ˆè€—ã€‚æˆ‘ä»¬å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ slf4j çš„ logback æ¥è¾“å‡ºæ—¥å¿—ï¼Œæ•ˆç‡æŒºé«˜çš„ï¼ŒSpring Boot æä¾›äº†ä¸€å¥—æ—¥å¿—ç³»ç»Ÿï¼Œlogback æ˜¯æœ€ä¼˜çš„é€‰æ‹©ã€‚</p>
<h2 id="1-slf4j-ä»‹ç»"><a href="#1-slf4j-ä»‹ç»" class="headerlink" title="1. slf4j ä»‹ç»"></a>1. slf4j ä»‹ç»</h2><p>å¼•ç”¨ç™¾åº¦ç™¾ç§‘é‡Œçš„ä¸€æ®µè¯ï¼š</p>
<blockquote>
<p>SLF4Jï¼Œå³ç®€å•æ—¥å¿—é—¨é¢ï¼ˆSimple Logging Facade for Javaï¼‰ï¼Œä¸æ˜¯å…·ä½“çš„æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Œå®ƒåªæœåŠ¡äºå„ç§å„æ ·çš„æ—¥å¿—ç³»ç»Ÿã€‚æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼ŒSLF4Jæ˜¯ä¸€ä¸ªç”¨äºæ—¥å¿—ç³»ç»Ÿçš„ç®€å•Facadeï¼Œå…è®¸æœ€ç»ˆç”¨æˆ·åœ¨éƒ¨ç½²å…¶åº”ç”¨æ—¶ä½¿ç”¨å…¶æ‰€å¸Œæœ›çš„æ—¥å¿—ç³»ç»Ÿã€‚</p>
</blockquote>
<p>è¿™æ®µçš„å¤§æ¦‚æ„æ€æ˜¯ï¼šä½ åªéœ€è¦æŒ‰ç»Ÿä¸€çš„æ–¹å¼å†™è®°å½•æ—¥å¿—çš„ä»£ç ï¼Œè€Œæ— éœ€å…³å¿ƒæ—¥å¿—æ˜¯é€šè¿‡å“ªä¸ªæ—¥å¿—ç³»ç»Ÿï¼Œä»¥ä»€ä¹ˆé£æ ¼è¾“å‡ºçš„ã€‚å› ä¸ºå®ƒä»¬å–å†³äºéƒ¨ç½²é¡¹ç›®æ—¶ç»‘å®šçš„æ—¥å¿—ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº† slf4j è®°å½•æ—¥å¿—ï¼Œå¹¶ä¸”ç»‘å®šäº† log4jï¼ˆå³å¯¼å…¥ç›¸åº”çš„ä¾èµ–ï¼‰ï¼Œåˆ™æ—¥å¿—ä¼šä»¥ log4j çš„é£æ ¼è¾“å‡ºï¼›åæœŸéœ€è¦æ”¹ä¸ºä»¥ logback çš„é£æ ¼è¾“å‡ºæ—¥å¿—ï¼Œåªéœ€è¦å°† log4j æ›¿æ¢æˆ logback å³å¯ï¼Œä¸ç”¨ä¿®æ”¹é¡¹ç›®ä¸­çš„ä»£ç ã€‚è¿™å¯¹äºç¬¬ä¸‰æ–¹ç»„ä»¶çš„å¼•å…¥çš„ä¸åŒæ—¥å¿—ç³»ç»Ÿæ¥è¯´å‡ ä¹é›¶å­¦ä¹ æˆæœ¬ï¼Œå†µä¸”å®ƒçš„ä¼˜ç‚¹ä¸ä»…ä»…è¿™ä¸€ä¸ªè€Œå·²ï¼Œè¿˜æœ‰ç®€æ´çš„å ä½ç¬¦çš„ä½¿ç”¨å’Œæ—¥å¿—çº§åˆ«çš„åˆ¤æ–­ã€‚</p>
<p>æ­£å› ä¸º sfl4j æœ‰å¦‚æ­¤å¤šçš„ä¼˜ç‚¹ï¼Œé˜¿é‡Œå·´å·´å·²ç»å°† slf4j ä½œä¸ºä»–ä»¬çš„æ—¥å¿—æ¡†æ¶äº†ã€‚åœ¨ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ(æ­£å¼ç‰ˆ)ã€‹ä¸­ï¼Œæ—¥å¿—è§„çº¦ä¸€é¡¹ç¬¬ä¸€æ¡å°±å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ slf4jï¼š</p>
<blockquote>
<p>1.ã€å¼ºåˆ¶ã€‘åº”ç”¨ä¸­ä¸å¯ç›´æ¥ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿï¼ˆLog4jã€Logbackï¼‰ä¸­çš„APIï¼Œè€Œåº”ä¾èµ–ä½¿ç”¨æ—¥å¿—æ¡†æ¶SLF4Jä¸­çš„APIï¼Œä½¿ç”¨é—¨é¢æ¨¡å¼çš„æ—¥å¿—æ¡†æ¶ï¼Œæœ‰åˆ©äºç»´æŠ¤å’Œå„ä¸ªç±»çš„æ—¥å¿—å¤„ç†æ–¹å¼ç»Ÿä¸€ã€‚</p>
</blockquote>
<p>â€œå¼ºåˆ¶â€ä¸¤ä¸ªå­—ä½“ç°å‡ºäº† slf4j çš„ä¼˜åŠ¿ï¼Œæ‰€ä»¥å»ºè®®åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ slf4j ä½œä¸ºè‡ªå·±çš„æ—¥å¿—æ¡†æ¶ã€‚ä½¿ç”¨ slf4j è®°å½•æ—¥å¿—éå¸¸ç®€å•ï¼Œç›´æ¥ä½¿ç”¨  LoggerFactory åˆ›å»ºå³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(Test<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-application-yml-ä¸­å¯¹æ—¥å¿—çš„é…ç½®"><a href="#2-application-yml-ä¸­å¯¹æ—¥å¿—çš„é…ç½®" class="headerlink" title="2. application.yml ä¸­å¯¹æ—¥å¿—çš„é…ç½®"></a>2. application.yml ä¸­å¯¹æ—¥å¿—çš„é…ç½®</h2><p>Spring Boot å¯¹ slf4j æ”¯æŒçš„å¾ˆå¥½ï¼Œå†…éƒ¨å·²ç»é›†æˆäº† slf4jï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šå¯¹slf4j åšä¸€ä¸‹é…ç½®ã€‚<code>application.yml</code> æ–‡ä»¶æ˜¯ Spring Boot ä¸­å”¯ä¸€ä¸€ä¸ªéœ€è¦é…ç½®çš„æ–‡ä»¶ï¼Œä¸€å¼€å§‹åˆ›å»ºå·¥ç¨‹çš„æ—¶å€™æ˜¯ <code>application.properties</code> æ–‡ä»¶ï¼Œä¸ªäººæ¯”è¾ƒç»†åŒ–ç”¨ yml æ–‡ä»¶ï¼Œå› ä¸º yml æ–‡ä»¶çš„å±‚æ¬¡æ„Ÿç‰¹åˆ«å¥½ï¼Œçœ‹èµ·æ¥æ›´ç›´è§‚ï¼Œä½†æ˜¯ yml æ–‡ä»¶å¯¹æ ¼å¼è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæ¯”å¦‚è‹±æ–‡å†’å·åé¢å¿…é¡»è¦æœ‰ä¸ªç©ºæ ¼ï¼Œå¦åˆ™é¡¹ç›®ä¼°è®¡æ— æ³•å¯åŠ¨ï¼Œè€Œä¸”ä¹Ÿä¸æŠ¥é”™ã€‚ç”¨ properties è¿˜æ˜¯ yml è§†ä¸ªäººä¹ æƒ¯è€Œå®šï¼Œéƒ½å¯ä»¥ã€‚æœ¬è¯¾ç¨‹ä½¿ç”¨ ymlã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ application.yml æ–‡ä»¶ä¸­å¯¹æ—¥å¿—çš„é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">logging:</span><br><span class="line">  config: logback.xml</span><br><span class="line">  level:</span><br><span class="line">    com.itcodai.course03.dao: trace</span><br></pre></td></tr></table></figure>
<p><code>logging.config</code> æ˜¯ç”¨æ¥æŒ‡å®šé¡¹ç›®å¯åŠ¨çš„æ—¶å€™ï¼Œè¯»å–å“ªä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯æ—¥å¿—é…ç½®æ–‡ä»¶æ˜¯æ ¹è·¯å¾„ä¸‹çš„ <code>logback.xml</code> æ–‡ä»¶ï¼Œå…³äºæ—¥å¿—çš„ç›¸å…³é…ç½®ä¿¡æ¯ï¼Œéƒ½æ”¾åœ¨ <code>logback.xml</code> æ–‡ä»¶ä¸­äº†ã€‚<code>logging.level</code> æ˜¯ç”¨æ¥æŒ‡å®šå…·ä½“çš„ mapper ä¸­æ—¥å¿—çš„è¾“å‡ºçº§åˆ«ï¼Œä¸Šé¢çš„é…ç½®è¡¨ç¤º <code>com.itcodai.course03.dao</code> åŒ…ä¸‹çš„æ‰€æœ‰ mapper æ—¥å¿—è¾“å‡ºçº§åˆ«ä¸º traceï¼Œä¼šå°†æ“ä½œæ•°æ®åº“çš„ sql æ‰“å°å‡ºæ¥ï¼Œå¼€å‘æ—¶è®¾ç½®æˆ trace æ–¹ä¾¿å®šä½é—®é¢˜ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸Šï¼Œå°†è¿™ä¸ªæ—¥å¿—çº§åˆ«å†è®¾ç½®æˆ error çº§åˆ«å³å¯ï¼ˆæœ¬èŠ‚è¯¾ä¸è®¨è®º mapper å±‚ï¼Œåœ¨åé¢ Spring Boot é›†æˆ MyBatis æ—¶å†è¯¦ç»†è®¨è®ºï¼‰ã€‚</p>
<p>å¸¸ç”¨çš„æ—¥å¿—çº§åˆ«æŒ‰ç…§ä»é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼šERRORã€WARNã€INFOã€DEBUGã€‚</p>
<h2 id="3-logback-xml-é…ç½®æ–‡ä»¶è§£æ"><a href="#3-logback-xml-é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="3. logback.xml é…ç½®æ–‡ä»¶è§£æ"></a>3. logback.xml é…ç½®æ–‡ä»¶è§£æ</h2><p>åœ¨ä¸Šé¢ <code>application.yml</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†æ—¥å¿—é…ç½®æ–‡ä»¶ <code>logback.xml</code>ï¼Œ<code>logback.xml</code> æ–‡ä»¶ä¸­ä¸»è¦ç”¨æ¥åšæ—¥å¿—çš„ç›¸å…³é…ç½®ã€‚åœ¨ <code>logback.xml</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰æ—¥å¿—è¾“å‡ºçš„æ ¼å¼ã€è·¯å¾„ã€æ§åˆ¶å°è¾“å‡ºæ ¼å¼ã€æ–‡ä»¶å¤§å°ã€ä¿å­˜æ—¶é•¿ç­‰ç­‰ã€‚ä¸‹é¢æ¥åˆ†æä¸€ä¸‹ï¼š</p>
<h3 id="3-1-å®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼å’Œå­˜å‚¨è·¯å¾„"><a href="#3-1-å®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼å’Œå­˜å‚¨è·¯å¾„" class="headerlink" title="3.1 å®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼å’Œå­˜å‚¨è·¯å¾„"></a>3.1 å®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼å’Œå­˜å‚¨è·¯å¾„</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"LOG_PATTERN"</span> <span class="attr">value</span>=<span class="string">"%date&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"FILE_PATH"</span> <span class="attr">value</span>=<span class="string">"D:/logs/course03/demo.%d&#123;yyyy-MM-dd&#125;.%i.log"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®šä¹‰çš„å«ä¹‰ï¼šé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ ¼å¼ï¼Œå‘½åä¸º â€œLOG_PATTERNâ€ï¼Œè¯¥æ ¼å¼ä¸­ <code>%date</code> è¡¨ç¤ºæ—¥æœŸï¼Œ<code>%thread</code> è¡¨ç¤ºçº¿ç¨‹åï¼Œ<code>%-5level</code> è¡¨ç¤ºçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œ<code>%logger{36}</code>  è¡¨ç¤º logger åå­—æœ€é•¿36ä¸ªå­—ç¬¦ï¼Œ<code>%msg</code> è¡¨ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼Œ<code>%n</code> æ˜¯æ¢è¡Œç¬¦ã€‚</p>
<p>ç„¶åå†å®šä¹‰ä¸€ä¸‹åä¸º â€œFILE_PATHâ€ æ–‡ä»¶è·¯å¾„ï¼Œæ—¥å¿—éƒ½ä¼šå­˜å‚¨åœ¨è¯¥è·¯å¾„ä¸‹ã€‚<code>%i</code> è¡¨ç¤ºç¬¬ i ä¸ªæ–‡ä»¶ï¼Œå½“æ—¥å¿—æ–‡ä»¶è¾¾åˆ°æŒ‡å®šå¤§å°æ—¶ï¼Œä¼šå°†æ—¥å¿—ç”Ÿæˆåˆ°æ–°çš„æ–‡ä»¶é‡Œï¼Œè¿™é‡Œçš„ i å°±æ˜¯æ–‡ä»¶ç´¢å¼•ï¼Œæ—¥å¿—æ–‡ä»¶å…è®¸çš„å¤§å°å¯ä»¥è®¾ç½®ï¼Œä¸‹é¢ä¼šè®²è§£ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç®¡æ˜¯ windows ç³»ç»Ÿè¿˜æ˜¯ Linux ç³»ç»Ÿï¼Œæ—¥å¿—å­˜å‚¨çš„è·¯å¾„å¿…é¡»è¦æ˜¯ç»å¯¹è·¯å¾„ã€‚</p>
<h3 id="3-2-å®šä¹‰æ§åˆ¶å°è¾“å‡º"><a href="#3-2-å®šä¹‰æ§åˆ¶å°è¾“å‡º" class="headerlink" title="3.2 å®šä¹‰æ§åˆ¶å°è¾“å‡º"></a>3.2 å®šä¹‰æ§åˆ¶å°è¾“å‡º</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"CONSOLE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æŒ‰ç…§ä¸Šé¢é…ç½®çš„LOG_PATTERNæ¥æ‰“å°æ—¥å¿— --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>&lt;appender&gt;</code> èŠ‚ç‚¹è®¾ç½®ä¸ªæ§åˆ¶å°è¾“å‡ºï¼ˆ<code>class=&quot;ch.qos.logback.core.ConsoleAppender&quot;</code>ï¼‰çš„é…ç½®ï¼Œå®šä¹‰ä¸º â€œCONSOLEâ€ã€‚ä½¿ç”¨ä¸Šé¢å®šä¹‰å¥½çš„è¾“å‡ºæ ¼å¼ï¼ˆLOG_PATTERNï¼‰æ¥è¾“å‡ºï¼Œä½¿ç”¨ <code>${}</code> å¼•ç”¨è¿›æ¥å³å¯ã€‚</p>
<h3 id="3-3-å®šä¹‰æ—¥å¿—æ–‡ä»¶çš„ç›¸å…³å‚æ•°"><a href="#3-3-å®šä¹‰æ—¥å¿—æ–‡ä»¶çš„ç›¸å…³å‚æ•°" class="headerlink" title="3.3 å®šä¹‰æ—¥å¿—æ–‡ä»¶çš„ç›¸å…³å‚æ•°"></a>3.3 å®šä¹‰æ—¥å¿—æ–‡ä»¶çš„ç›¸å…³å‚æ•°</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"FILE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- æŒ‰ç…§ä¸Šé¢é…ç½®çš„FILE_PATHè·¯å¾„æ¥ä¿å­˜æ—¥å¿— --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;FILE_PATH&#125;<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- æ—¥å¿—ä¿å­˜15å¤© --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§ï¼Œè¶…è¿‡åˆ™æ–°å»ºæ—¥å¿—æ–‡ä»¶å­˜å‚¨ --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- æŒ‰ç…§ä¸Šé¢é…ç½®çš„LOG_PATTERNæ¥æ‰“å°æ—¥å¿— --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>&lt;appender&gt;</code> å®šä¹‰ä¸€ä¸ªåä¸º â€œFILEâ€ çš„æ–‡ä»¶é…ç½®ï¼Œä¸»è¦æ˜¯é…ç½®æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„æ—¶é—´ã€å•ä¸ªæ—¥å¿—æ–‡ä»¶å­˜å‚¨çš„å¤§å°ã€ä»¥åŠæ–‡ä»¶ä¿å­˜çš„è·¯å¾„å’Œæ—¥å¿—çš„è¾“å‡ºæ ¼å¼ã€‚</p>
<h3 id="3-4-å®šä¹‰æ—¥å¿—è¾“å‡ºçº§åˆ«"><a href="#3-4-å®šä¹‰æ—¥å¿—è¾“å‡ºçº§åˆ«" class="headerlink" title="3.4 å®šä¹‰æ—¥å¿—è¾“å‡ºçº§åˆ«"></a>3.4 å®šä¹‰æ—¥å¿—è¾“å‡ºçº§åˆ«</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.itcodai.course03"</span> <span class="attr">level</span>=<span class="string">"INFO"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"FILE"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æœ‰äº†ä¸Šé¢é‚£äº›å®šä¹‰åï¼Œæœ€åæˆ‘ä»¬ä½¿ç”¨ <code>&lt;logger&gt;</code> æ¥å®šä¹‰ä¸€ä¸‹é¡¹ç›®ä¸­é»˜è®¤çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œè¿™é‡Œå®šä¹‰çº§åˆ«ä¸º INFOï¼Œç„¶åé’ˆå¯¹ INFO çº§åˆ«çš„æ—¥å¿—ï¼Œä½¿ç”¨ <code>&lt;root&gt;</code> å¼•ç”¨ä¸Šé¢å®šä¹‰å¥½çš„æ§åˆ¶å°æ—¥å¿—è¾“å‡ºå’Œæ—¥å¿—æ–‡ä»¶çš„å‚æ•°ã€‚è¿™æ · logback.xml æ–‡ä»¶ä¸­çš„é…ç½®å°±è®¾ç½®å®Œäº†ã€‚</p>
<h2 id="4-ä½¿ç”¨Loggeråœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—"><a href="#4-ä½¿ç”¨Loggeråœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—" class="headerlink" title="4. ä½¿ç”¨Loggeråœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—"></a>4. ä½¿ç”¨Loggeråœ¨é¡¹ç›®ä¸­æ‰“å°æ—¥å¿—</h2><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Logger å¯¹è±¡æ¥æ‰“å°å‡ºä¸€äº› log ä¿¡æ¯ï¼Œå¯ä»¥æŒ‡å®šæ‰“å°å‡ºçš„æ—¥å¿—çº§åˆ«ï¼Œä¹Ÿæ”¯æŒå ä½ç¬¦ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(TestController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/log"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testLog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.debug(<span class="string">"=====æµ‹è¯•æ—¥å¿—debugçº§åˆ«æ‰“å°===="</span>);</span><br><span class="line">        logger.info(<span class="string">"======æµ‹è¯•æ—¥å¿—infoçº§åˆ«æ‰“å°====="</span>);</span><br><span class="line">        logger.error(<span class="string">"=====æµ‹è¯•æ—¥å¿—errorçº§åˆ«æ‰“å°===="</span>);</span><br><span class="line">        logger.warn(<span class="string">"======æµ‹è¯•æ—¥å¿—warnçº§åˆ«æ‰“å°====="</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯ä»¥ä½¿ç”¨å ä½ç¬¦æ‰“å°å‡ºä¸€äº›å‚æ•°ä¿¡æ¯</span></span><br><span class="line">        String str1 = <span class="string">"blog.itcodai.com"</span>;</span><br><span class="line">        String str2 = <span class="string">"blog.csdn.net/eson_15"</span>;</span><br><span class="line">        logger.info(<span class="string">"======å€ªå‡æ­¦çš„ä¸ªäººåšå®¢ï¼š&#123;&#125;ï¼›å€ªå‡æ­¦çš„CSDNåšå®¢ï¼š&#123;&#125;"</span>, str1, str2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨è¯¥é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/test/log</code> åå¯ä»¥çœ‹åˆ°æ§åˆ¶å°çš„æ—¥å¿—è®°å½•ï¼š</p>
<blockquote>
<p>======æµ‹è¯•æ—¥å¿—infoçº§åˆ«æ‰“å°=====<br>=====æµ‹è¯•æ—¥å¿—errorçº§åˆ«æ‰“å°====<br>======æµ‹è¯•æ—¥å¿—warnçº§åˆ«æ‰“å°=====<br>======å€ªå‡æ­¦çš„ä¸ªäººåšå®¢ï¼šblog.itcodai.comï¼›å€ªå‡æ­¦çš„CSDNåšå®¢ï¼šblog.csdn.net/eson_15</p>
</blockquote>
<p>å› ä¸º INFO çº§åˆ«æ¯” DEBUG çº§åˆ«é«˜ï¼Œæ‰€ä»¥ debug è¿™æ¡æ²¡æœ‰æ‰“å°å‡ºæ¥ï¼Œå¦‚æœå°† logback.xml ä¸­çš„æ—¥å¿—çº§åˆ«è®¾ç½®æˆ DEBUGï¼Œé‚£ä¹ˆå››æ¡è¯­å¥éƒ½ä¼šæ‰“å°å‡ºæ¥ï¼Œè¿™ä¸ªå¤§å®¶è‡ªå·±å»æµ‹è¯•äº†ã€‚åŒæ—¶å¯ä»¥æ‰“å¼€ D:\logs\course03\ ç›®å½•ï¼Œé‡Œé¢æœ‰åˆšåˆšé¡¹ç›®å¯åŠ¨ï¼Œä»¥ååé¢ç”Ÿæˆçš„æ‰€æœ‰æ—¥å¿—è®°å½•ã€‚åœ¨é¡¹ç›®éƒ¨ç½²åï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†éƒ½æ˜¯é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æ¥å®šä½é—®é¢˜ã€‚</p>
<h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾ä¸»è¦å¯¹ slf4j åšäº†ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œå¹¶ä¸”å¯¹ Spring Boot ä¸­å¦‚ä½•ä½¿ç”¨ slf4j è¾“å‡ºæ—¥å¿—åšäº†è¯¦ç»†çš„è¯´æ˜ï¼Œç€é‡åˆ†æäº† <code>logback.xml</code> æ–‡ä»¶ä¸­å¯¹æ—¥å¿—ç›¸å…³ä¿¡æ¯çš„é…ç½®ï¼ŒåŒ…æ‹¬æ—¥å¿—çš„ä¸åŒçº§åˆ«ã€‚æœ€åé’ˆå¯¹è¿™äº›é…ç½®ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨ Logger æ‰“å°å‡ºä¸€äº›è¿›è¡Œæµ‹è¯•ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™äº›æ—¥å¿—éƒ½æ˜¯æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹ä¸­éå¸¸é‡è¦çš„èµ„æ–™ã€‚<br>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬04è¯¾ï¼šSpring-Bootä¸­çš„é¡¹ç›®å±æ€§é…ç½®"><a href="#ç¬¬04è¯¾ï¼šSpring-Bootä¸­çš„é¡¹ç›®å±æ€§é…ç½®" class="headerlink" title="ç¬¬04è¯¾ï¼šSpring Bootä¸­çš„é¡¹ç›®å±æ€§é…ç½®"></a>ç¬¬04è¯¾ï¼šSpring Bootä¸­çš„é¡¹ç›®å±æ€§é…ç½®</h1><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦ç”¨åˆ°ä¸€äº›é…ç½®çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½åœ¨æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸‹ä¼šæœ‰ä¸åŒçš„é…ç½®ï¼Œåé¢æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µæœ‰å¯èƒ½è¿˜ä¼šåšä¿®æ”¹ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸èƒ½å°†è¿™äº›é…ç½®åœ¨ä»£ç ä¸­å†™æ­»ï¼Œæœ€å¥½å°±æ˜¯å†™åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚æ¯”å¦‚å¯ä»¥æŠŠè¿™äº›ä¿¡æ¯å†™åˆ° <code>application.yml</code> æ–‡ä»¶ä¸­ã€‚   </p>
<h2 id="1-å°‘é‡é…ç½®ä¿¡æ¯çš„æƒ…å½¢"><a href="#1-å°‘é‡é…ç½®ä¿¡æ¯çš„æƒ…å½¢" class="headerlink" title="1. å°‘é‡é…ç½®ä¿¡æ¯çš„æƒ…å½¢"></a>1. å°‘é‡é…ç½®ä¿¡æ¯çš„æƒ…å½¢</h2><p>ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯æŸä¸ªæœåŠ¡éœ€è¦è°ƒç”¨å…¶ä»–æœåŠ¡æ¥è·å–å…¶æä¾›çš„ç›¸å…³ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨è¯¥æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­éœ€è¦é…ç½®è¢«è°ƒç”¨çš„æœåŠ¡åœ°å€ï¼Œæ¯”å¦‚åœ¨å½“å‰æœåŠ¡é‡Œï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨è®¢å•å¾®æœåŠ¡è·å–è®¢å•ç›¸å…³çš„ä¿¡æ¯ï¼Œå‡è®¾ è®¢å•æœåŠ¡çš„ç«¯å£å·æ˜¯ 8002ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8001</span><br><span class="line"></span><br><span class="line"># é…ç½®å¾®æœåŠ¡çš„åœ°å€</span><br><span class="line">url:</span><br><span class="line">  # è®¢å•å¾®æœåŠ¡çš„åœ°å€</span><br><span class="line">  orderUrl: http://localhost:8002</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ä¸šåŠ¡ä»£ç ä¸­å¦‚ä½•è·å–åˆ°è¿™ä¸ªé…ç½®çš„è®¢å•æœåŠ¡åœ°å€å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@Value</code> æ³¨è§£æ¥è§£å†³ã€‚åœ¨å¯¹åº”çš„ç±»ä¸­åŠ ä¸Šä¸€ä¸ªå±æ€§ï¼Œåœ¨å±æ€§ä¸Šä½¿ç”¨ <code>@Value</code> æ³¨è§£å³å¯è·å–åˆ°é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(ConfigController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;url.orderUrl&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String orderUrl;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/config"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LOGGER.info(<span class="string">"=====è·å–çš„è®¢å•æœåŠ¡åœ°å€ä¸ºï¼š&#123;&#125;"</span>, orderUrl);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Value</code> æ³¨è§£ä¸Šé€šè¿‡ <code>${key}</code> å³å¯è·å–é…ç½®æ–‡ä»¶ä¸­å’Œ key å¯¹åº”çš„ value å€¼ã€‚æˆ‘ä»¬å¯åŠ¨ä¸€ä¸‹é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/test/config</code> è¯·æ±‚æœåŠ¡åï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¼šæ‰“å°å‡ºè®¢å•æœåŠ¡çš„åœ°å€ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;è·å–çš„è®¢å•æœåŠ¡åœ°å€ä¸ºï¼šhttp:&#x2F;&#x2F;localhost:8002</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜æˆ‘ä»¬æˆåŠŸè·å–åˆ°äº†é…ç½®æ–‡ä»¶ä¸­çš„è®¢å•å¾®æœåŠ¡åœ°å€ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä¹Ÿæ˜¯è¿™ä¹ˆç”¨çš„ï¼Œåé¢å¦‚æœå› ä¸ºæœåŠ¡å™¨éƒ¨ç½²çš„åŸå› ï¼Œéœ€è¦ä¿®æ”¹æŸä¸ªæœåŠ¡çš„åœ°å€ï¼Œé‚£ä¹ˆåªè¦åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å³å¯ã€‚  </p>
<h2 id="2-å¤šä¸ªé…ç½®ä¿¡æ¯çš„æƒ…å½¢"><a href="#2-å¤šä¸ªé…ç½®ä¿¡æ¯çš„æƒ…å½¢" class="headerlink" title="2. å¤šä¸ªé…ç½®ä¿¡æ¯çš„æƒ…å½¢"></a>2. å¤šä¸ªé…ç½®ä¿¡æ¯çš„æƒ…å½¢</h2><p>è¿™é‡Œå†å¼•ç”³ä¸€ä¸ªé—®é¢˜ï¼Œéšç€ä¸šåŠ¡å¤æ‚åº¦çš„å¢åŠ ï¼Œä¸€ä¸ªé¡¹ç›®ä¸­å¯èƒ½ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„å¾®æœåŠ¡ï¼ŒæŸä¸ªæ¨¡å—å¯èƒ½éœ€è¦è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡è·å–ä¸åŒçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¤šä¸ªå¾®æœåŠ¡çš„åœ°å€ã€‚å¯æ˜¯ï¼Œåœ¨éœ€è¦è°ƒç”¨è¿™äº›å¾®æœåŠ¡çš„ä»£ç ä¸­ï¼Œå¦‚æœè¿™æ ·ä¸€ä¸ªä¸ªå»ä½¿ç”¨ <code>@Value</code> æ³¨è§£å¼•å…¥ç›¸åº”çš„å¾®æœåŠ¡åœ°å€çš„è¯ï¼Œå¤ªè¿‡äºç¹çï¼Œä¹Ÿä¸ç§‘å­¦ã€‚</p>
<p>æ‰€ä»¥ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸šåŠ¡ç¹çï¼Œé€»è¾‘å¤æ‚çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è€ƒè™‘å°è£…ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®ç±»ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚åœ¨å½“å‰æœåŠ¡ä¸­ï¼ŒæŸä¸ªä¸šåŠ¡éœ€è¦åŒæ—¶è°ƒç”¨è®¢å•å¾®æœåŠ¡ã€ç”¨æˆ·å¾®æœåŠ¡å’Œè´­ç‰©è½¦å¾®æœåŠ¡ï¼Œåˆ†åˆ«è·å–è®¢å•ã€ç”¨æˆ·å’Œè´­ç‰©è½¦ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå¯¹è¿™äº›ä¿¡æ¯åšä¸€å®šçš„é€»è¾‘å¤„ç†ã€‚é‚£ä¹ˆåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›å¾®æœåŠ¡çš„åœ°å€éƒ½é…ç½®å¥½ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># é…ç½®å¤šä¸ªå¾®æœåŠ¡çš„åœ°å€</span><br><span class="line">url:</span><br><span class="line">  # è®¢å•å¾®æœåŠ¡çš„åœ°å€</span><br><span class="line">  orderUrl: http://localhost:8002</span><br><span class="line">  # ç”¨æˆ·å¾®æœåŠ¡çš„åœ°å€</span><br><span class="line">  userUrl: http://localhost:8003</span><br><span class="line">  # è´­ç‰©è½¦å¾®æœåŠ¡çš„åœ°å€</span><br><span class="line">  shoppingUrl: http://localhost:8004</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿè®¸å®é™…ä¸šåŠ¡ä¸­ï¼Œè¿œè¿œä¸æ­¢è¿™ä¸‰ä¸ªå¾®æœåŠ¡ï¼Œç”šè‡³åå‡ ä¸ªéƒ½æœ‰å¯èƒ½ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ª <code>MicroServiceUrl</code> ç±»æ¥ä¸“é—¨ä¿å­˜å¾®æœåŠ¡çš„ urlï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"url"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MicroServiceUrl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String orderUrl;</span><br><span class="line">    <span class="keyword">private</span> String userUrl;</span><br><span class="line">    <span class="keyword">private</span> String shoppingUrl;</span><br><span class="line">    <span class="comment">// çœå»getå’Œsetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»†å¿ƒçš„æœ‹å‹åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£å¹¶ä¸”ä½¿ç”¨ prefix æ¥æŒ‡å®šä¸€ä¸ªå‰ç¼€ï¼Œç„¶åè¯¥ç±»ä¸­çš„å±æ€§åå°±æ˜¯é…ç½®ä¸­å»æ‰å‰ç¼€åçš„åå­—ï¼Œä¸€ä¸€å¯¹åº”å³å¯ã€‚å³ï¼šå‰ç¼€å + å±æ€§åå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ keyã€‚åŒæ—¶ï¼Œè¯¥ç±»ä¸Šé¢éœ€è¦åŠ ä¸Š <code>@Component</code> æ³¨è§£ï¼ŒæŠŠè¯¥ç±»ä½œä¸ºç»„ä»¶æ”¾åˆ°Springå®¹å™¨ä¸­ï¼Œè®© Spring å»ç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ç›´æ¥æ³¨å…¥å³å¯ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£éœ€è¦å¯¼å…¥å®ƒçš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>OKï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°†é…ç½®å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥å†™ä¸ª Controller æ¥æµ‹è¯•ä¸€ä¸‹ã€‚æ­¤æ—¶ï¼Œä¸éœ€è¦åœ¨ä»£ç ä¸­ä¸€ä¸ªä¸ªå¼•å…¥è¿™äº›å¾®æœåŠ¡çš„ url äº†ï¼Œç›´æ¥é€šè¿‡ <code>@Resource</code> æ³¨è§£å°†åˆšåˆšå†™å¥½é…ç½®ç±»æ³¨å…¥è¿›æ¥å³å¯ä½¿ç”¨äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(TestController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MicroServiceUrl microServiceUrl;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/config"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LOGGER.info(<span class="string">"=====è·å–çš„è®¢å•æœåŠ¡åœ°å€ä¸ºï¼š&#123;&#125;"</span>, microServiceUrl.getOrderUrl());</span><br><span class="line">        LOGGER.info(<span class="string">"=====è·å–çš„ç”¨æˆ·æœåŠ¡åœ°å€ä¸ºï¼š&#123;&#125;"</span>, microServiceUrl.getUserUrl());</span><br><span class="line">        LOGGER.info(<span class="string">"=====è·å–çš„è´­ç‰©è½¦æœåŠ¡åœ°å€ä¸ºï¼š&#123;&#125;"</span>, microServiceUrl.getShoppingUrl());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡å¯åŠ¨é¡¹ç›®ï¼Œè¯·æ±‚ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œæ§åˆ¶å°æ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼Œè¯´æ˜é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŒæ—¶æ­£ç¡®è·å–é…ç½®æ–‡ä»¶å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;è·å–çš„è®¢å•æœåŠ¡åœ°å€ä¸ºï¼šhttp:&#x2F;&#x2F;localhost:8002</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;è·å–çš„è®¢å•æœåŠ¡åœ°å€ä¸ºï¼šhttp:&#x2F;&#x2F;localhost:8002</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;è·å–çš„ç”¨æˆ·æœåŠ¡åœ°å€ä¸ºï¼šhttp:&#x2F;&#x2F;localhost:8003</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;è·å–çš„è´­ç‰©è½¦æœåŠ¡åœ°å€ä¸ºï¼šhttp:&#x2F;&#x2F;localhost:8004</span><br></pre></td></tr></table></figure>

<h2 id="3-æŒ‡å®šé¡¹ç›®é…ç½®æ–‡ä»¶"><a href="#3-æŒ‡å®šé¡¹ç›®é…ç½®æ–‡ä»¶" class="headerlink" title="3. æŒ‡å®šé¡¹ç›®é…ç½®æ–‡ä»¶"></a>3. æŒ‡å®šé¡¹ç›®é…ç½®æ–‡ä»¶</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªç¯å¢ƒï¼šå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚å¼€å‘ç¯å¢ƒä¸­çš„é…ç½®å’Œç”Ÿäº§ç¯å¢ƒä¸­çš„é…ç½®å¾€å¾€ä¸åŒï¼Œæ¯”å¦‚ï¼šç¯å¢ƒã€ç«¯å£ã€æ•°æ®åº“ã€ç›¸å…³åœ°å€ç­‰ç­‰ã€‚æˆ‘ä»¬ä¸å¯èƒ½åœ¨å¼€å‘ç¯å¢ƒè°ƒè¯•å¥½ä¹‹åï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒåï¼Œåˆè¦å°†é…ç½®ä¿¡æ¯å…¨éƒ¨ä¿®æ”¹æˆç”Ÿäº§ç¯å¢ƒä¸Šçš„é…ç½®ï¼Œè¿™æ ·å¤ªéº»çƒ¦ï¼Œä¹Ÿä¸ç§‘å­¦ã€‚</p>
<p>æœ€å¥½çš„è§£å†³æ–¹æ³•å°±æ˜¯å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéƒ½æœ‰ä¸€å¥—å¯¹ç”¨çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åå½“æˆ‘ä»¬åœ¨å¼€å‘æ—¶ï¼ŒæŒ‡å®šè¯»å–å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼Œå½“æˆ‘ä»¬å°†é¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šä¹‹åï¼Œå†æŒ‡å®šå»è¯»å–ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š <code>application-dev.yml</code> å’Œ <code>application-pro.yml</code>ï¼Œåˆ†åˆ«ç”¨æ¥å¯¹å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒè¿›è¡Œç›¸å…³é…ç½®ã€‚è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªè®¿é—®ç«¯å£å·ï¼Œå¼€å‘ç¯å¢ƒç”¨ 8001ï¼Œç”Ÿäº§ç¯å¢ƒç”¨ 8002.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶</span><br><span class="line">server:</span><br><span class="line">  port: 8001</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶</span><br><span class="line">server:</span><br><span class="line">  port: 8002</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ <code>application.yml</code> æ–‡ä»¶ä¸­æŒ‡å®šè¯»å–å“ªä¸ªé…ç½®æ–‡ä»¶å³å¯ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼ŒæŒ‡å®šè¯»å– <code>applicationn-dev.yml</code> æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active:</span><br><span class="line">    - dev</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥åœ¨å¼€å‘çš„æ—¶å€™ï¼ŒæŒ‡å®šè¯»å–  <code>application-dev.yml</code> æ–‡ä»¶ï¼Œè®¿é—®çš„æ—¶å€™ä½¿ç”¨ 8001 ç«¯å£ï¼Œéƒ¨ç½²åˆ°æœåŠ¡å™¨åï¼Œåªéœ€è¦å°† <code>application.yml</code> ä¸­æŒ‡å®šçš„æ–‡ä»¶æ”¹æˆ <code>application-pro.yml</code> å³å¯ï¼Œç„¶åä½¿ç”¨ 8002 ç«¯å£è®¿é—®ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<h2 id="4-æ€»ç»“-2"><a href="#4-æ€»ç»“-2" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾ä¸»è¦è®²è§£äº† Spring Boot ä¸­å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­è¯»å–ç›¸å…³é…ç½®ï¼ŒåŒ…æ‹¬å•ä¸€é…ç½®å’Œå¤šä¸ªé…ç½®é¡¹ï¼Œåœ¨å¾®æœåŠ¡ä¸­ï¼Œè¿™ç§æƒ…å†µéå¸¸å¸¸è§ï¼Œå¾€å¾€ä¼šæœ‰å¾ˆå¤šå…¶ä»–å¾®æœåŠ¡éœ€è¦è°ƒç”¨ï¼Œæ‰€ä»¥å°è£…ä¸€ä¸ªé…ç½®ç±»æ¥æ¥æ”¶è¿™äº›é…ç½®æ˜¯ä¸ªå¾ˆå¥½çš„å¤„ç†æ–¹å¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¾‹å¦‚æ•°æ®åº“ç›¸å…³çš„è¿æ¥å‚æ•°ç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°ä¸€ä¸ªé…ç½®ç±»ä¸­ï¼Œå…¶ä»–é‡åˆ°ç±»ä¼¼çš„åœºæ™¯ï¼Œéƒ½å¯ä»¥è¿™ä¹ˆå¤„ç†ã€‚æœ€åä»‹ç»äº†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®çš„å¿«é€Ÿåˆ‡æ¢æ–¹å¼ï¼Œçœå»äº†é¡¹ç›®éƒ¨ç½²æ—¶ï¼Œè¯¸å¤šé…ç½®ä¿¡æ¯çš„ä¿®æ”¹ã€‚<br>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬05è¯¾ï¼šSpring-Bootä¸­çš„MVCæ”¯æŒ"><a href="#ç¬¬05è¯¾ï¼šSpring-Bootä¸­çš„MVCæ”¯æŒ" class="headerlink" title="ç¬¬05è¯¾ï¼šSpring Bootä¸­çš„MVCæ”¯æŒ"></a>ç¬¬05è¯¾ï¼šSpring Bootä¸­çš„MVCæ”¯æŒ</h1><p>Spring Boot çš„ MVC æ”¯æŒä¸»è¦æ¥ä»‹ç»å®é™…é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£ï¼ŒåŒ…æ‹¬ <code>@RestController</code>ã€ <code>@RequestMapping</code>ã€<code>@PathVariable</code>ã€<code>@RequestParam</code> ä»¥åŠ <code>@RequestBody</code>ã€‚ä¸»è¦ä»‹ç»è¿™å‡ ä¸ªæ³¨è§£å¸¸ç”¨çš„ä½¿ç”¨æ–¹å¼å’Œç‰¹ç‚¹ã€‚  </p>
<h2 id="1-RestController"><a href="#1-RestController" class="headerlink" title="1. @RestController"></a>1. @RestController</h2><p><code>@RestController</code> æ˜¯ Spring Boot æ–°å¢çš„ä¸€ä¸ªæ³¨è§£ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¯¥æ³¨è§£éƒ½åŒ…å«äº†å“ªäº›ä¸œè¥¿ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RestController &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œ <code>@RestController</code> æ³¨è§£åŒ…å«äº†åŸæ¥çš„ <code>@Controller</code> å’Œ <code>@ResponseBody</code> æ³¨è§£ï¼Œä½¿ç”¨è¿‡ Spring çš„æœ‹å‹å¯¹ <code>@Controller</code> æ³¨è§£å·²ç»éå¸¸äº†è§£äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œ <code>@ResponseBody</code> æ³¨è§£æ˜¯å°†è¿”å›çš„æ•°æ®ç»“æ„è½¬æ¢ä¸º Json æ ¼å¼ã€‚æ‰€ä»¥ <code>@RestController</code> å¯ä»¥çœ‹ä½œæ˜¯ <code>@Controller</code> å’Œ <code>@ResponseBody</code> çš„ç»“åˆä½“ï¼Œç›¸å½“äºå·ä¸ªæ‡’ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@RestController</code> ä¹‹åå°±ä¸ç”¨å†ä½¿ç”¨ <code>@Controller</code> äº†ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæ˜¯å‰åç«¯åˆ†ç¦»ï¼Œä¸ç”¨æ¨¡æ¿æ¸²æŸ“çš„è¯ï¼Œæ¯”å¦‚ Thymeleafï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨<code>@RestController</code> å°†æ•°æ®ä»¥ json æ ¼å¼ä¼ ç»™å‰ç«¯ï¼Œå‰ç«¯æ‹¿åˆ°ä¹‹åè§£æï¼›ä½†å¦‚æœä¸æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œéœ€è¦ä½¿ç”¨æ¨¡æ¿æ¥æ¸²æŸ“çš„è¯ï¼Œä¸€èˆ¬ Controller ä¸­éƒ½ä¼šè¿”å›åˆ°å…·ä½“çš„é¡µé¢ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¸èƒ½ä½¿ç”¨<code>@RestController</code>äº†ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"user"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®æ˜¯éœ€è¦è¿”å›åˆ° user.html é¡µé¢çš„ï¼Œå¦‚æœä½¿ç”¨ <code>@RestController</code> çš„è¯ï¼Œä¼šå°† user ä½œä¸ºå­—ç¬¦ä¸²è¿”å›çš„ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>@Controller</code> æ³¨è§£ã€‚è¿™åœ¨ä¸‹ä¸€èŠ‚ Spring Boot é›†æˆ Thymeleaf æ¨¡æ¿å¼•æ“ä¸­ä¼šå†è¯´æ˜ã€‚</p>
<h2 id="2-RequestMapping"><a href="#2-RequestMapping" class="headerlink" title="2. @RequestMapping"></a>2. @RequestMapping</h2><p><code>@RequestMapping</code> æ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå®ƒå¯ä»¥ç”¨äºç±»ä¸Šï¼Œä¹Ÿå¯ä»¥ç”¨äºæ–¹æ³•ä¸Šã€‚åœ¨ç±»çš„çº§åˆ«ä¸Šçš„æ³¨è§£ä¼šå°†ä¸€ä¸ªç‰¹å®šè¯·æ±‚æˆ–è€…è¯·æ±‚æ¨¡å¼æ˜ å°„åˆ°ä¸€ä¸ªæ§åˆ¶å™¨ä¹‹ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ï¼›åœ¨æ–¹æ³•çš„çº§åˆ«è¡¨ç¤ºè¿›ä¸€æ­¥æŒ‡å®šåˆ°å¤„ç†æ–¹æ³•çš„æ˜ å°„å…³ç³»ã€‚</p>
<p>è¯¥æ³¨è§£æœ‰6ä¸ªå±æ€§ï¼Œä¸€èˆ¬åœ¨é¡¹ç›®ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€method å’Œ producesã€‚</p>
<ul>
<li>value å±æ€§ï¼šæŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼Œvalue å¯ä»¥çœç•¥ä¸å†™</li>
<li>method å±æ€§ï¼šæŒ‡å®šè¯·æ±‚çš„ç±»å‹ï¼Œä¸»è¦æœ‰ GETã€PUTã€POSTã€DELETEï¼Œé»˜è®¤ä¸º GET</li>
<li>produceså±æ€§ï¼šæŒ‡å®šè¿”å›å†…å®¹ç±»å‹ï¼Œå¦‚ produces = â€œapplication/json; charset=UTF-8â€</li>
</ul>
<p><code>@RequestMapping</code> æ³¨è§£æ¯”è¾ƒç®€å•ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/test"</span>, produces = <span class="string">"application/json; charset=UTF-8"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/get"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå¾ˆç®€å•ï¼Œå¯åŠ¨é¡¹ç›®åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/test/get</code> æµ‹è¯•ä¸€ä¸‹å³å¯ã€‚</p>
<p>é’ˆå¯¹å››ç§ä¸åŒçš„è¯·æ±‚æ–¹å¼ï¼Œæ˜¯æœ‰ç›¸åº”æ³¨è§£çš„ï¼Œä¸ç”¨æ¯æ¬¡åœ¨ <code>@RequestMapping</code> æ³¨è§£ä¸­åŠ  method å±æ€§æ¥æŒ‡å®šï¼Œä¸Šé¢çš„ GET æ–¹å¼è¯·æ±‚å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>@GetMapping(&quot;/get&quot;)</code> æ³¨è§£ï¼Œæ•ˆæœä¸€æ ·ã€‚ç›¸åº”åœ°ï¼ŒPUT æ–¹å¼ã€POST æ–¹å¼å’Œ DELETE æ–¹å¼å¯¹åº”çš„æ³¨è§£åˆ†åˆ«ä¸º <code>@PutMapping</code>ã€<code>@PostMapping</code> å’Œ <code>DeleteMapping</code>ã€‚</p>
<h2 id="3-PathVariable"><a href="#3-PathVariable" class="headerlink" title="3. @PathVariable"></a>3. @PathVariable</h2><p><code>@PathVariable</code> æ³¨è§£ä¸»è¦æ˜¯ç”¨æ¥è·å– url å‚æ•°ï¼ŒSpring Boot æ”¯æŒ restfull é£æ ¼çš„ urlï¼Œæ¯”å¦‚ä¸€ä¸ª GET è¯·æ±‚æºå¸¦ä¸€ä¸ªå‚æ•° id è¿‡æ¥ï¼Œæˆ‘ä»¬å°† id ä½œä¸ºå‚æ•°æ¥æ”¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>@PathVariable</code> æ³¨è§£ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/user/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testPathVariable</span><span class="params">(@PathVariable Integer id)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"è·å–åˆ°çš„idä¸ºï¼š"</span> + id);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæƒ³è¦ url ä¸­å ä½ç¬¦ä¸­çš„ id å€¼ç›´æ¥èµ‹å€¼åˆ°å‚æ•° id ä¸­ï¼Œéœ€è¦ä¿è¯ url ä¸­çš„å‚æ•°å’Œæ–¹æ³•æ¥æ”¶å‚æ•°ä¸€è‡´ï¼Œå¦åˆ™å°±æ— æ³•æ¥æ”¶ã€‚å¦‚æœä¸ä¸€è‡´çš„è¯ï¼Œå…¶å®ä¹Ÿå¯ä»¥è§£å†³ï¼Œéœ€è¦ç”¨ <code>@PathVariable</code> ä¸­çš„ value å±æ€§æ¥æŒ‡å®šå¯¹åº”å…³ç³»ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user/&#123;idd&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testPathVariable</span><span class="params">(@PathVariable(value = <span class="string">"idd"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"è·å–åˆ°çš„idä¸ºï¼š"</span> + id);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºè®¿é—®çš„ urlï¼Œå ä½ç¬¦çš„ä½ç½®å¯ä»¥åœ¨ä»»ä½•ä½ç½®ï¼Œä¸ä¸€å®šéè¦åœ¨æœ€åï¼Œæ¯”å¦‚è¿™æ ·ä¹Ÿè¡Œï¼š<code>/xxx/{id}/user</code>ã€‚å¦å¤–ï¼Œurl ä¹Ÿæ”¯æŒå¤šä¸ªå ä½ç¬¦ï¼Œæ–¹æ³•å‚æ•°ä½¿ç”¨åŒæ ·æ•°é‡çš„å‚æ•°æ¥æ¥æ”¶ï¼ŒåŸç†å’Œä¸€ä¸ªå‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/user/&#123;idd&#125;/&#123;name&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testPathVariable</span><span class="params">(@PathVariable(value = <span class="string">"idd"</span>)</span> Integer id, @PathVariable String name) </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è·å–åˆ°çš„idä¸ºï¼š"</span> + id);</span><br><span class="line">        System.out.println(<span class="string">"è·å–åˆ°çš„nameä¸ºï¼š"</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œé¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ <code>localhost:8080/test/user/2/zhangsan</code> å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è·å–åˆ°çš„idä¸ºï¼š2</span><br><span class="line">è·å–åˆ°çš„nameä¸ºï¼šzhangsan</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥æ”¯æŒå¤šä¸ªå‚æ•°çš„æ¥æ”¶ã€‚åŒæ ·åœ°ï¼Œå¦‚æœ url ä¸­çš„å‚æ•°å’Œæ–¹æ³•ä¸­çš„å‚æ•°åç§°ä¸åŒçš„è¯ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ value å±æ€§æ¥ç»‘å®šä¸¤ä¸ªå‚æ•°ã€‚</p>
<h2 id="4-RequestParam"><a href="#4-RequestParam" class="headerlink" title="4. @RequestParam"></a>4. @RequestParam</h2><p><code>@RequestParam</code> æ³¨è§£é¡¾åæ€ä¹‰ï¼Œä¹Ÿæ˜¯è·å–è¯·æ±‚å‚æ•°çš„ï¼Œä¸Šé¢æˆ‘ä»¬ä»‹ç»äº† <code>@PathValiable</code> æ³¨è§£ä¹Ÿæ˜¯è·å–è¯·æ±‚å‚æ•°çš„ï¼Œé‚£ä¹ˆ <code>@RequestParam</code> å’Œ <code>@PathVariable</code> æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿä¸»è¦åŒºåˆ«åœ¨äºï¼š <code>@PathValiable</code> æ˜¯ä» url æ¨¡æ¿ä¸­è·å–å‚æ•°å€¼ï¼Œ å³è¿™ç§é£æ ¼çš„ urlï¼š<code>http://localhost:8080/user/{id}</code> ï¼›è€Œ <code>@RequestParam</code> æ˜¯ä» request é‡Œé¢è·å–å‚æ•°å€¼ï¼Œå³è¿™ç§é£æ ¼çš„ urlï¼š<code>http://localhost:8080/user?id=1</code>  ã€‚æˆ‘ä»¬ä½¿ç”¨è¯¥ url å¸¦ä¸Šå‚æ•° id æ¥æµ‹è¯•ä¸€ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestParam</span><span class="params">(@RequestParam Integer id)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"è·å–åˆ°çš„idä¸ºï¼š"</span> + id);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æ­£å¸¸ä»æ§åˆ¶å°æ‰“å°å‡º id ä¿¡æ¯ã€‚åŒæ ·åœ°ï¼Œurl ä¸Šé¢çš„å‚æ•°å’Œæ–¹æ³•çš„å‚æ•°éœ€è¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ value å±æ€§æ¥è¯´æ˜ï¼Œæ¯”å¦‚ url ä¸ºï¼š<code>http://localhost:8080/user?idd=1</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestParam</span><span class="params">(@RequestParam(value = <span class="string">"idd"</span>, required = <span class="keyword">false</span>)</span> Integer id) </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"è·å–åˆ°çš„idä¸ºï¼š"</span> + id);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™¤äº† value å±æ€§å¤–ï¼Œè¿˜æœ‰ä¸ªä¸¤ä¸ªå±æ€§æ¯”è¾ƒå¸¸ç”¨ï¼š</p>
<ul>
<li>required å±æ€§ï¼štrue è¡¨ç¤ºè¯¥å‚æ•°å¿…é¡»è¦ä¼ ï¼Œå¦åˆ™å°±ä¼šæŠ¥ 404 é”™è¯¯ï¼Œfalse è¡¨ç¤ºå¯æœ‰å¯æ— ã€‚</li>
<li>defaultValue å±æ€§ï¼šé»˜è®¤å€¼ï¼Œè¡¨ç¤ºå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰åŒåå‚æ•°æ—¶çš„é»˜è®¤å€¼ã€‚</li>
</ul>
<p>ä» url ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<code>@RequestParam</code> æ³¨è§£ç”¨äº GET è¯·æ±‚ä¸Šæ—¶ï¼Œæ¥æ”¶æ‹¼æ¥åœ¨ url ä¸­çš„å‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ³¨è§£è¿˜å¯ä»¥ç”¨äº POST è¯·æ±‚ï¼Œæ¥æ”¶å‰ç«¯è¡¨å•æäº¤çš„å‚æ•°ï¼Œå‡å¦‚å‰ç«¯é€šè¿‡è¡¨å•æäº¤ username å’Œ password ä¸¤ä¸ªå‚æ•°ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@RequestParam</code> æ¥æ¥æ”¶ï¼Œç”¨æ³•å’Œä¸Šé¢ä¸€æ ·ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/form1"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testForm</span><span class="params">(@RequestParam String username, @RequestParam String password)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è·å–åˆ°çš„usernameä¸ºï¼š"</span> + username);</span><br><span class="line">        System.out.println(<span class="string">"è·å–åˆ°çš„passwordä¸ºï¼š"</span> + password);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨ postman æ¥æ¨¡æ‹Ÿä¸€ä¸‹è¡¨å•æäº¤ï¼Œæµ‹è¯•ä¸€ä¸‹æ¥å£ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200215043749282.png" alt="ä½¿ç”¨postmanæµ‹è¯•è¡¨å•æäº¤"></p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœè¡¨å•æ•°æ®å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨åå°æ–¹æ³•ä¸­å†™ä¸Šå¾ˆå¤šå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°è¿˜è¦ <code>@RequestParam</code> æ³¨è§£ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªå®ä½“ç±»æ¥æ¥æ”¶è¿™äº›å‚æ•°ï¼Œå®ä½“ä¸­çš„å±æ€§åå’Œè¡¨å•ä¸­çš„å‚æ•°åä¸€è‡´å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="comment">// set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å®ä½“æ¥æ”¶çš„è¯ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨å‰é¢åŠ  <code>@RequestParam</code> æ³¨è§£äº†ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/form2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testForm</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è·å–åˆ°çš„usernameä¸ºï¼š"</span> + user.getUsername());</span><br><span class="line">        System.out.println(<span class="string">"è·å–åˆ°çš„passwordä¸ºï¼š"</span> + user.getPassword());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ postman å†æ¬¡æµ‹è¯•ä¸€ä¸‹è¡¨å•æäº¤ï¼Œè§‚å¯Ÿä¸€ä¸‹è¿”å›å€¼å’Œæ§åˆ¶å°æ‰“å°å‡ºçš„æ—¥å¿—å³å¯ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯å°è£…ä¸€ä¸ªå®ä½“ç±»æ¥æ¥æ”¶è¡¨å•æ•°æ®ï¼Œå› ä¸ºå®é™…é¡¹ç›®ä¸­è¡¨å•æ•°æ®ä¸€èˆ¬éƒ½å¾ˆå¤šã€‚</p>
<h2 id="5-RequestBody"><a href="#5-RequestBody" class="headerlink" title="5. @RequestBody"></a>5. @RequestBody</h2><p><code>@RequestBody</code> æ³¨è§£ç”¨äºæ¥æ”¶å‰ç«¯ä¼ æ¥çš„å®ä½“ï¼Œæ¥æ”¶å‚æ•°ä¹Ÿæ˜¯å¯¹åº”çš„å®ä½“ï¼Œæ¯”å¦‚å‰ç«¯é€šè¿‡ json æäº¤ä¼ æ¥ä¸¤ä¸ªå‚æ•° username å’Œ passwordï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨åç«¯å°è£…ä¸€ä¸ªå®ä½“æ¥æ¥æ”¶ã€‚åœ¨ä¼ é€’çš„å‚æ•°æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>@RequestBody</code> æ¥æ”¶ä¼šéå¸¸æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="comment">// set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestBody</span><span class="params">(@RequestBody User user)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"è·å–åˆ°çš„usernameä¸ºï¼š"</span> + user.getUsername());</span><br><span class="line">	System.out.println(<span class="string">"è·å–åˆ°çš„passwordä¸ºï¼š"</span> + user.getPassword());</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨ postman å·¥å…·æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼Œæ‰“å¼€ postmanï¼Œç„¶åè¾“å…¥è¯·æ±‚åœ°å€å’Œå‚æ•°ï¼Œå‚æ•°æˆ‘ä»¬ç”¨ json æ¥æ¨¡æ‹Ÿï¼Œå¦‚ä¸‹å›¾æ‰€æœ‰ï¼Œè°ƒç”¨ä¹‹åè¿”å› successã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200215043853532.png" alt="ä½¿ç”¨Postmanæµ‹è¯•requestBody"></p>
<p>åŒæ—¶çœ‹ä¸€ä¸‹åå°æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è·å–åˆ°çš„usernameä¸ºï¼šå€ªå‡æ­¦</span><br><span class="line">è·å–åˆ°çš„passwordä¸ºï¼š123456</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œ<code>@RequestBody</code> æ³¨è§£ç”¨äº POST è¯·æ±‚ä¸Šï¼Œæ¥æ”¶ json å®ä½“å‚æ•°ã€‚å®ƒå’Œä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„è¡¨å•æäº¤æœ‰ç‚¹ç±»ä¼¼ï¼Œåªä¸è¿‡å‚æ•°çš„æ ¼å¼ä¸åŒï¼Œä¸€ä¸ªæ˜¯ json å®ä½“ï¼Œä¸€ä¸ªæ˜¯è¡¨å•æäº¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ³¨è§£å³å¯ã€‚</p>
<h2 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾ä¸»è¦è®²è§£äº† Spring Boot ä¸­å¯¹ MVC çš„æ”¯æŒï¼Œåˆ†æäº† <code>@RestController</code>ã€ <code>@RequestMapping</code>ã€<code>@PathVariable</code>ã€ <code>@RequestParam</code> å’Œ <code>@RequestBody</code> å››ä¸ªæ³¨è§£çš„ä½¿ç”¨æ–¹å¼ï¼Œç”±äº <code>@RestController</code> ä¸­é›†æˆäº† <code>@ResponseBody</code> æ‰€ä»¥å¯¹è¿”å› json çš„æ³¨è§£ä¸å†èµ˜è¿°ã€‚ä»¥ä¸Šå››ä¸ªæ³¨è§£æ˜¯ä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„æ³¨è§£ï¼Œåœ¨æ‰€æœ‰çš„å®é™…é¡¹ç›®ä¸­åŸºæœ¬éƒ½ä¼šé‡åˆ°ï¼Œè¦ç†Ÿç»ƒæŒæ¡ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬06è¯¾ï¼šSpring-Booté›†æˆ-Swagger2-å±•ç°åœ¨çº¿æ¥å£æ–‡æ¡£"><a href="#ç¬¬06è¯¾ï¼šSpring-Booté›†æˆ-Swagger2-å±•ç°åœ¨çº¿æ¥å£æ–‡æ¡£" class="headerlink" title="ç¬¬06è¯¾ï¼šSpring Booté›†æˆ Swagger2 å±•ç°åœ¨çº¿æ¥å£æ–‡æ¡£"></a>ç¬¬06è¯¾ï¼šSpring Booté›†æˆ Swagger2 å±•ç°åœ¨çº¿æ¥å£æ–‡æ¡£</h1><h2 id="1-Swagger-ç®€ä»‹"><a href="#1-Swagger-ç®€ä»‹" class="headerlink" title="1. Swagger ç®€ä»‹"></a>1. Swagger ç®€ä»‹</h2><h3 id="1-1-è§£å†³çš„é—®é¢˜"><a href="#1-1-è§£å†³çš„é—®é¢˜" class="headerlink" title="1.1 è§£å†³çš„é—®é¢˜"></a>1.1 è§£å†³çš„é—®é¢˜</h3><p>éšç€äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼Œç°åœ¨çš„ç½‘ç«™æ¶æ„åŸºæœ¬éƒ½ç”±åŸæ¥çš„åç«¯æ¸²æŸ“ï¼Œå˜æˆäº†å‰åç«¯åˆ†ç¦»çš„å½¢æ€ï¼Œè€Œä¸”å‰ç«¯æŠ€æœ¯å’Œåç«¯æŠ€æœ¯åœ¨å„è‡ªçš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œã€‚å‰ç«¯å’Œåç«¯çš„å”¯ä¸€è”ç³»ï¼Œå˜æˆäº† API æ¥å£ï¼Œæ‰€ä»¥ API æ–‡æ¡£å˜æˆäº†å‰åç«¯å¼€å‘äººå‘˜è”ç³»çš„çº½å¸¦ï¼Œå˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œéšç€ä»£ç çš„ä¸æ–­æ›´æ–°ï¼Œå¼€å‘äººå‘˜åœ¨å¼€å‘æ–°çš„æ¥å£æˆ–è€…æ›´æ–°æ—§çš„æ¥å£åï¼Œç”±äºå¼€å‘ä»»åŠ¡çš„ç¹é‡ï¼Œå¾€å¾€æ–‡æ¡£å¾ˆéš¾æŒç»­è·Ÿç€æ›´æ–°ï¼ŒSwagger å°±æ˜¯ç”¨æ¥è§£å†³è¯¥é—®é¢˜çš„ä¸€æ¬¾é‡è¦çš„å·¥å…·ï¼Œå¯¹ä½¿ç”¨æ¥å£çš„äººæ¥è¯´ï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦ç»™ä»–ä»¬æä¾›æ–‡æ¡£ï¼Œåªè¦å‘Šè¯‰ä»–ä»¬ä¸€ä¸ª Swagger åœ°å€ï¼Œå³å¯å±•ç¤ºåœ¨çº¿çš„ API æ¥å£æ–‡æ¡£ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè°ƒç”¨æ¥å£çš„äººå‘˜è¿˜å¯ä»¥åœ¨çº¿æµ‹è¯•æ¥å£æ•°æ®ï¼ŒåŒæ ·åœ°ï¼Œå¼€å‘äººå‘˜åœ¨å¼€å‘æ¥å£æ—¶ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥åˆ©ç”¨ Swagger åœ¨çº¿æ¥å£æ–‡æ¡£æµ‹è¯•æ¥å£æ•°æ®ï¼Œè¿™ç»™å¼€å‘äººå‘˜æä¾›äº†ä¾¿åˆ©ã€‚</p>
<h3 id="1-2-Swagger-å®˜æ–¹"><a href="#1-2-Swagger-å®˜æ–¹" class="headerlink" title="1.2 Swagger å®˜æ–¹"></a>1.2 Swagger å®˜æ–¹</h3><p>æˆ‘ä»¬æ‰“å¼€ <a href="https://swagger.io/" target="_blank" rel="noopener">Swagger å®˜ç½‘</a>ï¼Œå®˜æ–¹å¯¹ Swagger çš„å®šä¹‰ä¸ºï¼š</p>
<blockquote>
<p>The Best APIs are Built with Swagger Tools </p>
</blockquote>
<p>ç¿»è¯‘æˆä¸­æ–‡æ˜¯ï¼šâ€œæœ€å¥½çš„ API æ˜¯ä½¿ç”¨ Swagger å·¥å…·æ„å»ºçš„â€ã€‚ç”±æ­¤å¯è§ï¼ŒSwagger å®˜æ–¹å¯¹å…¶åŠŸèƒ½å’Œæ‰€å¤„çš„åœ°ä½éå¸¸è‡ªä¿¡ï¼Œç”±äºå…¶éå¸¸å¥½ç”¨ï¼Œæ‰€ä»¥å®˜æ–¹å¯¹å…¶å®šä½ä¹Ÿåˆæƒ…åˆç†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200215043936444.png" alt="å®˜æ–¹å¯¹swaggerçš„å®šä½"></p>
<p>æœ¬æ–‡ä¸»è¦è®²è§£åœ¨ Spring Boot ä¸­å¦‚ä½•å¯¼å…¥ Swagger2 å·¥å…·æ¥å±•ç°é¡¹ç›®ä¸­çš„æ¥å£æ–‡æ¡£ã€‚æœ¬èŠ‚è¯¾ä½¿ç”¨çš„ Swagger ç‰ˆæœ¬ä¸º 2.2.2ã€‚ä¸‹é¢å¼€å§‹è¿›å…¥ Swagger2 ä¹‹æ—…ã€‚</p>
<h2 id="2-Swagger2-çš„-maven-ä¾èµ–"><a href="#2-Swagger2-çš„-maven-ä¾èµ–" class="headerlink" title="2. Swagger2 çš„ maven ä¾èµ–"></a>2. Swagger2 çš„ maven ä¾èµ–</h2><p>ä½¿ç”¨ Swagger2 å·¥å…·ï¼Œå¿…é¡»è¦å¯¼å…¥ maven ä¾èµ–ï¼Œå½“å‰å®˜æ–¹æœ€é«˜ç‰ˆæœ¬æ˜¯ 2.8.0ï¼Œæˆ‘å°è¯•äº†ä¸€ä¸‹ï¼Œä¸ªäººæ„Ÿè§‰é¡µé¢å±•ç¤ºçš„æ•ˆæœä¸å¤ªå¥½ï¼Œè€Œä¸”ä¸å¤Ÿç´§å‡‘ï¼Œä¸åˆ©äºæ“ä½œã€‚å¦å¤–ï¼Œæœ€æ–°ç‰ˆæœ¬å¹¶ä¸ä¸€å®šæ˜¯æœ€ç¨³å®šç‰ˆæœ¬ï¼Œå½“å‰æˆ‘ä»¬å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ 2.2.2 ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ç¨³å®šï¼Œç•Œé¢å‹å¥½ï¼Œæ‰€ä»¥æœ¬èŠ‚è¯¾ä¸»è¦å›´ç»•ç€ 2.2.2 ç‰ˆæœ¬æ¥å±•å¼€ï¼Œä¾èµ–å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Swagger2-çš„é…ç½®"><a href="#3-Swagger2-çš„é…ç½®" class="headerlink" title="3. Swagger2 çš„é…ç½®"></a>3. Swagger2 çš„é…ç½®</h2><p>ä½¿ç”¨ Swagger2 éœ€è¦è¿›è¡Œé…ç½®ï¼ŒSpring Boot ä¸­å¯¹ Swagger2 çš„é…ç½®éå¸¸æ–¹ä¾¿ï¼Œæ–°å»ºä¸€ä¸ªé…ç½®ç±»ï¼ŒSwagger2 çš„é…ç½®ç±»ä¸Šé™¤äº†æ·»åŠ å¿…è¦çš„ <code>@Configuration</code> æ³¨è§£å¤–ï¼Œè¿˜éœ€è¦æ·»åŠ  <code>@EnableSwagger2</code> æ³¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                <span class="comment">// æŒ‡å®šæ„å»ºapiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯çš„æ–¹æ³•ï¼šapiInfo()</span></span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">// æŒ‡å®šè¦ç”Ÿæˆapiæ¥å£çš„åŒ…è·¯å¾„ï¼Œè¿™é‡ŒæŠŠcontrollerä½œä¸ºåŒ…è·¯å¾„ï¼Œç”Ÿæˆcontrollerä¸­çš„æ‰€æœ‰æ¥å£</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.itcodai.course06.controller"</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„å»ºapiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                <span class="comment">// è®¾ç½®é¡µé¢æ ‡é¢˜</span></span><br><span class="line">                .title(<span class="string">"Spring Booté›†æˆSwagger2æ¥å£æ€»è§ˆ"</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®æ¥å£æè¿°</span></span><br><span class="line">                .description(<span class="string">"è·Ÿæ­¦å“¥ä¸€èµ·å­¦Spring Bootç¬¬06è¯¾"</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®è”ç³»æ–¹å¼</span></span><br><span class="line">                .contact(<span class="string">"å€ªå‡æ­¦ï¼Œ"</span> + <span class="string">"CSDNï¼šhttp://blog.csdn.net/eson_15"</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®ç‰ˆæœ¬</span></span><br><span class="line">                .version(<span class="string">"1.0"</span>)</span><br><span class="line">                <span class="comment">// æ„å»º</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯¥é…ç½®ç±»ä¸­ï¼Œå·²ç»ä½¿ç”¨æ³¨é‡Šè¯¦ç»†è§£é‡Šäº†æ¯ä¸ªæ–¹æ³•çš„ä½œç”¨äº†ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»é…ç½®å¥½äº† Swagger2 äº†ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹é…ç½®æœ‰æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/swagger-ui.html</code>ï¼Œå³å¯çœ‹åˆ° swagger2 çš„æ¥å£é¡µé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯´æ˜Swagger2 é›†æˆæˆåŠŸã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200215044013383.png" alt="swagger2é¡µé¢"></p>
<p>ç»“åˆè¯¥å›¾ï¼Œå¯¹ç…§ä¸Šé¢çš„ Swagger2 é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ï¼Œå¯ä»¥å¾ˆæ˜ç¡®çš„çŸ¥é“é…ç½®ç±»ä¸­æ¯ä¸ªæ–¹æ³•çš„ä½œç”¨ã€‚è¿™æ ·å°±å¾ˆå®¹æ˜“ç†è§£å’ŒæŒæ¡ Swagger2 ä¸­çš„é…ç½®äº†ï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå…¶å® Swagger2 é…ç½®å¾ˆç®€å•ã€‚</p>
<p>ã€å‹æƒ…æç¤ºã€‘å¯èƒ½æœ‰å¾ˆå¤šæœ‹å‹åœ¨é…ç½® Swagger çš„æ—¶å€™ä¼šé‡åˆ°ä¸‹é¢çš„æƒ…å†µï¼Œè€Œä¸”è¿˜å…³ä¸æ‰çš„ï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨ç¼“å­˜å¼•èµ·çš„ï¼Œæ¸…ç©ºä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜å³å¯è§£å†³é—®é¢˜ã€‚</p>
<p><img src="http://p99jlm9k5.bkt.clouddn.com/blog/images/1/error.png" alt="é”™è¯¯é¡µé¢-å€ªå‡æ­¦çš„åšå®¢-å›¾2"></p>
<h2 id="4-Swagger2-çš„ä½¿ç”¨"><a href="#4-Swagger2-çš„ä½¿ç”¨" class="headerlink" title="4. Swagger2 çš„ä½¿ç”¨"></a>4. Swagger2 çš„ä½¿ç”¨</h2><p>ä¸Šé¢æˆ‘ä»¬å·²ç»é…ç½®å¥½äº† Swagger2ï¼Œå¹¶ä¸”ä¹Ÿå¯åŠ¨æµ‹è¯•äº†ä¸€ä¸‹ï¼ŒåŠŸèƒ½æ­£å¸¸ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹ä½¿ç”¨ Swagger2ï¼Œä¸»è¦æ¥ä»‹ç» Swagger2 ä¸­çš„å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£ï¼Œåˆ†åˆ«åœ¨å®ä½“ç±»ä¸Šã€ Controller ç±»ä¸Šä»¥åŠ Controller ä¸­çš„æ–¹æ³•ä¸Šï¼Œæœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹ Swagger2 æ˜¯å¦‚ä½•åœ¨é¡µé¢ä¸Šå‘ˆç°åœ¨çº¿æ¥å£æ–‡æ¡£çš„ï¼Œå¹¶ä¸”ç»“åˆ Controller ä¸­çš„æ–¹æ³•åœ¨æ¥å£ä¸­æµ‹è¯•ä¸€ä¸‹æ•°æ®ã€‚</p>
<h3 id="4-1-å®ä½“ç±»æ³¨è§£"><a href="#4-1-å®ä½“ç±»æ³¨è§£" class="headerlink" title="4.1 å®ä½“ç±»æ³¨è§£"></a>4.1 å®ä½“ç±»æ³¨è§£</h3><p>æœ¬èŠ‚æˆ‘ä»¬å»ºä¸€ä¸ª User å®ä½“ç±»ï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹ Swagger2 ä¸­çš„ <code>@ApiModel</code> å’Œ <code>@ApiModelProperty</code> æ³¨è§£ï¼ŒåŒæ—¶ä¸ºåé¢çš„æµ‹è¯•åšå‡†å¤‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModel</span>(value = <span class="string">"ç”¨æˆ·å®ä½“ç±»"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"ç”¨æˆ·å”¯ä¸€æ ‡è¯†"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"ç”¨æˆ·å§“å"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"ç”¨æˆ·å¯†ç "</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// çœç•¥setå’Œgetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§£é‡Šä¸‹ <code>@ApiModel</code> å’Œ <code>@ApiModelProperty</code> æ³¨è§£ï¼š</p>
<blockquote>
<p><code>@ApiModel</code> æ³¨è§£ç”¨äºå®ä½“ç±»ï¼Œè¡¨ç¤ºå¯¹ç±»è¿›è¡Œè¯´æ˜ï¼Œç”¨äºå‚æ•°ç”¨å®ä½“ç±»æ¥æ”¶ã€‚<br><code>@ApiModelProperty</code> æ³¨è§£ç”¨äºç±»ä¸­å±æ€§ï¼Œè¡¨ç¤ºå¯¹ model å±æ€§çš„è¯´æ˜æˆ–è€…æ•°æ®æ“ä½œæ›´æ”¹ã€‚</p>
</blockquote>
<p>è¯¥æ³¨è§£åœ¨åœ¨çº¿ API æ–‡æ¡£ä¸­çš„å…·ä½“æ•ˆæœåœ¨ä¸‹æ–‡è¯´æ˜ã€‚</p>
<h3 id="4-2-Controller-ç±»ä¸­ç›¸å…³æ³¨è§£"><a href="#4-2-Controller-ç±»ä¸­ç›¸å…³æ³¨è§£" class="headerlink" title="4.2 Controller ç±»ä¸­ç›¸å…³æ³¨è§£"></a>4.2 Controller ç±»ä¸­ç›¸å…³æ³¨è§£</h3><p>æˆ‘ä»¬å†™ä¸€ä¸ª TestControllerï¼Œå†å†™å‡ ä¸ªæ¥å£ï¼Œç„¶åå­¦ä¹ ä¸€ä¸‹ Controller ä¸­å’Œ Swagger2 ç›¸å…³çš„æ³¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.itcodai.course06.entiy.JsonResult;</span><br><span class="line"><span class="keyword">import</span> com.itcodai.course06.entiy.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/swagger"</span>)</span><br><span class="line"><span class="meta">@Api</span>(value = <span class="string">"Swagger2 åœ¨çº¿æ¥å£æ–‡æ¡£"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/get/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"æ ¹æ®ç”¨æˆ·å”¯ä¸€æ ‡è¯†è·å–ç”¨æˆ·ä¿¡æ¯"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult&lt;User&gt; <span class="title">getUserInfo</span><span class="params">(@PathVariable @ApiParam(value = <span class="string">"ç”¨æˆ·å”¯ä¸€æ ‡è¯†"</span>)</span> Long id) </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“ä¸­æ ¹æ®idè·å–Userä¿¡æ¯</span></span><br><span class="line">        User user = <span class="keyword">new</span> User(id, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ <code>@Api</code> ã€ <code>@ApiOperation</code> å’Œ <code>@ApiParam</code> æ³¨è§£ã€‚</p>
<blockquote>
<p><code>@Api</code> æ³¨è§£ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºæ ‡è¯†è¿™ä¸ªç±»æ˜¯ swagger çš„èµ„æºã€‚<br><code>@ApiOperation</code> æ³¨è§£ç”¨äºæ–¹æ³•ï¼Œè¡¨ç¤ºä¸€ä¸ª http è¯·æ±‚çš„æ“ä½œã€‚<br><code>@ApiParam</code> æ³¨è§£ç”¨äºå‚æ•°ä¸Šï¼Œç”¨æ¥æ ‡æ˜å‚æ•°ä¿¡æ¯ã€‚</p>
</blockquote>
<p>è¿™é‡Œè¿”å›çš„æ˜¯ JsonResultï¼Œæ˜¯ç¬¬02è¯¾ä¸­å­¦ä¹ è¿”å› json æ•°æ®æ—¶å°è£…çš„å®ä½“ã€‚ä»¥ä¸Šæ˜¯ Swagger ä¸­æœ€å¸¸ç”¨çš„ 5 ä¸ªæ³¨è§£ï¼Œæ¥ä¸‹æ¥è¿è¡Œä¸€ä¸‹é¡¹ç›®å·¥ç¨‹ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/swagger-ui.html</code> çœ‹ä¸€ä¸‹ Swagger é¡µé¢çš„æ¥å£çŠ¶æ€ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200215044156305.png" alt="swaggeræ¥å£å±•ç¤º"></p>
<p>å¯ä»¥çœ‹å‡ºï¼ŒSwagger é¡µé¢å¯¹è¯¥æ¥å£çš„ä¿¡æ¯å±•ç¤ºçš„éå¸¸å…¨é¢ï¼Œæ¯ä¸ªæ³¨è§£çš„ä½œç”¨ä»¥åŠå±•ç¤ºçš„åœ°æ–¹åœ¨ä¸Šå›¾ä¸­å·²ç»æ ‡æ˜ï¼Œé€šè¿‡é¡µé¢å³å¯çŸ¥é“è¯¥æ¥å£çš„æ‰€æœ‰ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥åœ¨çº¿æµ‹è¯•ä¸€ä¸‹è¯¥æ¥å£è¿”å›çš„ä¿¡æ¯ï¼Œè¾“å…¥idä¸º1ï¼Œçœ‹ä¸€ä¸‹è¿”å›æ•°æ®ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200215044226292.png" alt="è¿”å›æ•°æ®æµ‹è¯•"></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œç›´æ¥åœ¨é¡µé¢è¿”å›äº† json æ ¼å¼çš„æ•°æ®ï¼Œå¼€å‘äººå‘˜å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥åœ¨çº¿æ¥å£æ¥æµ‹è¯•æ•°æ®çš„æ­£ç¡®ä¸å¦ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä¸Šé¢æ˜¯å¯¹äºå•ä¸ªå‚æ•°çš„è¾“å…¥ï¼Œå¦‚æœè¾“å…¥å‚æ•°ä¸ºæŸä¸ªå¯¹è±¡è¿™ç§æƒ…å†µï¼ŒSwagger æ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿæˆ‘ä»¬å†å†™ä¸€ä¸ªæ¥å£ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/insert"</span>)</span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"æ·»åŠ ç”¨æˆ·ä¿¡æ¯"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult&lt;Void&gt; <span class="title">insertUser</span><span class="params">(@RequestBody @ApiParam(value = <span class="string">"ç”¨æˆ·ä¿¡æ¯"</span>)</span> User user) </span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†æ·»åŠ é€»è¾‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult&lt;&gt;();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/swagger-ui.html</code> çœ‹ä¸€ä¸‹æ•ˆæœï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200215044256579.png" alt="swaggeræ¥å£å±•ç¤º"></p>
<h2 id="5-æ€»ç»“-1"><a href="#5-æ€»ç»“-1" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>OKï¼Œæœ¬èŠ‚è¯¾è¯¦ç»†åˆ†æäº† Swagger çš„ä¼˜ç‚¹ï¼Œä»¥åŠ Spring Boot å¦‚ä½•é›†æˆ Swagger2ï¼ŒåŒ…æ‹¬é…ç½®ï¼Œç›¸å…³æ³¨è§£çš„è®²è§£ï¼Œæ¶‰åŠåˆ°äº†å®ä½“ç±»å’Œæ¥å£ç±»ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ã€‚æœ€åé€šè¿‡é¡µé¢æµ‹è¯•ï¼Œä½“éªŒäº† Swagger çš„å¼ºå¤§ä¹‹å¤„ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ¯ä¸ªé¡¹ç›®ç»„ä¸­å¿…å¤‡çš„å·¥å…·ä¹‹ä¸€ï¼Œæ‰€ä»¥è¦æŒæ¡è¯¥å·¥å…·çš„ä½¿ç”¨ï¼Œä¹Ÿä¸éš¾ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬07è¯¾ï¼šSpring-Booté›†æˆThymeleafæ¨¡æ¿å¼•æ“"><a href="#ç¬¬07è¯¾ï¼šSpring-Booté›†æˆThymeleafæ¨¡æ¿å¼•æ“" class="headerlink" title="ç¬¬07è¯¾ï¼šSpring Booté›†æˆThymeleafæ¨¡æ¿å¼•æ“"></a>ç¬¬07è¯¾ï¼šSpring Booté›†æˆThymeleafæ¨¡æ¿å¼•æ“</h1><h2 id="1-Thymeleaf-ä»‹ç»"><a href="#1-Thymeleaf-ä»‹ç»" class="headerlink" title="1. Thymeleaf ä»‹ç»"></a>1. Thymeleaf ä»‹ç»</h2><blockquote>
<p>Thymeleaf æ˜¯é€‚ç”¨äº Web å’Œç‹¬ç«‹ç¯å¢ƒçš„ç°ä»£æœåŠ¡å™¨ç«¯ Java æ¨¡æ¿å¼•æ“ã€‚<br>Thymeleaf çš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºæ‚¨çš„å¼€å‘å·¥ä½œæµç¨‹å¸¦æ¥ä¼˜é›…çš„è‡ªç„¶æ¨¡æ¿ - å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ­£ç¡®æ˜¾ç¤ºçš„HTMLï¼Œä¹Ÿå¯ä»¥ç”¨ä½œé™æ€åŸå‹ï¼Œä»è€Œåœ¨å¼€å‘å›¢é˜Ÿä¸­å®ç°æ›´å¼ºå¤§çš„åä½œã€‚  </p>
</blockquote>
<p>ä»¥ä¸Šç¿»è¯‘è‡ª Thymeleaf å®˜æ–¹ç½‘ç«™ã€‚ä¼ ç»Ÿçš„ JSP+JSTL ç»„åˆæ˜¯å·²ç»è¿‡å»äº†ï¼ŒThymeleaf æ˜¯ç°ä»£æœåŠ¡ç«¯çš„æ¨¡æ¿å¼•æ“ï¼Œä¸ä¼ ç»Ÿçš„ JSP ä¸åŒï¼ŒThymeleaf å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ç›´æ¥æ‰“å¼€ï¼Œå› ä¸ºå¯ä»¥å¿½ç•¥æ‰æ‹“å±•å±æ€§ï¼Œç›¸å½“äºæ‰“å¼€åŸç”Ÿé¡µé¢ï¼Œç»™å‰ç«¯äººå‘˜ä¹Ÿå¸¦æ¥ä¸€å®šçš„ä¾¿åˆ©ã€‚   </p>
<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´åœ¨æœ¬åœ°ç¯å¢ƒæˆ–è€…æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸‹ï¼ŒThymeleaf å‡å¯è¿è¡Œã€‚ç”±äº thymeleaf æ”¯æŒ html åŸå‹ï¼Œä¹Ÿæ”¯æŒåœ¨ html æ ‡ç­¾é‡Œå¢åŠ é¢å¤–çš„å±æ€§æ¥è¾¾åˆ° â€œæ¨¡æ¿+æ•°æ®â€ çš„å±•ç¤ºæ–¹å¼ï¼Œæ‰€ä»¥ç¾å·¥å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡µé¢æ•ˆæœï¼Œå½“æœåŠ¡å¯åŠ¨åï¼Œä¹Ÿå¯ä»¥è®©åå°å¼€å‘äººå‘˜æŸ¥çœ‹å¸¦æ•°æ®çš„åŠ¨æ€é¡µé¢æ•ˆæœã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ui right aligned basic segment"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ui orange basic label"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;blog.flag&#125;"</span>&gt;</span>é™æ€åŸåˆ›ä¿¡æ¯<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"ui center aligned header"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;blog.title&#125;"</span>&gt;</span>è¿™æ˜¯é™æ€æ ‡é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼ä¸ä¸Šé¢è¿™æ ·ï¼Œåœ¨é™æ€é¡µé¢æ—¶ï¼Œä¼šå±•ç¤ºé™æ€ä¿¡æ¯ï¼Œå½“æœåŠ¡å¯åŠ¨åï¼ŒåŠ¨æ€è·å–æ•°æ®åº“ä¸­çš„æ•°æ®åï¼Œå°±å¯ä»¥å±•ç¤ºåŠ¨æ€æ•°æ®ï¼Œ<code>th:text</code> æ ‡ç­¾æ˜¯ç”¨æ¥åŠ¨æ€æ›¿æ¢æ–‡æœ¬çš„ï¼Œè¿™ä¼šåœ¨ä¸‹æ–‡è¯´æ˜ã€‚è¯¥ä¾‹å­è¯´æ˜æµè§ˆå™¨è§£é‡Š html æ—¶ä¼šå¿½ç•¥ html ä¸­æœªå®šä¹‰çš„æ ‡ç­¾å±æ€§ï¼ˆæ¯”å¦‚ <code>th:text</code>ï¼‰ï¼Œæ‰€ä»¥ thymeleaf çš„æ¨¡æ¿å¯ä»¥é™æ€åœ°è¿è¡Œï¼›å½“æœ‰æ•°æ®è¿”å›åˆ°é¡µé¢æ—¶ï¼ŒThymeleaf æ ‡ç­¾ä¼šåŠ¨æ€åœ°æ›¿æ¢æ‰é™æ€å†…å®¹ï¼Œä½¿é¡µé¢åŠ¨æ€æ˜¾ç¤ºæ•°æ®ã€‚ </p>
<h2 id="2-ä¾èµ–å¯¼å…¥"><a href="#2-ä¾èµ–å¯¼å…¥" class="headerlink" title="2. ä¾èµ–å¯¼å…¥"></a>2. ä¾èµ–å¯¼å…¥</h2><p>åœ¨ Spring Boot ä¸­ä½¿ç”¨ thymeleaf æ¨¡æ¿éœ€è¦å¼•å…¥ä¾èµ–ï¼Œå¯ä»¥åœ¨åˆ›å»ºé¡¹ç›®å·¥ç¨‹æ—¶å‹¾é€‰ Thymeleafï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¹‹åå†æ‰‹åŠ¨å¯¼å…¥ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œåœ¨ html é¡µé¢ä¸Šå¦‚æœè¦ä½¿ç”¨ thymeleaf æ¨¡æ¿ï¼Œéœ€è¦åœ¨é¡µé¢æ ‡ç­¾ä¸­å¼•å…¥ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Thymeleafç›¸å…³é…ç½®"><a href="#3-Thymeleafç›¸å…³é…ç½®" class="headerlink" title="3. Thymeleafç›¸å…³é…ç½®"></a>3. Thymeleafç›¸å…³é…ç½®</h2><p>å› ä¸º Thymeleaf ä¸­å·²ç»æœ‰é»˜è®¤çš„é…ç½®äº†ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†å¯¹å…¶åšè¿‡å¤šçš„é…ç½®ï¼Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼ŒThymeleaf é»˜è®¤æ˜¯å¼€å¯é¡µé¢ç¼“å­˜çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘çš„æ—¶å€™ï¼Œéœ€è¦å…³é—­è¿™ä¸ªé¡µé¢ç¼“å­˜ï¼Œé…ç½®å¦‚ä¸‹ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">false</span> <span class="comment">#å…³é—­ç¼“å­˜</span></span><br></pre></td></tr></table></figure>
<p>å¦åˆ™ä¼šæœ‰ç¼“å­˜ï¼Œå¯¼è‡´é¡µé¢æ²¡æ³•åŠæ—¶çœ‹åˆ°æ›´æ–°åçš„æ•ˆæœã€‚ æ¯”å¦‚ä½ ä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå·²ç» update åˆ° tomcat äº†ï¼Œä½†åˆ·æ–°é¡µé¢è¿˜æ˜¯ä¹‹å‰çš„é¡µé¢ï¼Œå°±æ˜¯å› ä¸ºç¼“å­˜å¼•èµ·çš„ã€‚</p>
<h2 id="4-Thymeleaf-çš„ä½¿ç”¨"><a href="#4-Thymeleaf-çš„ä½¿ç”¨" class="headerlink" title="4. Thymeleaf çš„ä½¿ç”¨"></a>4. Thymeleaf çš„ä½¿ç”¨</h2><h3 id="4-1-è®¿é—®é™æ€é¡µé¢"><a href="#4-1-è®¿é—®é™æ€é¡µé¢" class="headerlink" title="4.1 è®¿é—®é™æ€é¡µé¢"></a>4.1 è®¿é—®é™æ€é¡µé¢</h3><p>è¿™ä¸ªå’Œ Thymeleaf æ²¡å•¥å…³ç³»ï¼Œåº”è¯¥è¯´æ˜¯é€šç”¨çš„ï¼Œæˆ‘æŠŠå®ƒä¸€å¹¶å†™åˆ°è¿™é‡Œçš„åŸå› æ˜¯ä¸€èˆ¬æˆ‘ä»¬åšç½‘ç«™çš„æ—¶å€™ï¼Œéƒ½ä¼šåšä¸€ä¸ª 404 é¡µé¢å’Œ 500 é¡µé¢ï¼Œä¸ºäº†å‡ºé”™æ—¶ç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„å±•ç¤ºï¼Œè€Œä¸è‡³äºä¸€å †å¼‚å¸¸ä¿¡æ¯æŠ›å‡ºæ¥ã€‚Spring Boot ä¸­ä¼šè‡ªåŠ¨è¯†åˆ«æ¨¡æ¿ç›®å½•ï¼ˆtemplates/ï¼‰ä¸‹çš„ 404.html å’Œ 500.html æ–‡ä»¶ã€‚æˆ‘ä»¬åœ¨ templates/ ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª error æ–‡ä»¶å¤¹ï¼Œä¸“é—¨æ”¾ç½®é”™è¯¯çš„ html é¡µé¢ï¼Œç„¶ååˆ†åˆ«æ‰“å°äº›ä¿¡æ¯ã€‚ä»¥ 404.html ä¸ºä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    è¿™æ˜¯404é¡µé¢</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å†å†™ä¸€ä¸ª controller æ¥æµ‹è¯•ä¸€ä¸‹ 404 å’Œ 500 é¡µé¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/thymeleaf"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test404"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test404</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test500"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test500</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/thymeleaf/test400</code> æ—¶ï¼Œæ•…æ„è¾“å…¥é”™è¯¯ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•ï¼Œå°±ä¼šè·³è½¬åˆ° 404.html æ˜¾ç¤ºã€‚<br>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8088/thymeleaf/test505</code> æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åä¼šè‡ªåŠ¨è·³è½¬åˆ° 500.html æ˜¾ç¤ºã€‚</p>
</blockquote>
<p>ã€æ³¨ã€‘è¿™é‡Œæœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå‰é¢çš„è¯¾ç¨‹ä¸­æˆ‘ä»¬è¯´äº†å¾®æœåŠ¡ä¸­ä¼šèµ°å‘å‰åç«¯åˆ†ç¦»ï¼Œæˆ‘ä»¬åœ¨ Controller å±‚ä¸Šéƒ½æ˜¯ä½¿ç”¨çš„ <code>@RestController</code> æ³¨è§£ï¼Œè‡ªåŠ¨ä¼šæŠŠè¿”å›çš„æ•°æ®è½¬æˆ json æ ¼å¼ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨æ¨¡æ¿å¼•æ“æ—¶ï¼ŒController å±‚å°±ä¸èƒ½ç”¨ <code>@RestController</code> æ³¨è§£äº†ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ thymeleaf æ¨¡æ¿æ—¶ï¼Œè¿”å›çš„æ˜¯è§†å›¾æ–‡ä»¶åï¼Œæ¯”å¦‚ä¸Šé¢çš„ Controller ä¸­æ˜¯è¿”å›åˆ° index.html é¡µé¢ï¼Œå¦‚æœä½¿ç”¨ <code>@RestController</code> çš„è¯ï¼Œä¼šæŠŠ index å½“ä½œ String è§£æäº†ï¼Œç›´æ¥è¿”å›åˆ°é¡µé¢äº†ï¼Œè€Œä¸æ˜¯å»æ‰¾ index.html é¡µé¢ï¼Œå¤§å®¶å¯ä»¥è¯•ä¸€ä¸‹ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨æ¨¡æ¿æ—¶è¦ç”¨ <code>@Controller</code> æ³¨è§£ã€‚</p>
<h3 id="4-2-Thymeleaf-ä¸­å¤„ç†å¯¹è±¡"><a href="#4-2-Thymeleaf-ä¸­å¤„ç†å¯¹è±¡" class="headerlink" title="4.2 Thymeleaf ä¸­å¤„ç†å¯¹è±¡"></a>4.2 Thymeleaf ä¸­å¤„ç†å¯¹è±¡</h3><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ thymeleaf æ¨¡æ¿ä¸­å¦‚ä½•å¤„ç†å¯¹è±¡ä¿¡æ¯ï¼Œå‡å¦‚æˆ‘ä»¬åœ¨åšä¸ªäººåšå®¢çš„æ—¶å€™ï¼Œéœ€è¦ç»™å‰ç«¯ä¼ åšä¸»ç›¸å…³ä¿¡æ¯æ¥å±•ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå°è£…æˆä¸€ä¸ªåšä¸»å¯¹è±¡ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blogger</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pass;</span><br><span class="line">	<span class="comment">// çœå»setå’Œget</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨controllerå±‚ä¸­åˆå§‹åŒ–ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getBlogger"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getBlogger</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">	Blogger blogger = <span class="keyword">new</span> Blogger(<span class="number">1L</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">	model.addAttribute(<span class="string">"blogger"</span>, blogger);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"blogger"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å…ˆåˆå§‹åŒ–ä¸€ä¸ª Blogger å¯¹è±¡ï¼Œç„¶åå°†è¯¥å¯¹è±¡æ”¾åˆ° Model ä¸­ï¼Œç„¶åè¿”å›åˆ° blogger.html é¡µé¢å»æ¸²æŸ“ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å†å†™ä¸€ä¸ª blogger.html æ¥æ¸²æŸ“ blogger ä¿¡æ¯ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åšä¸»ä¿¡æ¯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">th:object</span>=<span class="string">"$&#123;blogger&#125;"</span> &gt;</span></span><br><span class="line">    ç”¨æˆ·ç¼–å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;blogger.id&#125;"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;blogger.getName()&#125;"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç™»é™†å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">th:value</span>=<span class="string">"*&#123;pass&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ thymeleaf æ¨¡æ¿ä¸­ï¼Œä½¿ç”¨ <code>th:object=&quot;${}&quot;</code> æ¥è·å–å¯¹è±¡ä¿¡æ¯ï¼Œç„¶ååœ¨è¡¨å•é‡Œé¢å¯ä»¥æœ‰ä¸‰ç§æ–¹å¼æ¥è·å–å¯¹è±¡å±æ€§ã€‚å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ <code>th:value=&quot;*{å±æ€§å}&quot;</code><br>ä½¿ç”¨ <code>th:value=&quot;${å¯¹è±¡.å±æ€§å}&quot;</code>ï¼Œå¯¹è±¡æŒ‡çš„æ˜¯ä¸Šé¢ä½¿ç”¨ <code>th:object</code> è·å–çš„å¯¹è±¡<br>ä½¿ç”¨ <code>th:value=&quot;${å¯¹è±¡.getæ–¹æ³•}&quot;</code>ï¼Œå¯¹è±¡æŒ‡çš„æ˜¯ä¸Šé¢ä½¿ç”¨ <code>th:object</code> è·å–çš„å¯¹è±¡</p>
</blockquote>
<p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ Thymeleaf ä¸­å¯ä»¥åƒå†™ java ä¸€æ ·å†™ä»£ç ï¼Œå¾ˆæ–¹ä¾¿ã€‚æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/thymeleaf/getBlogger</code> æ¥æµ‹è¯•ä¸€ä¸‹æ•°æ®ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200215044353803.jpg" alt="thymeleafä¸­å¤„ç†å¯¹è±¡"></p>
<h3 id="4-3-Thymeleaf-ä¸­å¤„ç†-List"><a href="#4-3-Thymeleaf-ä¸­å¤„ç†-List" class="headerlink" title="4.3 Thymeleaf ä¸­å¤„ç† List"></a>4.3 Thymeleaf ä¸­å¤„ç† List</h3><p>å¤„ç† List çš„è¯ï¼Œå’Œå¤„ç†ä¸Šé¢ä»‹ç»çš„å¯¹è±¡å·®ä¸å¤šï¼Œä½†æ˜¯éœ€è¦åœ¨ thymeleaf ä¸­è¿›è¡Œéå†ã€‚æˆ‘ä»¬å…ˆåœ¨ Controller ä¸­æ¨¡æ‹Ÿä¸€ä¸ª Listã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getList"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getList</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">    Blogger blogger1 = <span class="keyword">new</span> Blogger(<span class="number">1L</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">    Blogger blogger2 = <span class="keyword">new</span> Blogger(<span class="number">2L</span>, <span class="string">"è¾¾äººè¯¾"</span>, <span class="string">"123456"</span>);</span><br><span class="line">    List&lt;Blogger&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list.add(blogger1);</span><br><span class="line">    list.add(blogger2);</span><br><span class="line">    model.addAttribute(<span class="string">"list"</span>, list);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†™ä¸€ä¸ª list.html æ¥è·å–è¯¥ list ä¿¡æ¯ï¼Œç„¶ååœ¨ list.html ä¸­éå†è¿™ä¸ªlistã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åšä¸»ä¿¡æ¯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">th:each</span>=<span class="string">"blogger : $&#123;list&#125;"</span> &gt;</span></span><br><span class="line">    ç”¨æˆ·ç¼–å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;blogger.id&#125;"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;blogger.name&#125;"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç™»å½•å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;blogger.getPass()&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œå…¶å®å’Œå¤„ç†å•ä¸ªå¯¹è±¡ä¿¡æ¯å·®ä¸å¤šï¼ŒThymeleaf ä½¿ç”¨ <code>th:each</code> è¿›è¡Œéå†ï¼Œ<code>${}</code> å– model ä¸­ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œç„¶åè‡ªå®šä¹‰ list ä¸­å–å‡ºæ¥çš„æ¯ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå®šä¹‰ä¸º bloggerã€‚è¡¨å•é‡Œé¢å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>${å¯¹è±¡.å±æ€§å}</code> æ¥è·å– list ä¸­å¯¹è±¡çš„å±æ€§å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>${å¯¹è±¡.getæ–¹æ³•}</code> æ¥è·å–ï¼Œè¿™ç‚¹å’Œä¸Šé¢å¤„ç†å¯¹è±¡ä¿¡æ¯æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨ <code>*{å±æ€§å}</code> æ¥è·å–å¯¹è±¡ä¸­çš„å±æ€§ï¼Œthymeleaf æ¨¡æ¿è·å–ä¸åˆ°ã€‚    </p>
<h3 id="4-4-å…¶ä»–å¸¸ç”¨-thymeleaf-æ“ä½œ"><a href="#4-4-å…¶ä»–å¸¸ç”¨-thymeleaf-æ“ä½œ" class="headerlink" title="4.4 å…¶ä»–å¸¸ç”¨ thymeleaf æ“ä½œ"></a>4.4 å…¶ä»–å¸¸ç”¨ thymeleaf æ“ä½œ</h3><p>æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ thymeleaf ä¸­çš„ä¸€äº›å¸¸ç”¨çš„æ ‡ç­¾æ“ä½œï¼Œå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>åŠŸèƒ½</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td><code>th:value</code></td>
<td>ç»™å±æ€§èµ‹å€¼</td>
<td><code>&lt;input th:value=&quot;${blog.name}&quot; /&gt;</code></td>
</tr>
<tr>
<td><code>th:style</code></td>
<td>è®¾ç½®æ ·å¼</td>
<td><code>th:style=&quot;&#39;display:&#39;+@{(${sitrue}?&#39;none&#39;:&#39;inline-block&#39;)} + &#39;&#39;&quot;</code></td>
</tr>
<tr>
<td><code>th:onclick</code></td>
<td>ç‚¹å‡»äº‹ä»¶</td>
<td><code>th:onclick=&quot;&#39;getInfo()&#39;&quot;</code></td>
</tr>
<tr>
<td><code>th:if</code></td>
<td>æ¡ä»¶åˆ¤æ–­</td>
<td><code>&lt;a th:if=&quot;${userId == collect.userId}&quot; &gt;</code></td>
</tr>
<tr>
<td><code>th:href</code></td>
<td>è¶…é“¾æ¥</td>
<td><code>&lt;a th:href=&quot;@{/blogger/login}&quot;&gt;Login&lt;/a&gt; /&gt;</code></td>
</tr>
<tr>
<td><code>th:unless</code></td>
<td>æ¡ä»¶åˆ¤æ–­å’Œ<code>th:if</code>ç›¸å</td>
<td><code>&lt;a th:href=&quot;@{/blogger/login}&quot; th:unless=${session.user != null}&gt;Login&lt;/a&gt;</code></td>
</tr>
<tr>
<td><code>th:switch</code></td>
<td>é…åˆ<code>th:case</code></td>
<td><code>&lt;div th:switch=&quot;${user.role}&quot;&gt;</code></td>
</tr>
<tr>
<td><code>th:case</code></td>
<td>é…åˆ<code>th:switch</code></td>
<td><code>&lt;p th:case=&quot;&#39;admin&#39;&quot;&gt;administator&lt;/p&gt;</code></td>
</tr>
<tr>
<td><code>th:src</code></td>
<td>åœ°å€å¼•å…¥</td>
<td><code>&lt;img alt=&quot;csdn logo&quot; th:src=&quot;@{/img/logo.png}&quot; /&gt;</code></td>
</tr>
<tr>
<td><code>th:action</code></td>
<td>è¡¨å•æäº¤çš„åœ°å€</td>
<td><code>&lt;form th:action=&quot;@{/blogger/update}&quot;&gt;</code></td>
</tr>
</tbody></table>
<p>Thymeleaf è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç”¨æ³•ï¼Œè¿™é‡Œå°±ä¸æ€»ç»“äº†ï¼Œå…·ä½“çš„å¯ä»¥å‚è€ƒThymeleafçš„<a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£ï¼ˆv3.0ï¼‰</a>ã€‚ä¸»è¦è¦å­¦ä¼šå¦‚ä½•åœ¨ Spring Boot ä¸­å»ä½¿ç”¨ thymeleafï¼Œé‡åˆ°å¯¹åº”çš„æ ‡ç­¾æˆ–è€…æ–¹æ³•ï¼ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£å³å¯ã€‚</p>
<h2 id="5-æ€»ç»“-2"><a href="#5-æ€»ç»“-2" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>Thymeleaf åœ¨ Spring Boot ä¸­ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œæœ¬èŠ‚è¯¾ä¸»è¦åˆ†æäº† thymeleaf çš„ä¼˜ç‚¹ï¼Œä»¥åŠå¦‚ä½•åœ¨ Spring Boot ä¸­é›†æˆå¹¶ä½¿ç”¨ thymeleaf æ¨¡æ¿ï¼ŒåŒ…æ‹¬ä¾èµ–ã€é…ç½®ï¼Œç›¸å…³æ•°æ®çš„è·å–ã€ä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹ç­‰ç­‰ã€‚æœ€ååˆ—ä¸¾äº†ä¸€äº› thymeleaf ä¸­å¸¸ç”¨çš„æ ‡ç­¾ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¤šä½¿ç”¨ï¼Œå¤šæŸ¥é˜…å°±èƒ½ç†Ÿç»ƒæŒæ¡ï¼Œthymeleaf ä¸­çš„ä¸€äº›æ ‡ç­¾æˆ–è€…æ–¹æ³•ä¸ç”¨æ­»è®°ç¡¬èƒŒï¼Œç”¨åˆ°ä»€ä¹ˆå»æŸ¥é˜…ä»€ä¹ˆï¼Œå…³é”®æ˜¯è¦ä¼šåœ¨ Spring Boot ä¸­é›†æˆï¼Œç”¨çš„å¤šäº†å°±ç†Ÿèƒ½ç”Ÿå·§ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬08è¯¾ï¼šSpring-Bootä¸­çš„å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#ç¬¬08è¯¾ï¼šSpring-Bootä¸­çš„å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="ç¬¬08è¯¾ï¼šSpring Bootä¸­çš„å…¨å±€å¼‚å¸¸å¤„ç†"></a>ç¬¬08è¯¾ï¼šSpring Bootä¸­çš„å…¨å±€å¼‚å¸¸å¤„ç†</h1><p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ç®¡æ˜¯å¯¹åº•å±‚æ•°æ®åº“çš„æ“ä½œè¿‡ç¨‹ï¼Œè¿˜æ˜¯ä¸šåŠ¡å±‚çš„å¤„ç†è¿‡ç¨‹ï¼Œè¿˜æ˜¯æ§åˆ¶å±‚çš„å¤„ç†è¿‡ç¨‹ï¼Œéƒ½ä¸å¯é¿å…ä¼šé‡åˆ°å„ç§å¯é¢„çŸ¥çš„ã€ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸éœ€è¦å¤„ç†ã€‚å¦‚æœå¯¹æ¯ä¸ªè¿‡ç¨‹éƒ½å•ç‹¬ä½œå¼‚å¸¸å¤„ç†ï¼Œé‚£ç³»ç»Ÿçš„ä»£ç è€¦åˆåº¦ä¼šå˜å¾—å¾ˆé«˜ï¼Œæ­¤å¤–ï¼Œå¼€å‘å·¥ä½œé‡ä¹Ÿä¼šåŠ å¤§è€Œä¸”ä¸å¥½ç»Ÿä¸€ï¼Œè¿™ä¹Ÿå¢åŠ äº†ä»£ç çš„ç»´æŠ¤æˆæœ¬ã€‚<br>é’ˆå¯¹è¿™ç§å®é™…æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸å¤„ç†ä»å„å¤„ç†è¿‡ç¨‹è§£è€¦å‡ºæ¥ï¼Œè¿™æ ·æ—¢ä¿è¯äº†ç›¸å…³å¤„ç†è¿‡ç¨‹çš„åŠŸèƒ½å•ä¸€ï¼Œä¹Ÿå®ç°äº†å¼‚å¸¸ä¿¡æ¯çš„ç»Ÿä¸€å¤„ç†å’Œç»´æŠ¤ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›ç›´æ¥æŠŠå¼‚å¸¸æŠ›ç»™ç”¨æˆ·ï¼Œåº”è¯¥å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¯¹é”™è¯¯ä¿¡æ¯è¿›è¡Œå°è£…ï¼Œç„¶åè¿”å›ä¸€ä¸ªå‹å¥½çš„ä¿¡æ¯ç»™ç”¨æˆ·ã€‚è¿™èŠ‚ä¸»è¦æ€»ç»“ä¸€ä¸‹é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ Spring Boot å¦‚ä½•æ‹¦æˆªå¹¶å¤„ç†å…¨å±€çš„å¼‚å¸¸ã€‚</p>
<h2 id="1-å®šä¹‰è¿”å›çš„ç»Ÿä¸€-json-ç»“æ„"><a href="#1-å®šä¹‰è¿”å›çš„ç»Ÿä¸€-json-ç»“æ„" class="headerlink" title="1. å®šä¹‰è¿”å›çš„ç»Ÿä¸€ json ç»“æ„"></a>1. å®šä¹‰è¿”å›çš„ç»Ÿä¸€ json ç»“æ„</h2><p>å‰ç«¯æˆ–è€…å…¶ä»–æœåŠ¡è¯·æ±‚æœ¬æœåŠ¡çš„æ¥å£æ—¶ï¼Œè¯¥æ¥å£éœ€è¦è¿”å›å¯¹åº”çš„ json æ•°æ®ï¼Œä¸€èˆ¬è¯¥æœåŠ¡åªéœ€è¦è¿”å›è¯·æ±‚ç€éœ€è¦çš„å‚æ•°å³å¯ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°è£…æ›´å¤šçš„ä¿¡æ¯ï¼Œæ¯”å¦‚çŠ¶æ€ç  codeã€ç›¸å…³ä¿¡æ¯ msg ç­‰ç­‰ï¼Œè¿™ä¸€æ–¹é¢æ˜¯åœ¨é¡¹ç›®ä¸­å¯ä»¥æœ‰ä¸ªç»Ÿä¸€çš„è¿”å›ç»“æ„ï¼Œæ•´ä¸ªé¡¹ç›®ç»„éƒ½é€‚ç”¨ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ–¹ä¾¿ç»“åˆå…¨å±€å¼‚å¸¸å¤„ç†ä¿¡æ¯ï¼Œå› ä¸ºå¼‚å¸¸å¤„ç†ä¿¡æ¯ä¸­ä¸€èˆ¬æˆ‘ä»¬éœ€è¦æŠŠçŠ¶æ€ç å’Œå¼‚å¸¸å†…å®¹åé¦ˆç»™è°ƒç”¨æ–¹ã€‚<br>è¿™ä¸ªç»Ÿä¸€çš„ json ç»“æ„è¿™å¯ä»¥å‚è€ƒ<a href="https://gitbook.cn/gitchat/column/5b3c9f35a3442272491a176a" target="_blank" rel="noopener">ç¬¬02è¯¾ï¼šSpring Boot è¿”å› JSON æ•°æ®åŠæ•°æ®å°è£…</a>ä¸­å°è£…çš„ç»Ÿä¸€ json ç»“æ„ï¼Œæœ¬èŠ‚å†…å®¹æˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹ï¼Œåªä¿ç•™çŠ¶æ€ç  code å’Œå¼‚å¸¸ä¿¡æ¯ msgå³å¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonResult</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> String msg;</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"200"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">"æ“ä½œæˆåŠŸ"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// get set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-å¤„ç†ç³»ç»Ÿå¼‚å¸¸"><a href="#2-å¤„ç†ç³»ç»Ÿå¼‚å¸¸" class="headerlink" title="2. å¤„ç†ç³»ç»Ÿå¼‚å¸¸"></a>2. å¤„ç†ç³»ç»Ÿå¼‚å¸¸</h2><p>æ–°å»ºä¸€ä¸ª GlobalExceptionHandler å…¨å±€å¼‚å¸¸å¤„ç†ç±»ï¼Œç„¶ååŠ ä¸Š <code>@ControllerAdvice</code> æ³¨è§£å³å¯æ‹¦æˆªé¡¹ç›®ä¸­æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">	<span class="comment">// æ‰“å°log</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç‚¹å¼€ <code>@ControllerAdvice</code> æ³¨è§£å¯ä»¥çœ‹åˆ°ï¼Œ<code>@ControllerAdvice</code> æ³¨è§£åŒ…å«äº† <code>@Component</code> æ³¨è§£ï¼Œè¯´æ˜åœ¨ Spring Boot å¯åŠ¨æ—¶ï¼Œä¹Ÿä¼šæŠŠè¯¥ç±»ä½œä¸ºç»„ä»¶äº¤ç»™ Spring æ¥ç®¡ç†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ³¨è§£è¿˜æœ‰ä¸ª <code>basePackages</code> å±æ€§ï¼Œè¯¥å±æ€§æ˜¯ç”¨æ¥æ‹¦æˆªå“ªä¸ªåŒ…ä¸­çš„å¼‚å¸¸ä¿¡æ¯ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸æŒ‡å®šè¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬æ‹¦æˆªé¡¹ç›®å·¥ç¨‹ä¸­çš„æ‰€æœ‰å¼‚å¸¸ã€‚<code>@ResponseBody</code> æ³¨è§£æ˜¯ä¸ºäº†å¼‚å¸¸å¤„ç†å®Œä¹‹åç»™è°ƒç”¨æ–¹è¾“å‡ºä¸€ä¸ª json æ ¼å¼çš„å°è£…æ•°æ®ã€‚<br>åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨å‘¢ï¼ŸSpring Boot ä¸­å¾ˆç®€å•ï¼Œåœ¨æ–¹æ³•ä¸Šé€šè¿‡ <code>@ExceptionHandler</code> æ³¨è§£æ¥æŒ‡å®šå…·ä½“çš„å¼‚å¸¸ï¼Œç„¶ååœ¨æ–¹æ³•ä¸­å¤„ç†è¯¥å¼‚å¸¸ä¿¡æ¯ï¼Œæœ€åå°†ç»“æœé€šè¿‡ç»Ÿä¸€çš„ json ç»“æ„ä½“è¿”å›ç»™è°ƒç”¨è€…ã€‚ä¸‹é¢æˆ‘ä»¬ä¸¾å‡ ä¸ªä¾‹å­æ¥è¯´æ˜å¦‚ä½•æ¥ä½¿ç”¨ã€‚</p>
<h3 id="2-1-å¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸"><a href="#2-1-å¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸" class="headerlink" title="2.1 å¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸"></a>2.1 å¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸</h3><p>åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸­ï¼Œå‰ç«¯è¯·æ±‚åå°çš„æ¥å£éƒ½æ˜¯é€šè¿‡ rest é£æ ¼æ¥è°ƒç”¨ï¼Œæœ‰æ—¶å€™ï¼Œæ¯”å¦‚ POST è¯·æ±‚ éœ€è¦æºå¸¦ä¸€äº›å‚æ•°ï¼Œä½†æ˜¯å¾€å¾€æœ‰æ—¶å€™å‚æ•°ä¼šæ¼æ‰ã€‚å¦å¤–ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¶‰åŠåˆ°å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´çš„æ¥å£è°ƒç”¨æ—¶ï¼Œä¹Ÿå¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸çš„æ–¹æ³•ï¼Œæ¥ç»™å‰ç«¯æˆ–è€…è°ƒç”¨æ–¹æç¤ºä¸€ä¸ªå‹å¥½ä¿¡æ¯ã€‚  </p>
<p>å‚æ•°ç¼ºå¤±çš„æ—¶å€™ï¼Œä¼šæŠ›å‡º <code>HttpMessageNotReadableException</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¦æˆªè¯¥å¼‚å¸¸ï¼Œåšä¸€ä¸ªå‹å¥½å¤„ç†ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç¼ºå°‘è¯·æ±‚å‚æ•°å¼‚å¸¸</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ex HttpMessageNotReadableException</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@ExceptionHandler</span>(MissingServletRequestParameterException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.BAD_REQUEST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleHttpMessageNotReadableException</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    MissingServletRequestParameterException ex)</span> </span>&#123;</span><br><span class="line">    logger.error(<span class="string">"ç¼ºå°‘è¯·æ±‚å‚æ•°ï¼Œ&#123;&#125;"</span>, ex.getMessage());</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(<span class="string">"400"</span>, <span class="string">"ç¼ºå°‘å¿…è¦çš„è¯·æ±‚å‚æ•°"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥å†™ä¸ªç®€å•çš„ Controller æµ‹è¯•ä¸€ä¸‹è¯¥å¼‚å¸¸ï¼Œé€šè¿‡ POST è¯·æ±‚æ–¹å¼æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå§“åå’Œå¯†ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/exception"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ExceptionController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">test</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span> String name,</span></span><br><span class="line"><span class="function">                           @<span class="title">RequestParam</span><span class="params">(<span class="string">"pass"</span>)</span> String pass) </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"nameï¼š&#123;&#125;"</span>, name);</span><br><span class="line">        logger.info(<span class="string">"passï¼š&#123;&#125;"</span>, pass);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä½¿ç”¨ Postman æ¥è°ƒç”¨ä¸€ä¸‹è¯¥æ¥å£ï¼Œè°ƒç”¨çš„æ—¶å€™ï¼Œåªä¼ å§“åï¼Œä¸ä¼ å¯†ç ï¼Œå°±ä¼šæŠ›ç¼ºå°‘å‚æ•°å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸è¢«æ•è·ä¹‹åï¼Œå°±ä¼šè¿›å…¥æˆ‘ä»¬å†™å¥½çš„é€»è¾‘ï¼Œç»™è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªå‹å¥½ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/2020021504443480.png" alt="ç¼ºå¤±å‚æ•°å¼‚å¸¸"></p>
<h3 id="2-2-å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸"><a href="#2-2-å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸" class="headerlink" title="2.2 å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸"></a>2.2 å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸</h3><p>ç©ºæŒ‡é’ˆå¼‚å¸¸æ˜¯å¼€å‘ä¸­å¸ç©ºè§æƒ¯çš„ä¸œè¥¿äº†ï¼Œä¸€èˆ¬å‘ç”Ÿçš„åœ°æ–¹æœ‰å“ªäº›å‘¢ï¼Ÿ<br>å…ˆæ¥èŠä¸€èŠä¸€äº›æ³¨æ„çš„åœ°æ–¹ï¼Œæ¯”å¦‚åœ¨å¾®æœåŠ¡ä¸­ï¼Œç»å¸¸ä¼šè°ƒç”¨å…¶ä»–æœåŠ¡è·å–æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ä¸»è¦æ˜¯ json æ ¼å¼çš„ï¼Œä½†æ˜¯åœ¨è§£æ json çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæœ‰ç©ºå‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è·å–æŸä¸ª jsonObject æ—¶ï¼Œå†é€šè¿‡è¯¥ jsonObject å»è·å–ç›¸å…³ä¿¡æ¯æ—¶ï¼Œåº”è¯¥è¦å…ˆåšéç©ºåˆ¤æ–­ã€‚<br>è¿˜æœ‰ä¸€ä¸ªå¾ˆå¸¸è§çš„åœ°æ–¹å°±æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥è¯¢çš„æ•°æ®ï¼Œä¸ç®¡æ˜¯æŸ¥è¯¢ä¸€æ¡è®°å½•å°è£…åœ¨æŸä¸ªå¯¹è±¡ä¸­ï¼Œè¿˜æ˜¯æŸ¥è¯¢å¤šæ¡è®°å½•å°è£…åœ¨ä¸€ä¸ª List ä¸­ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥éƒ½è¦å»å¤„ç†æ•°æ®ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºè°ä¹Ÿä¸èƒ½ä¿è¯ä»æ•°æ®åº“ä¸­æŸ¥å‡ºæ¥çš„ä¸œè¥¿å°±ä¸€å®šä¸ä¸ºç©ºï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ•°æ®æ—¶ä¸€å®šè¦å…ˆåšéç©ºåˆ¤æ–­ã€‚<br>å¯¹ç©ºæŒ‡é’ˆå¼‚å¸¸çš„å¤„ç†å¾ˆç®€å•ï¼Œå’Œä¸Šé¢çš„é€»è¾‘ä¸€æ ·ï¼Œå°†å¼‚å¸¸ä¿¡æ¯æ¢æ‰å³å¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex NullPointerException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(NullPointerException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleTypeMismatchException</span><span class="params">(NullPointerException ex)</span> </span>&#123;</span><br><span class="line">        logger.error(<span class="string">"ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œ&#123;&#125;"</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(<span class="string">"500"</span>, <span class="string">"ç©ºæŒ‡é’ˆå¼‚å¸¸äº†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæˆ‘å°±ä¸æµ‹è¯•äº†ï¼Œä»£ç ä¸­ ExceptionController æœ‰ä¸ª <code>testNullPointException</code> æ–¹æ³•ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ä¸€ä¸‹å¯¹åº”çš„ url å³å¯çœ‹åˆ°è¿”å›çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"code"</span>:<span class="string">"500"</span>,<span class="attr">"msg"</span>:<span class="string">"ç©ºæŒ‡é’ˆå¼‚å¸¸äº†"</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-ä¸€åŠ³æ°¸é€¸ï¼Ÿ"><a href="#2-3-ä¸€åŠ³æ°¸é€¸ï¼Ÿ" class="headerlink" title="2.3 ä¸€åŠ³æ°¸é€¸ï¼Ÿ"></a>2.3 ä¸€åŠ³æ°¸é€¸ï¼Ÿ</h3><p>å½“ç„¶äº†ï¼Œå¼‚å¸¸å¾ˆå¤šï¼Œæ¯”å¦‚è¿˜æœ‰ RuntimeExceptionï¼Œæ•°æ®åº“è¿˜æœ‰ä¸€äº›æŸ¥è¯¢æˆ–è€…æ“ä½œå¼‚å¸¸ç­‰ç­‰ã€‚ç”±äº Exception å¼‚å¸¸æ˜¯çˆ¶ç±»ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½ä¼šç»§æ‰¿è¯¥å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¦æˆª Exception å¼‚å¸¸ï¼Œä¸€åŠ³æ°¸é€¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç³»ç»Ÿå¼‚å¸¸ é¢„æœŸä»¥å¤–å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleUnexpectedServer</span><span class="params">(Exception ex)</span> </span>&#123;</span><br><span class="line">        logger.error(<span class="string">"ç³»ç»Ÿå¼‚å¸¸ï¼š"</span>, ex);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(<span class="string">"500"</span>, <span class="string">"ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒè¯¦ç»†çš„å»æ‹¦æˆªä¸€äº›å¸¸è§å¼‚å¸¸ï¼Œæ‹¦æˆª Exception è™½ç„¶å¯ä»¥ä¸€åŠ³æ°¸é€¸ï¼Œä½†æ˜¯ä¸åˆ©äºæˆ‘ä»¬å»æ’æŸ¥æˆ–è€…å®šä½é—®é¢˜ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥æŠŠæ‹¦æˆª Exception å¼‚å¸¸å†™åœ¨ GlobalExceptionHandler æœ€ä¸‹é¢ï¼Œå¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œæœ€åå†æ‹¦æˆªä¸€ä¸‹ Exception å¼‚å¸¸ï¼Œä¿è¯è¾“å‡ºä¿¡æ¯å‹å¥½ã€‚</p>
<h2 id="3-æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸"><a href="#3-æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="3. æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸"></a>3. æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé™¤äº†æ‹¦æˆªä¸€äº›ç³»ç»Ÿå¼‚å¸¸å¤–ï¼Œåœ¨æŸäº›ä¸šåŠ¡ä¸Šï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€äº›ä¸šåŠ¡å¼‚å¸¸ï¼Œæ¯”å¦‚åœ¨å¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„ç›¸äº’è°ƒç”¨å¾ˆå¹³å‡¡ï¼Œå¾ˆå¸¸è§ã€‚è¦å¤„ç†ä¸€ä¸ªæœåŠ¡çš„è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè°ƒç”¨å¤±è´¥æˆ–è€…è°ƒç”¨è¶…æ—¶ç­‰ç­‰ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ï¼Œå½“è°ƒç”¨å¤±è´¥æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œç»™ GlobalExceptionHandler å»æ•è·ã€‚</p>
<h3 id="3-1-å®šä¹‰å¼‚å¸¸ä¿¡æ¯"><a href="#3-1-å®šä¹‰å¼‚å¸¸ä¿¡æ¯" class="headerlink" title="3.1 å®šä¹‰å¼‚å¸¸ä¿¡æ¯"></a>3.1 å®šä¹‰å¼‚å¸¸ä¿¡æ¯</h3><p>ç”±äºåœ¨ä¸šåŠ¡ä¸­ï¼Œæœ‰å¾ˆå¤šå¼‚å¸¸ï¼Œé’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡ï¼Œå¯èƒ½ç»™å‡ºçš„æç¤ºä¿¡æ¯ä¸åŒï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿é¡¹ç›®å¼‚å¸¸ä¿¡æ¯ç®¡ç†ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ä¿¡æ¯æšä¸¾ç±»ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸šåŠ¡å¼‚å¸¸æç¤ºä¿¡æ¯æšä¸¾ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> BusinessMsgEnum &#123;</span><br><span class="line">    <span class="comment">/** å‚æ•°å¼‚å¸¸ */</span></span><br><span class="line">    PARMETER_EXCEPTION(<span class="string">"102"</span>, <span class="string">"å‚æ•°å¼‚å¸¸!"</span>),</span><br><span class="line">    <span class="comment">/** ç­‰å¾…è¶…æ—¶ */</span></span><br><span class="line">    SERVICE_TIME_OUT(<span class="string">"103"</span>, <span class="string">"æœåŠ¡è°ƒç”¨è¶…æ—¶ï¼"</span>),</span><br><span class="line">    <span class="comment">/** å‚æ•°è¿‡å¤§ */</span></span><br><span class="line">    PARMETER_BIG_EXCEPTION(<span class="string">"102"</span>, <span class="string">"è¾“å…¥çš„å›¾ç‰‡æ•°é‡ä¸èƒ½è¶…è¿‡50å¼ !"</span>),</span><br><span class="line">    <span class="comment">/** 500 : ä¸€åŠ³æ°¸é€¸çš„æç¤ºä¹Ÿå¯ä»¥åœ¨è¿™å®šä¹‰ */</span></span><br><span class="line">    UNEXPECTED_EXCEPTION(<span class="string">"500"</span>, <span class="string">"ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼"</span>);</span><br><span class="line">    <span class="comment">// è¿˜å¯ä»¥å®šä¹‰æ›´å¤šçš„ä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆæ¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆæ¯å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">BusinessMsgEnum</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// set getæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸"><a href="#3-2-æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="3.2 æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸"></a>3.2 æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸</h3><p>ç„¶åæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸šåŠ¡å¼‚å¸¸ï¼Œå½“å‡ºç°ä¸šåŠ¡å¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬å°±æŠ›è¿™ä¸ªè‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸å³å¯ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª BusinessErrorException å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BusinessErrorException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">7480022450501760611L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸æç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessErrorException</span><span class="params">(BusinessMsgEnum businessMsgEnum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = businessMsgEnum.code();</span><br><span class="line">        <span class="keyword">this</span>.message = businessMsgEnum.msg();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// get setæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ„é€ æ–¹æ³•ä¸­ï¼Œä¼ å…¥æˆ‘ä»¬ä¸Šé¢è‡ªå®šä¹‰çš„å¼‚å¸¸æšä¸¾ç±»ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœæœ‰æ–°çš„å¼‚å¸¸ä¿¡æ¯éœ€è¦æ·»åŠ ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æšä¸¾ç±»ä¸­æ·»åŠ å³å¯ï¼Œå¾ˆæ–¹ä¾¿ï¼Œåšåˆ°ç»Ÿä¸€ç»´æŠ¤ï¼Œç„¶åå†æ‹¦æˆªè¯¥å¼‚å¸¸æ—¶è·å–å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‹¦æˆªä¸šåŠ¡å¼‚å¸¸ï¼Œè¿”å›ä¸šåŠ¡å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(BusinessErrorException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleBusinessError</span><span class="params">(BusinessErrorException ex)</span> </span>&#123;</span><br><span class="line">        String code = ex.getCode();</span><br><span class="line">        String message = ex.getMessage();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(code, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¨¡æ‹Ÿä¸€ä¸‹æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/exception"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ExceptionController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/business"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">testException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BusinessErrorException(BusinessMsgEnum.UNEXPECTED_EXCEPTION);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹é¡¹ç›®ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼Œè¿”å› json å¦‚ä¸‹ï¼Œè¯´æ˜æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸æ•è·æˆåŠŸï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"code"</span>:<span class="string">"500"</span>,<span class="attr">"msg"</span>:<span class="string">"ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼"</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-æ€»ç»“-3"><a href="#4-æ€»ç»“-3" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾ç¨‹ä¸»è¦è®²è§£äº†Spring Boot çš„å…¨å±€å¼‚å¸¸å¤„ç†ï¼ŒåŒ…æ‹¬å¼‚å¸¸ä¿¡æ¯çš„å°è£…ã€å¼‚å¸¸ä¿¡æ¯çš„æ•è·å’Œå¤„ç†ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„è‡ªå®šä¹‰å¼‚å¸¸æšä¸¾ç±»å’Œä¸šåŠ¡å¼‚å¸¸çš„æ•è·ä¸å¤„ç†ï¼Œåœ¨é¡¹ç›®ä¸­è¿ç”¨çš„éå¸¸å¹¿æ³›ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªé¡¹ç›®ä¸­éƒ½éœ€è¦åšå…¨å±€å¼‚å¸¸å¤„ç†ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬09è¯¾ï¼šSpring-Bootä¸­çš„åˆ‡é¢AOPå¤„ç†"><a href="#ç¬¬09è¯¾ï¼šSpring-Bootä¸­çš„åˆ‡é¢AOPå¤„ç†" class="headerlink" title="ç¬¬09è¯¾ï¼šSpring Bootä¸­çš„åˆ‡é¢AOPå¤„ç†"></a>ç¬¬09è¯¾ï¼šSpring Bootä¸­çš„åˆ‡é¢AOPå¤„ç†</h1><h2 id="1-ä»€ä¹ˆæ˜¯AOP"><a href="#1-ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="1. ä»€ä¹ˆæ˜¯AOP"></a>1. ä»€ä¹ˆæ˜¯AOP</h2><p>AOPï¼šAspect Oriented Programming çš„ç¼©å†™ï¼Œæ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚é¢å‘åˆ‡é¢ç¼–ç¨‹çš„ç›®æ ‡å°±æ˜¯åˆ†ç¦»å…³æ³¨ç‚¹ã€‚ä»€ä¹ˆæ˜¯å…³æ³¨ç‚¹å‘¢ï¼Ÿå°±æ˜¯å…³æ³¨ç‚¹ï¼Œå°±æ˜¯ä½ è¦åšçš„äº‹æƒ…ã€‚å‡å¦‚ä½ æ˜¯ä¸€ä½å…¬å­å“¥ï¼Œæ²¡å•¥äººç”Ÿç›®æ ‡ï¼Œæ¯å¤©è¡£æ¥ä¼¸æ‰‹ï¼Œé¥­æ¥å¼ å£ï¼Œæ•´å¤©åªçŸ¥é“ä¸€ä»¶äº‹ï¼šç©ï¼ˆè¿™å°±æ˜¯ä½ çš„å…³æ³¨ç‚¹ï¼Œä½ åªè¦åšè¿™ä¸€ä»¶äº‹ï¼‰ï¼ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œä½ åœ¨ç©ä¹‹å‰ï¼Œä½ è¿˜éœ€è¦èµ·åºŠã€ç©¿è¡£æœã€ç©¿é‹å­ã€å è¢«å­ã€åšæ—©é¥­ç­‰ç­‰ç­‰ç­‰ï¼Œä½†æ˜¯è¿™äº›äº‹æƒ…ä½ ä¸æƒ³å…³æ³¨ï¼Œä¹Ÿä¸ç”¨å…³æ³¨ï¼Œä½ åªæƒ³æƒ³ç©ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ  </p>
<p>å¯¹ï¼è¿™äº›äº‹æƒ…é€šé€šäº¤ç»™ä¸‹äººå»å¹²ã€‚ä½ æœ‰ä¸€ä¸ªä¸“é—¨çš„ä»†äºº A å¸®ä½ ç©¿è¡£æœï¼Œä»†äºº B å¸®ä½ ç©¿é‹å­ï¼Œä»†äºº C å¸®ä½ å å¥½è¢«å­ï¼Œä»†äºº D å¸®ä½ åšé¥­ï¼Œç„¶åä½ å°±å¼€å§‹åƒé¥­ã€å»ç©ï¼ˆè¿™å°±æ˜¯ä½ ä¸€å¤©çš„æ­£äº‹ï¼‰ï¼Œä½ å¹²å®Œä½ çš„æ­£äº‹ä¹‹åï¼Œå›æ¥ï¼Œç„¶åä¸€ç³»åˆ—ä»†äººåˆå¼€å§‹å¸®ä½ å¹²è¿™ä¸ªå¹²é‚£ä¸ªï¼Œç„¶åä¸€å¤©å°±ç»“æŸäº†ï¼  </p>
<p>è¿™å°±æ˜¯ AOPã€‚AOP çš„å¥½å¤„å°±æ˜¯ä½ åªéœ€è¦å¹²ä½ çš„æ­£äº‹ï¼Œå…¶å®ƒäº‹æƒ…åˆ«äººå¸®ä½ å¹²ã€‚ä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œä½ æƒ³è£¸å¥”ï¼Œä¸æƒ³ç©¿è¡£æœï¼Œé‚£ä¹ˆä½ æŠŠä»†äºº A è§£é›‡å°±æ˜¯äº†ï¼ä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œå‡ºé—¨ä¹‹å‰ä½ è¿˜æƒ³å¸¦ç‚¹é’±ï¼Œé‚£ä¹ˆä½ å†é›‡ä¸€ä¸ªä»†äºº E ä¸“é—¨å¸®ä½ å¹²å–é’±çš„æ´»ï¼è¿™å°±æ˜¯AOPã€‚æ¯ä¸ªäººå„å¸å…¶èŒï¼Œçµæ´»ç»„åˆï¼Œè¾¾åˆ°ä¸€ç§å¯é…ç½®çš„ã€å¯æ’æ‹”çš„ç¨‹åºç»“æ„ã€‚</p>
<h2 id="2-Spring-Boot-ä¸­çš„-AOP-å¤„ç†"><a href="#2-Spring-Boot-ä¸­çš„-AOP-å¤„ç†" class="headerlink" title="2. Spring Boot ä¸­çš„ AOP å¤„ç†"></a>2. Spring Boot ä¸­çš„ AOP å¤„ç†</h2><h3 id="2-1-AOP-ä¾èµ–"><a href="#2-1-AOP-ä¾èµ–" class="headerlink" title="2.1 AOP ä¾èµ–"></a>2.1 AOP ä¾èµ–</h3><p>ä½¿ç”¨AOPï¼Œé¦–å…ˆéœ€è¦å¼•å…¥AOPçš„ä¾èµ–ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-å®ç°-AOP-åˆ‡é¢"><a href="#2-2-å®ç°-AOP-åˆ‡é¢" class="headerlink" title="2.2 å®ç° AOP åˆ‡é¢"></a>2.2 å®ç° AOP åˆ‡é¢</h3><p>Spring Boot ä¸­ä½¿ç”¨ AOP éå¸¸ç®€å•ï¼Œå‡å¦‚æˆ‘ä»¬è¦åœ¨é¡¹ç›®ä¸­æ‰“å°ä¸€äº› logï¼Œåœ¨å¼•å…¥äº†ä¸Šé¢çš„ä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» LogAspectHandlerï¼Œç”¨æ¥å®šä¹‰åˆ‡é¢å’Œå¤„ç†æ–¹æ³•ã€‚åªè¦åœ¨ç±»ä¸ŠåŠ ä¸ª<code>@Aspect</code>æ³¨è§£å³å¯ã€‚<code>@Aspect</code> æ³¨è§£ç”¨æ¥æè¿°ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢ç±»çš„æ—¶å€™éœ€è¦æ‰“ä¸Šè¿™ä¸ªæ³¨è§£ã€‚<code>@Component</code> æ³¨è§£è®©è¯¥ç±»äº¤ç»™ Spring æ¥ç®¡ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ³¨è§£åŠä½¿ç”¨ï¼š</p>
<blockquote>
<p>1.@Pointcutï¼šå®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œå³ä¸Šé¢æ‰€æè¿°çš„å…³æ³¨çš„æŸä»¶äº‹å…¥å£ã€‚<br>2.@Beforeï¼šåœ¨åšæŸä»¶äº‹ä¹‹å‰åšçš„äº‹ã€‚<br>3.@Afterï¼šåœ¨åšæŸä»¶äº‹ä¹‹ååšçš„äº‹ã€‚<br>4.@AfterReturningï¼šåœ¨åšæŸä»¶äº‹ä¹‹åï¼Œå¯¹å…¶è¿”å›å€¼åšå¢å¼ºå¤„ç†ã€‚<br>5.@AfterThrowingï¼šåœ¨åšæŸä»¶äº‹æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå¤„ç†ã€‚</p>
</blockquote>
<h4 id="2-2-1-Pointcut-æ³¨è§£"><a href="#2-2-1-Pointcut-æ³¨è§£" class="headerlink" title="2.2.1 @Pointcut æ³¨è§£"></a>2.2.1 @Pointcut æ³¨è§£</h4><p><code>@Pointcut</code> æ³¨è§£ï¼šç”¨æ¥å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼Œå³ä¸Šæ–‡ä¸­æ‰€å…³æ³¨çš„æŸä»¶äº‹æƒ…çš„å…¥å£ã€‚åˆ‡å…¥ç‚¹å†³å®šäº†è¿æ¥ç‚¹å…³æ³¨çš„å†…å®¹ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ§åˆ¶é€šçŸ¥ä»€ä¹ˆæ—¶å€™æ‰§è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œæ‹¦æˆªcom.itcodai.course09.controlleråŒ…å’Œå­åŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itcodai.course09.controller..*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Pointcut</code> æ³¨è§£æŒ‡å®šä¸€ä¸ªåˆ‡é¢ï¼Œå®šä¹‰éœ€è¦æ‹¦æˆªçš„ä¸œè¥¿ï¼Œè¿™é‡Œä»‹ç»ä¸¤ä¸ªå¸¸ç”¨çš„è¡¨è¾¾å¼ï¼šä¸€ä¸ªæ˜¯ä½¿ç”¨ <code>execution()</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ä½¿ç”¨ <code>annotation()</code>ã€‚<br>ä»¥ <code>execution(* com.itcodai.course09.controller..*.*(..)))</code> è¡¨è¾¾å¼ä¸ºä¾‹ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>
<blockquote>
<p><code>execution()</code> ä¸ºè¡¨è¾¾å¼ä¸»ä½“<br>ç¬¬ä¸€ä¸ª <code>*</code> å·çš„ä½ç½®ï¼šè¡¨ç¤ºè¿”å›å€¼ç±»å‹ï¼Œ<code>*</code> è¡¨ç¤ºæ‰€æœ‰ç±»å‹<br>åŒ…åï¼šè¡¨ç¤ºéœ€è¦æ‹¦æˆªçš„åŒ…åï¼Œåé¢çš„ä¸¤ä¸ªå¥ç‚¹è¡¨ç¤ºå½“å‰åŒ…å’Œå½“å‰åŒ…çš„æ‰€æœ‰å­åŒ…ï¼Œ<code>com.itcodai.course09.controller</code> åŒ…ã€å­åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ–¹æ³•<br>ç¬¬äºŒä¸ª <code>*</code> å·çš„ä½ç½®ï¼šè¡¨ç¤ºç±»åï¼Œ<code>*</code> è¡¨ç¤ºæ‰€æœ‰ç±»<br><code>*(..)</code> ï¼šè¿™ä¸ªæ˜Ÿå·è¡¨ç¤ºæ–¹æ³•åï¼Œ<code>*</code> è¡¨ç¤ºæ‰€æœ‰çš„æ–¹æ³•ï¼Œåé¢æ‹¬å¼§é‡Œé¢è¡¨ç¤ºæ–¹æ³•çš„å‚æ•°ï¼Œä¸¤ä¸ªå¥ç‚¹è¡¨ç¤ºä»»ä½•å‚æ•°</p>
</blockquote>
<p><code>annotation()</code> æ–¹å¼æ˜¯é’ˆå¯¹æŸä¸ªæ³¨è§£æ¥å®šä¹‰åˆ‡é¢ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯¹å…·æœ‰<code>@GetMapping</code>æ³¨è§£çš„æ–¹æ³•åšåˆ‡é¢ï¼Œå¯ä»¥å¦‚ä¸‹å®šä¹‰åˆ‡é¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"@annotation(org.springframework.web.bind.annotation.GetMapping)"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">annotationCut</span><span class="params">()</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä½¿ç”¨è¯¥åˆ‡é¢çš„è¯ï¼Œå°±ä¼šåˆ‡å…¥æ³¨è§£æ˜¯ <code>@GetMapping</code> çš„æ–¹æ³•ã€‚å› ä¸ºåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½å¯¹äºä¸åŒçš„æ³¨è§£æœ‰ä¸åŒçš„é€»è¾‘å¤„ç†ï¼Œæ¯”å¦‚ <code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@DeleteMapping</code> ç­‰ã€‚æ‰€ä»¥è¿™ç§æŒ‰ç…§æ³¨è§£çš„åˆ‡å…¥æ–¹å¼åœ¨å®é™…é¡¹ç›®ä¸­ä¹Ÿå¾ˆå¸¸ç”¨ã€‚</p>
<h4 id="2-2-2-Before-æ³¨è§£"><a href="#2-2-2-Before-æ³¨è§£" class="headerlink" title="2.2.2 @Before æ³¨è§£"></a>2.2.2 @Before æ³¨è§£</h4><p><code>@Before</code> æ³¨è§£æŒ‡å®šçš„æ–¹æ³•åœ¨åˆ‡é¢åˆ‡å…¥ç›®æ ‡æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥åšä¸€äº› log å¤„ç†ï¼Œä¹Ÿå¯ä»¥åšä¸€äº›ä¿¡æ¯çš„ç»Ÿè®¡ï¼Œæ¯”å¦‚è·å–ç”¨æˆ·çš„è¯·æ±‚ url ä»¥åŠç”¨æˆ·çš„ ip åœ°å€ç­‰ç­‰ï¼Œè¿™ä¸ªåœ¨åšä¸ªäººç«™ç‚¹çš„æ—¶å€™éƒ½èƒ½ç”¨å¾—åˆ°ï¼Œéƒ½æ˜¯å¸¸ç”¨çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨ä¸Šé¢å®šä¹‰çš„åˆ‡é¢æ–¹æ³•ä¹‹å‰æ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint jointPoint</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"pointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"====doBeforeæ–¹æ³•è¿›å…¥äº†===="</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–ç­¾å</span></span><br><span class="line">        Signature signature = joinPoint.getSignature();</span><br><span class="line">        <span class="comment">// è·å–åˆ‡å…¥çš„åŒ…å</span></span><br><span class="line">        String declaringTypeName = signature.getDeclaringTypeName();</span><br><span class="line">        <span class="comment">// è·å–å³å°†æ‰§è¡Œçš„æ–¹æ³•å</span></span><br><span class="line">        String funcName = signature.getName();</span><br><span class="line">        logger.info(<span class="string">"å³å°†æ‰§è¡Œæ–¹æ³•ä¸º: &#123;&#125;ï¼Œå±äº&#123;&#125;åŒ…"</span>, funcName, declaringTypeName);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¹Ÿå¯ä»¥ç”¨æ¥è®°å½•ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚è·å–è¯·æ±‚çš„urlå’Œip</span></span><br><span class="line">        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        HttpServletRequest request = attributes.getRequest();</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚url</span></span><br><span class="line">        String url = request.getRequestURL().toString();</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚ip</span></span><br><span class="line">        String ip = request.getRemoteAddr();</span><br><span class="line">        logger.info(<span class="string">"ç”¨æˆ·è¯·æ±‚çš„urlä¸ºï¼š&#123;&#125;ï¼Œipåœ°å€ä¸ºï¼š&#123;&#125;"</span>, url, ip);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JointPoint å¯¹è±¡å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥ç”¨å®ƒæ¥è·å–ä¸€ä¸ªç­¾åï¼Œç„¶ååˆ©ç”¨ç­¾åå¯ä»¥è·å–è¯·æ±‚çš„åŒ…åã€æ–¹æ³•åï¼ŒåŒ…æ‹¬å‚æ•°ï¼ˆé€šè¿‡ <code>joinPoint.getArgs()</code> è·å–ï¼‰ç­‰ç­‰ã€‚</p>
<h4 id="2-2-3-After-æ³¨è§£"><a href="#2-2-3-After-æ³¨è§£" class="headerlink" title="2.2.3 @After æ³¨è§£"></a>2.2.3 @After æ³¨è§£</h4><p><code>@After</code> æ³¨è§£å’Œ <code>@Before</code>  æ³¨è§£ç›¸å¯¹åº”ï¼ŒæŒ‡å®šçš„æ–¹æ³•åœ¨åˆ‡é¢åˆ‡å…¥ç›®æ ‡æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥åšä¸€äº›å®ŒæˆæŸæ–¹æ³•ä¹‹åçš„ log å¤„ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œæ‹¦æˆªcom.itcodai.course09.controlleråŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itcodai.course09.controller..*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨ä¸Šé¢å®šä¹‰çš„åˆ‡é¢æ–¹æ³•ä¹‹åæ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint jointPoint</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"pointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfter</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"====doAfteræ–¹æ³•è¿›å…¥äº†===="</span>);</span><br><span class="line">        Signature signature = joinPoint.getSignature();</span><br><span class="line">        String method = signature.getName();</span><br><span class="line">        logger.info(<span class="string">"æ–¹æ³•&#123;&#125;å·²ç»æ‰§è¡Œå®Œ"</span>, method);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ª Controller æ¥æµ‹è¯•ä¸€ä¸‹æ‰§è¡Œç»“æœï¼Œæ–°å»ºä¸€ä¸ª AopController å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/aop"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AopController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/&#123;name&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testAop</span><span class="params">(@PathVariable String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/aop/CSDN</code>ï¼Œè§‚å¯Ÿä¸€ä¸‹æ§åˆ¶å°çš„è¾“å‡ºä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;doBeforeæ–¹æ³•è¿›å…¥äº†&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">å³å°†æ‰§è¡Œæ–¹æ³•ä¸º: testAopï¼Œå±äºcom.itcodai.course09.controller.AopControlleråŒ…  </span><br><span class="line">ç”¨æˆ·è¯·æ±‚çš„urlä¸ºï¼šhttp:&#x2F;&#x2F;localhost:8080&#x2F;aop&#x2F;nameï¼Œipåœ°å€ä¸ºï¼š0:0:0:0:0:0:0:1  </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;doAfteræ–¹æ³•è¿›å…¥äº†&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">æ–¹æ³•testAopå·²ç»æ‰§è¡Œå®Œ</span><br></pre></td></tr></table></figure>
<p>ä»æ‰“å°å‡ºæ¥çš„ log ä¸­å¯ä»¥çœ‹å‡ºç¨‹åºæ‰§è¡Œçš„é€»è¾‘ä¸é¡ºåºï¼Œå¯ä»¥å¾ˆç›´è§‚çš„æŒæ¡ <code>@Before</code> å’Œ <code>@After</code> ä¸¤ä¸ªæ³¨è§£çš„å®é™…ä½œç”¨ã€‚</p>
<h4 id="2-2-4-AfterReturning-æ³¨è§£"><a href="#2-2-4-AfterReturning-æ³¨è§£" class="headerlink" title="2.2.4 @AfterReturning æ³¨è§£"></a>2.2.4 @AfterReturning æ³¨è§£</h4><p><code>@AfterReturning</code> æ³¨è§£å’Œ <code>@After</code> æœ‰äº›ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº <code>@AfterReturning</code> æ³¨è§£å¯ä»¥ç”¨æ¥æ•è·åˆ‡å…¥æ–¹æ³•æ‰§è¡Œå®Œä¹‹åçš„è¿”å›å€¼ï¼Œå¯¹è¿”å›å€¼è¿›è¡Œä¸šåŠ¡é€»è¾‘ä¸Šçš„å¢å¼ºå¤„ç†ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨ä¸Šé¢å®šä¹‰çš„åˆ‡é¢æ–¹æ³•è¿”å›åæ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¯ä»¥æ•è·è¿”å›å¯¹è±¡æˆ–è€…å¯¹è¿”å›å¯¹è±¡è¿›è¡Œå¢å¼º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint joinPoint</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(pointcut = <span class="string">"pointCut()"</span>, returning = <span class="string">"result"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterReturning</span><span class="params">(JoinPoint joinPoint, Object result)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Signature signature = joinPoint.getSignature();</span><br><span class="line">        String classMethod = signature.getName();</span><br><span class="line">        logger.info(<span class="string">"æ–¹æ³•&#123;&#125;æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›å‚æ•°ä¸ºï¼š&#123;&#125;"</span>, classMethod, result);</span><br><span class="line">        <span class="comment">// å®é™…é¡¹ç›®ä¸­å¯ä»¥æ ¹æ®ä¸šåŠ¡åšå…·ä½“çš„è¿”å›å€¼å¢å¼º</span></span><br><span class="line">        logger.info(<span class="string">"å¯¹è¿”å›å‚æ•°è¿›è¡Œä¸šåŠ¡ä¸Šçš„å¢å¼ºï¼š&#123;&#125;"</span>, result + <span class="string">"å¢å¼ºç‰ˆ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨ <code>@AfterReturning</code>æ³¨è§£ ä¸­ï¼Œå±æ€§ <code>returning</code> çš„å€¼å¿…é¡»è¦å’Œå‚æ•°ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šæ£€æµ‹ä¸åˆ°ã€‚è¯¥æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå…¥å‚å°±æ˜¯è¢«åˆ‡æ–¹æ³•çš„è¿”å›å€¼ï¼Œåœ¨ <code>doAfterReturning</code> æ–¹æ³•ä¸­å¯ä»¥å¯¹è¿”å›å€¼è¿›è¡Œå¢å¼ºï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦åšç›¸åº”çš„å°è£…ã€‚æˆ‘ä»¬é‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œå†æµ‹è¯•ä¸€ä¸‹ï¼ˆå¤šä½™çš„ log æˆ‘ä¸è´´å‡ºæ¥äº†ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•testAopæ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›å‚æ•°ä¸ºï¼šHello CSDN  </span><br><span class="line">å¯¹è¿”å›å‚æ•°è¿›è¡Œä¸šåŠ¡ä¸Šçš„å¢å¼ºï¼šHello CSDNå¢å¼ºç‰ˆ</span><br></pre></td></tr></table></figure>

<h4 id="2-2-5-AfterThrowing-æ³¨è§£"><a href="#2-2-5-AfterThrowing-æ³¨è§£" class="headerlink" title="2.2.5 @AfterThrowing æ³¨è§£"></a>2.2.5 @AfterThrowing æ³¨è§£</h4><p>é¡¾åæ€ä¹‰ï¼Œ<code>@AfterThrowing</code> æ³¨è§£æ˜¯å½“è¢«åˆ‡æ–¹æ³•æ‰§è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œä¼šè¿›å…¥ <code>@AfterThrowing</code> æ³¨è§£çš„æ–¹æ³•ä¸­æ‰§è¡Œï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å¯ä»¥åšä¸€äº›å¼‚å¸¸çš„å¤„ç†é€»è¾‘ã€‚è¦æ³¨æ„çš„æ˜¯ <code>throwing</code> å±æ€§çš„å€¼å¿…é¡»è¦å’Œå‚æ•°ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¯¥æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå…¥å‚å³ä¸ºæŠ›å‡ºçš„å¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨AOPå¤„ç†log</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/05/04 20:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨ä¸Šé¢å®šä¹‰çš„åˆ‡é¢æ–¹æ³•æ‰§è¡ŒæŠ›å¼‚å¸¸æ—¶ï¼Œæ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint jointPoint</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex ex</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(pointcut = <span class="string">"pointCut()"</span>, throwing = <span class="string">"ex"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">(JoinPoint joinPoint, Throwable ex)</span> </span>&#123;</span><br><span class="line">        Signature signature = joinPoint.getSignature();</span><br><span class="line">        String method = signature.getName();</span><br><span class="line">        <span class="comment">// å¤„ç†å¼‚å¸¸çš„é€»è¾‘</span></span><br><span class="line">        logger.info(<span class="string">"æ‰§è¡Œæ–¹æ³•&#123;&#125;å‡ºé”™ï¼Œå¼‚å¸¸ä¸ºï¼š&#123;&#125;"</span>, method, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•æˆ‘å°±ä¸æµ‹è¯•äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œæµ‹è¯•ä¸€ä¸‹ã€‚</p>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾é’ˆå¯¹ Spring Boot ä¸­çš„åˆ‡é¢ AOP åšäº†è¯¦ç»†çš„è®²è§£ï¼Œä¸»è¦ä»‹ç»äº† Spring Boot ä¸­ AOP çš„å¼•å…¥ï¼Œå¸¸ç”¨æ³¨è§£çš„ä½¿ç”¨ï¼Œå‚æ•°çš„ä½¿ç”¨ï¼Œä»¥åŠå¸¸ç”¨ api çš„ä»‹ç»ã€‚AOP åœ¨å®é™…é¡¹ç›®ä¸­å¾ˆæœ‰ç”¨ï¼Œå¯¹åˆ‡é¢æ–¹æ³•æ‰§è¡Œå‰åéƒ½å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡ï¼Œåšç›¸åº”çš„é¢„å¤„ç†æˆ–è€…å¢å¼ºå¤„ç†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨ä½œå¼‚å¸¸æ•è·å¤„ç†ï¼Œå¯ä»¥æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯ï¼Œåˆç†å»ä½¿ç”¨ AOPã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬10è¯¾ï¼šSpring-Booté›†æˆMyBatis"><a href="#ç¬¬10è¯¾ï¼šSpring-Booté›†æˆMyBatis" class="headerlink" title="ç¬¬10è¯¾ï¼šSpring Booté›†æˆMyBatis"></a>ç¬¬10è¯¾ï¼šSpring Booté›†æˆMyBatis</h1><h2 id="1-MyBatis-ä»‹ç»"><a href="#1-MyBatis-ä»‹ç»" class="headerlink" title="1. MyBatis ä»‹ç»"></a>1. MyBatis ä»‹ç»</h2><p>å¤§å®¶éƒ½çŸ¥é“ï¼ŒMyBatis æ¡†æ¶æ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶ï¼Œæ˜¯ Apache ä¸‹çš„é¡¶çº§é¡¹ç›®ã€‚Mybatis å¯ä»¥è®©å¼€å‘è€…çš„ä¸»è¦ç²¾åŠ›æ”¾åœ¨ sql ä¸Šï¼Œé€šè¿‡ Mybatis æä¾›çš„æ˜ å°„æ–¹å¼ï¼Œè‡ªç”±çµæ´»çš„ç”Ÿæˆæ»¡è¶³éœ€è¦çš„ sql è¯­å¥ã€‚ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ï¼Œåœ¨å›½å†…å¯è°“æ˜¯å æ®äº†åŠå£æ±Ÿå±±ã€‚æœ¬èŠ‚è¯¾ç¨‹ä¸»è¦é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å¯¹ Spring Boot é›†æˆ MyBatis åšä¸€è®²è§£ã€‚é‡ç‚¹è®²è§£ä¸€ä¸‹åŸºäºæ³¨è§£çš„æ–¹å¼ã€‚å› ä¸ºå®é™…é¡¹ç›®ä¸­ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ›´å¤šä¸€ç‚¹ï¼Œæ›´ç®€æ´ä¸€ç‚¹ï¼Œçœå»äº†å¾ˆå¤š xml é…ç½®ï¼ˆè¿™ä¸æ˜¯ç»å¯¹çš„ï¼Œæœ‰äº›é¡¹ç›®ç»„ä¸­å¯èƒ½ä¹Ÿåœ¨ä½¿ç”¨ xml çš„æ–¹å¼ï¼‰ã€‚</p>
<h2 id="2-MyBatis-çš„é…ç½®"><a href="#2-MyBatis-çš„é…ç½®" class="headerlink" title="2. MyBatis çš„é…ç½®"></a>2. MyBatis çš„é…ç½®</h2><h2 id="2-1-ä¾èµ–å¯¼å…¥"><a href="#2-1-ä¾èµ–å¯¼å…¥" class="headerlink" title="2.1 ä¾èµ–å¯¼å…¥"></a>2.1 ä¾èµ–å¯¼å…¥</h2><p>Spring Boot é›†æˆ MyBatisï¼Œéœ€è¦å¯¼å…¥ <code>mybatis-spring-boot-starter</code> å’Œ mysql çš„ä¾èµ–ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬æ—¶ 1.3.2ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç‚¹å¼€ <code>mybatis-spring-boot-starter</code> ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨ Spring æ—¶å€™ç†Ÿæ‚‰çš„ä¾èµ–ï¼Œå°±åƒæˆ‘åœ¨è¯¾ç¨‹çš„ä¸€å¼€å§‹ä»‹ç»çš„é‚£æ ·ï¼ŒSpring Boot è‡´åŠ›äºç®€åŒ–ç¼–ç ï¼Œä½¿ç”¨ starter ç³»åˆ—å°†ç›¸å…³ä¾èµ–é›†æˆåœ¨ä¸€èµ·ï¼Œå¼€å‘è€…ä¸éœ€è¦å…³æ³¨ç¹ççš„é…ç½®ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çœå»å…¶ä»– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-properties-ymlé…ç½®"><a href="#2-2-properties-ymlé…ç½®" class="headerlink" title="2.2 properties.ymlé…ç½®"></a>2.2 properties.ymlé…ç½®</h2><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ï¼Œé›†æˆ MyBatis æ—¶éœ€è¦åœ¨ properties.yml é…ç½®æ–‡ä»¶ä¸­åšå“ªäº›åŸºæœ¬é…ç½®å‘¢ï¼Ÿ</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># æœåŠ¡ç«¯å£å·</span><br><span class="line">server:</span><br><span class="line">  port: 8080</span><br><span class="line"></span><br><span class="line"># æ•°æ®åº“åœ°å€</span><br><span class="line">datasource:</span><br><span class="line">  url: localhost:3306/blog_test</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">  datasource: # æ•°æ®åº“é…ç½®</span><br><span class="line">    driver-class-name: com.mysql.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://$&#123;datasource.url&#125;?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;allowMultiQueries=true&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;maxReconnects=10</span><br><span class="line">    username: root</span><br><span class="line">    password: 123456</span><br><span class="line">    hikari:</span><br><span class="line">      maximum-pool-size: 10 # æœ€å¤§è¿æ¥æ± æ•°</span><br><span class="line">      max-lifetime: 1770000</span><br><span class="line"></span><br><span class="line">mybatis:</span><br><span class="line">  # æŒ‡å®šåˆ«åè®¾ç½®çš„åŒ…ä¸ºæ‰€æœ‰entity</span><br><span class="line">  type-aliases-package: com.itcodai.course10.entity</span><br><span class="line">  configuration:</span><br><span class="line">    map-underscore-to-camel-case: true # é©¼å³°å‘½åè§„èŒƒ</span><br><span class="line">  mapper-locations: # mapperæ˜ å°„æ–‡ä»¶ä½ç½®</span><br><span class="line">    - classpath:mapper/*.xml</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šé¢çš„è¿™äº›é…ç½®ï¼šå…³äºæ•°æ®åº“çš„ç›¸å…³é…ç½®ï¼Œæˆ‘å°±ä¸è¯¦ç»†çš„è§£è¯´äº†ï¼Œè¿™ç‚¹ç›¸ä¿¡å¤§å®¶å·²ç»éå¸¸ç†Ÿç»ƒäº†ï¼Œé…ç½®ä¸€ä¸‹ç”¨æˆ·åã€å¯†ç ã€æ•°æ®åº“è¿æ¥ç­‰ç­‰ï¼Œè¿™é‡Œä½¿ç”¨çš„è¿æ¥æ± æ˜¯ Spring Boot è‡ªå¸¦çš„ hikariï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å»ç™¾åº¦æˆ–è€…è°·æ­Œæœä¸€æœï¼Œäº†è§£ä¸€ä¸‹ã€‚  </p>
<p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ <code>map-underscore-to-camel-case: true</code>ï¼Œ ç”¨æ¥å¼€å¯é©¼å³°å‘½åè§„èŒƒï¼Œè¿™ä¸ªæ¯”è¾ƒå¥½ç”¨ï¼Œæ¯”å¦‚æ•°æ®åº“ä¸­å­—æ®µåä¸ºï¼š<code>user_name</code>ï¼Œ é‚£ä¹ˆåœ¨å®ä½“ç±»ä¸­å¯ä»¥å®šä¹‰å±æ€§ä¸º <code>userName</code> ï¼ˆç”šè‡³å¯ä»¥å†™æˆ <code>username</code>ï¼Œä¹Ÿèƒ½æ˜ å°„ä¸Šï¼‰ï¼Œä¼šè‡ªåŠ¨åŒ¹é…åˆ°é©¼å³°å±æ€§ï¼Œå¦‚æœä¸è¿™æ ·é…ç½®çš„è¯ï¼Œé’ˆå¯¹å­—æ®µåå’Œå±æ€§åä¸åŒçš„æƒ…å†µï¼Œä¼šæ˜ å°„ä¸åˆ°ã€‚</p>
<h2 id="3-åŸºäº-xml-çš„æ•´åˆ"><a href="#3-åŸºäº-xml-çš„æ•´åˆ" class="headerlink" title="3. åŸºäº xml çš„æ•´åˆ"></a>3. åŸºäº xml çš„æ•´åˆ</h2><p>ä½¿ç”¨åŸå§‹çš„ xml æ–¹å¼ï¼Œéœ€è¦æ–°å»º UserMapper.xml æ–‡ä»¶ï¼Œåœ¨ä¸Šé¢çš„ application.yml é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®šä¹‰äº† xml æ–‡ä»¶çš„è·¯å¾„ï¼š<code>classpath:mapper/*.xml</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ resources ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª mapper æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª UserMapper.xml æ–‡ä»¶ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itcodai.course10.dao.UserMapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"com.itcodai.course10.entity.User"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">jdbcType</span>=<span class="string">"BIGINT"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_name"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"username"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getUserByName"</span> <span class="attr">resultType</span>=<span class="string">"User"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span>&gt;</span></span><br><span class="line">       select * from user where user_name = #&#123;username&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™å’Œæ•´åˆ Spring ä¸€æ ·çš„ï¼Œnamespace ä¸­æŒ‡å®šçš„æ˜¯å¯¹åº”çš„ Mapperï¼Œ <code>&lt;resultMap&gt;</code> ä¸­æŒ‡å®šå¯¹åº”çš„å®ä½“ç±»ï¼Œå³ Userã€‚ç„¶ååœ¨å†…éƒ¨æŒ‡å®šè¡¨çš„å­—æ®µå’Œå®ä½“çš„å±æ€§ç›¸å¯¹åº”å³å¯ã€‚è¿™é‡Œæˆ‘ä»¬å†™ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·çš„ sqlã€‚  </p>
<p>å®ä½“ç±»ä¸­æœ‰ idï¼Œusername å’Œ passwordï¼Œæˆ‘ä¸åœ¨è¿™è´´ä»£ç ï¼Œå¤§å®¶å¯ä»¥ä¸‹è½½æºç æŸ¥çœ‹ã€‚UserMapper.java æ–‡ä»¶ä¸­å†™ä¸€ä¸ªæ¥å£å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">User <span class="title">getUserByName</span><span class="params">(String username)</span></span>;</span><br></pre></td></tr></table></figure>

<p>ä¸­é—´çœç•¥ service çš„ä»£ç ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ª Controller æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/getUserByName/&#123;name&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserByName</span><span class="params">(@PathVariable String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.getUserByName(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>http://localhost:8080/getUserByName/CSDN</code> å³å¯æŸ¥è¯¢åˆ°æ•°æ®åº“è¡¨ä¸­ç”¨æˆ·åä¸º CSDN çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆäº‹å…ˆæä¸¤ä¸ªæ•°æ®è¿›å»å³å¯ï¼‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"username"</span>:<span class="string">"CSDN"</span>,<span class="attr">"password"</span>:<span class="string">"123456"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼šSpring Boot å¦‚ä½•çŸ¥é“è¿™ä¸ª Mapper å‘¢ï¼Ÿä¸€ç§æ–¹æ³•æ˜¯åœ¨ä¸Šé¢çš„ mapper å±‚å¯¹åº”çš„ç±»ä¸Šé¢æ·»åŠ  <code>@Mapper</code> æ³¨è§£å³å¯ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•æœ‰ä¸ªå¼Šç«¯ï¼Œå½“æˆ‘ä»¬æœ‰å¾ˆå¤šä¸ª mapper æ—¶ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªç±»ä¸Šé¢éƒ½å¾—æ·»åŠ  <code>@Mapper</code> æ³¨è§£ã€‚å¦ä¸€ç§æ¯”è¾ƒç®€ä¾¿çš„æ–¹æ³•æ˜¯åœ¨ Spring Boot å¯åŠ¨ç±»ä¸Šæ·»åŠ <code>@MaperScan</code> æ³¨è§£ï¼Œæ¥æ‰«æä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ mapperã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.itcodai.course10.dao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course10Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Course10Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯ï¼Œ<code>com.itcodai.course10.dao</code> åŒ…ä¸‹çš„æ‰€æœ‰ mapper éƒ½ä¼šè¢«æ‰«æåˆ°äº†ã€‚</p>
<h2 id="4-åŸºäºæ³¨è§£çš„æ•´åˆ"><a href="#4-åŸºäºæ³¨è§£çš„æ•´åˆ" class="headerlink" title="4. åŸºäºæ³¨è§£çš„æ•´åˆ"></a>4. åŸºäºæ³¨è§£çš„æ•´åˆ</h2><p>åŸºäºæ³¨è§£çš„æ•´åˆå°±ä¸éœ€è¦ xml é…ç½®æ–‡ä»¶äº†ï¼ŒMyBatis ä¸»è¦æä¾›äº† <code>@Select</code>ï¼Œ <code>@Insert</code>ï¼Œ <code>@Update</code>ï¼Œ <code>Delete</code> å››ä¸ªæ³¨è§£ã€‚è¿™å››ä¸ªæ³¨è§£æ˜¯ç”¨çš„éå¸¸å¤šçš„ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œæ³¨è§£åé¢è·Ÿä¸Šå¯¹åº”çš„ sql è¯­å¥å³å¯ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125;"</span>)</span><br><span class="line"><span class="function">User <span class="title">getUser</span><span class="params">(Long id)</span></span>;</span><br></pre></td></tr></table></figure>
<p>è¿™è·Ÿ xml æ–‡ä»¶ä¸­å†™ sql è¯­å¥æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å°±ä¸éœ€è¦ xml æ–‡ä»¶äº†ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œæœ‰äººå¯èƒ½ä¼šé—®ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªå‚æ•°å‘¢ï¼Ÿå¦‚æœæ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>@Param</code> æ³¨è§£æ¥æŒ‡å®šæ¯ä¸€ä¸ªå‚æ•°çš„å¯¹åº”å…³ç³»ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125; and user_name=#&#123;name&#125;"</span>)</span><br><span class="line"><span class="function">User <span class="title">getUserByIdAndName</span><span class="params">(@Param(<span class="string">"id"</span>)</span> Long id, @<span class="title">Param</span><span class="params">(<span class="string">"name"</span>)</span> String username)</span>;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œ<code>@Param</code> æŒ‡å®šçš„å‚æ•°åº”è¯¥è¦å’Œ sql ä¸­ <code>#{}</code> å–çš„å‚æ•°åç›¸åŒï¼Œä¸åŒåˆ™å–ä¸åˆ°ã€‚å¯ä»¥åœ¨ controller ä¸­è‡ªè¡Œæµ‹è¯•ä¸€ä¸‹ï¼Œæ¥å£éƒ½åœ¨æºç ä¸­ï¼Œæ–‡ç« ä¸­æˆ‘å°±ä¸è´´æµ‹è¯•ä»£ç å’Œç»“æœäº†ã€‚  </p>
<p>æœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨è®¾è®¡è¡¨å­—æ®µåï¼Œéƒ½ä¼šæ ¹æ®è‡ªåŠ¨ç”Ÿæˆå·¥å…·ç”Ÿæˆå®ä½“ç±»ï¼Œè¿™æ ·çš„è¯ï¼ŒåŸºæœ¬ä¸Šå®ä½“ç±»æ˜¯èƒ½å’Œè¡¨å­—æ®µå¯¹åº”ä¸Šçš„ï¼Œæœ€èµ·ç ä¹Ÿæ˜¯é©¼å³°å¯¹åº”çš„ï¼Œç”±äºåœ¨ä¸Šé¢é…ç½®æ–‡ä»¶ä¸­å¼€å¯äº†é©¼å³°çš„é…ç½®ï¼Œæ‰€ä»¥å­—æ®µéƒ½æ˜¯èƒ½å¯¹çš„ä¸Šçš„ã€‚ä½†æ˜¯ï¼Œä¸‡ä¸€æœ‰å¯¹ä¸ä¸Šçš„å‘¢ï¼Ÿæˆ‘ä»¬ä¹Ÿæœ‰è§£å†³åŠæ³•ï¼Œä½¿ç”¨ <code>@Results</code> æ³¨è§£æ¥è§£å†³ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125;"</span>)</span><br><span class="line"><span class="meta">@Results</span>(&#123;</span><br><span class="line">        <span class="meta">@Result</span>(property = <span class="string">"username"</span>, column = <span class="string">"user_name"</span>),</span><br><span class="line">        <span class="meta">@Result</span>(property = <span class="string">"password"</span>, column = <span class="string">"password"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">User <span class="title">getUser</span><span class="params">(Long id)</span></span>;</span><br></pre></td></tr></table></figure>
<p><code>@Results</code> ä¸­çš„ <code>@Result</code> æ³¨è§£æ˜¯ç”¨æ¥æŒ‡å®šæ¯ä¸€ä¸ªå±æ€§å’Œå­—æ®µçš„å¯¹åº”å…³ç³»ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥è§£å†³ä¸Šé¢è¯´çš„è¿™ä¸ªé—®é¢˜äº†ã€‚  </p>
<p>å½“ç„¶äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ xml å’Œæ³¨è§£ç›¸ç»“åˆä½¿ç”¨ï¼Œç›®å‰æˆ‘ä»¬å®é™…çš„é¡¹ç›®ä¸­ä¹Ÿæ˜¯é‡‡ç”¨æ··ç”¨çš„æ–¹å¼ï¼Œå› ä¸ºæœ‰æ—¶å€™ xml æ–¹ä¾¿ï¼Œæœ‰æ—¶å€™æ³¨è§£æ–¹ä¾¿ï¼Œæ¯”å¦‚å°±ä¸Šé¢è¿™ä¸ªé—®é¢˜æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä¸Šé¢çš„è¿™ä¸ª UserMapper.xmlï¼Œé‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ <code>@ResultMap</code> æ³¨è§£æ¥æ›¿ä»£ <code>@Results</code> æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125;"</span>)</span><br><span class="line"><span class="meta">@ResultMap</span>(<span class="string">"BaseResultMap"</span>)</span><br><span class="line"><span class="function">User <span class="title">getUser</span><span class="params">(Long id)</span></span>;</span><br></pre></td></tr></table></figure>
<p><code>@ResultMap</code> æ³¨è§£ä¸­çš„å€¼ä»å“ªæ¥å‘¢ï¼Ÿå¯¹åº”çš„æ˜¯ UserMapper.xml æ–‡ä»¶ä¸­å®šä¹‰çš„ <code>&lt;resultMap&gt;</code> æ—¶å¯¹åº”çš„ id å€¼ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"com.itcodai.course10.entity.User"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§ xml å’Œæ³¨è§£ç»“åˆç€ä½¿ç”¨çš„æƒ…å†µä¹Ÿå¾ˆå¸¸è§ï¼Œè€Œä¸”ä¹Ÿå‡å°‘äº†å¤§é‡çš„ä»£ç ï¼Œå› ä¸º xml æ–‡ä»¶å¯ä»¥ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆå·¥å…·å»ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦äººä¸ºæ‰‹åŠ¨æ•²ï¼Œæ‰€ä»¥è¿™ç§ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆå¸¸è§ã€‚</p>
<h2 id="5-æ€»ç»“-3"><a href="#5-æ€»ç»“-3" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾ä¸»è¦ç³»ç»Ÿçš„è®²è§£äº† Spring Boot é›†æˆ MyBatis çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºåŸºäº xml å½¢å¼å’ŒåŸºäºæ³¨è§£çš„å½¢å¼æ¥è®²è§£ï¼Œé€šè¿‡å®é™…é…ç½®æ‰‹æŠŠæ‰‹è®²è§£äº† Spring Boot ä¸­ MyBatis çš„ä½¿ç”¨æ–¹å¼ï¼Œå¹¶é’ˆå¯¹æ³¨è§£æ–¹å¼ï¼Œè®²è§£äº†å¸¸è§çš„é—®é¢˜å·²ç»è§£å†³æ–¹å¼ï¼Œæœ‰å¾ˆå¼ºçš„å®æˆ˜æ„ä¹‰ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®å®é™…æƒ…å†µæ¥ç¡®å®šä½¿ç”¨å“ªç§æ–¹å¼ï¼Œä¸€èˆ¬ xml å’Œæ³¨è§£éƒ½åœ¨ç”¨ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬11è¯¾ï¼šSpring-Bootäº‹åŠ¡é…ç½®ç®¡ç†"><a href="#ç¬¬11è¯¾ï¼šSpring-Bootäº‹åŠ¡é…ç½®ç®¡ç†" class="headerlink" title="ç¬¬11è¯¾ï¼šSpring Bootäº‹åŠ¡é…ç½®ç®¡ç†"></a>ç¬¬11è¯¾ï¼šSpring Bootäº‹åŠ¡é…ç½®ç®¡ç†</h1><h2 id="1-äº‹åŠ¡ç›¸å…³"><a href="#1-äº‹åŠ¡ç›¸å…³" class="headerlink" title="1. äº‹åŠ¡ç›¸å…³"></a>1. äº‹åŠ¡ç›¸å…³</h2><p>åœºæ™¯ï¼šæˆ‘ä»¬åœ¨å¼€å‘ä¼ä¸šåº”ç”¨æ—¶ï¼Œç”±äºæ•°æ®æ“ä½œåœ¨é¡ºåºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œçº¿ä¸Šå¯èƒ½æœ‰å„ç§æ— æ³•é¢„çŸ¥çš„é—®é¢˜ï¼Œä»»ä½•ä¸€æ­¥æ“ä½œéƒ½æœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸ï¼Œå¼‚å¸¸åˆ™ä¼šå¯¼è‡´åç»­çš„æ“ä½œæ— æ³•å®Œæˆã€‚æ­¤æ—¶ç”±äºä¸šåŠ¡é€»è¾‘å¹¶æœªæ­£ç¡®çš„å®Œæˆï¼Œæ‰€ä»¥åœ¨ä¹‹å‰æ“ä½œè¿‡æ•°æ®åº“çš„åŠ¨ä½œå¹¶ä¸å¯é ï¼Œéœ€è¦åœ¨è¿™ç§æƒ…å†µä¸‹è¿›è¡Œæ•°æ®çš„å›æ»šã€‚  </p>
<p>äº‹åŠ¡çš„ä½œç”¨å°±æ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œéƒ½æ˜¯å¯é çš„ï¼Œäº‹åŠ¡ä¸­çš„æ¯ä¸€æ­¥æ“ä½œéƒ½å¿…é¡»æˆåŠŸæ‰§è¡Œï¼Œåªè¦æœ‰å‘ç”Ÿå¼‚å¸¸å°±å›é€€åˆ°äº‹åŠ¡å¼€å§‹æœªè¿›è¡Œæ“ä½œçš„çŠ¶æ€ã€‚è¿™å¾ˆå¥½ç†è§£ï¼Œè½¬è´¦ã€è´­ç¥¨ç­‰ç­‰ï¼Œå¿…é¡»æ•´ä¸ªäº‹ä»¶æµç¨‹å…¨éƒ¨æ‰§è¡Œå®Œæ‰èƒ½äººä¸ºè¯¥äº‹ä»¶æ‰§è¡ŒæˆåŠŸï¼Œä¸èƒ½è½¬é’±è½¬åˆ°ä¸€åŠï¼Œç³»ç»Ÿæ­»äº†ï¼Œè½¬è´¦äººé’±æ²¡äº†ï¼Œæ”¶æ¬¾äººé’±è¿˜æ²¡åˆ°ã€‚</p>
<p>äº‹åŠ¡ç®¡ç†æ˜¯ Spring Boot æ¡†æ¶ä¸­æœ€ä¸ºå¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæˆ‘ä»¬åœ¨å®é™…åº”ç”¨å¼€å‘æ—¶ï¼ŒåŸºæœ¬ä¸Šåœ¨ service å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™éƒ½è¦åŠ ä¸Šäº‹åŠ¡ï¼Œå½“ç„¶äº†ï¼Œæœ‰æ—¶å€™å¯èƒ½ç”±äºåœºæ™¯éœ€è¦ï¼Œä¹Ÿä¸ç”¨åŠ äº‹åŠ¡ï¼ˆæ¯”å¦‚æˆ‘ä»¬å°±è¦å¾€ä¸€ä¸ªè¡¨é‡Œæ’æ•°æ®ï¼Œç›¸äº’æ²¡æœ‰å½±å“ï¼Œæ’å¤šå°‘æ˜¯å¤šå°‘ï¼Œä¸èƒ½å› ä¸ºæŸä¸ªæ•°æ®æŒ‚äº†ï¼ŒæŠŠä¹‹å‰æ’çš„å…¨éƒ¨å›æ»šï¼‰ã€‚</p>
<h2 id="2-Spring-Boot-äº‹åŠ¡é…ç½®"><a href="#2-Spring-Boot-äº‹åŠ¡é…ç½®" class="headerlink" title="2. Spring Boot äº‹åŠ¡é…ç½®"></a>2. Spring Boot äº‹åŠ¡é…ç½®</h2><h3 id="2-1-ä¾èµ–å¯¼å…¥-1"><a href="#2-1-ä¾èµ–å¯¼å…¥-1" class="headerlink" title="2.1 ä¾èµ–å¯¼å…¥"></a>2.1 ä¾èµ–å¯¼å…¥</h3><p>åœ¨ Spring Boot ä¸­ä½¿ç”¨äº‹åŠ¡ï¼Œéœ€è¦å¯¼å…¥ mysql ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥äº† mysql ä¾èµ–åï¼ŒSpring Boot ä¼šè‡ªåŠ¨æ³¨å…¥ DataSourceTransactionManagerï¼Œæˆ‘ä»¬ä¸éœ€è¦ä»»ä½•å…¶ä»–çš„é…ç½®å°±å¯ä»¥ç”¨ <code>@Transactional</code> æ³¨è§£è¿›è¡Œäº‹åŠ¡çš„ä½¿ç”¨ã€‚å…³äº mybatis çš„é…ç½®ï¼Œåœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­å·²ç»è¯´æ˜äº†ï¼Œè¿™é‡Œè¿˜æ˜¯ä½¿ç”¨ä¸Šä¸€èŠ‚è¯¾ä¸­çš„ mybatis é…ç½®å³å¯ã€‚  </p>
<h3 id="2-2-äº‹åŠ¡çš„æµ‹è¯•"><a href="#2-2-äº‹åŠ¡çš„æµ‹è¯•" class="headerlink" title="2.2 äº‹åŠ¡çš„æµ‹è¯•"></a>2.2 äº‹åŠ¡çš„æµ‹è¯•</h3><p>æˆ‘ä»¬é¦–å…ˆåœ¨æ•°æ®åº“è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼š<br>|id|user_name|password|<br>|:â€“:|:â€“:|:â€“:|<br>|1|å€ªå‡æ­¦|123456|</p>
<p>ç„¶åæˆ‘ä»¬å†™ä¸€ä¸ªæ’å…¥çš„ mapperï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into user (user_name, password) values (#&#123;username&#125;, #&#123;password&#125;)"</span>)</span><br><span class="line">    <span class="function">Integer <span class="title">insertUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OKï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ Spring Boot ä¸­çš„äº‹åŠ¡å¤„ç†ï¼Œåœ¨ service å±‚ï¼Œæˆ‘ä»¬æ‰‹åŠ¨æŠ›å‡ºä¸ªå¼‚å¸¸æ¥æ¨¡æ‹Ÿå®é™…ä¸­å‡ºç°çš„å¼‚å¸¸ï¼Œç„¶åè§‚å¯Ÿä¸€ä¸‹äº‹åŠ¡æœ‰æ²¡æœ‰å›æ»šï¼Œå¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰æ–°çš„è®°å½•ï¼Œåˆ™è¯´æ˜äº‹åŠ¡å›æ»šæˆåŠŸã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">isertUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ’å…¥ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        userMapper.insertUser(user);</span><br><span class="line">        <span class="comment">// æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/adduser"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addUser</span><span class="params">(@RequestBody User user)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != user) &#123;</span><br><span class="line">            userService.isertUser(user);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"false"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨ postman è°ƒç”¨ä¸€ä¸‹è¯¥æ¥å£ï¼Œå› ä¸ºåœ¨ç¨‹åºä¸­æŠ›å‡ºäº†ä¸ªå¼‚å¸¸ï¼Œä¼šé€ æˆäº‹åŠ¡å›æ»šï¼Œæˆ‘ä»¬åˆ·æ–°ä¸€ä¸‹æ•°æ®åº“ï¼Œå¹¶æ²¡æœ‰å¢åŠ ä¸€æ¡è®°å½•ï¼Œè¯´æ˜äº‹åŠ¡ç”Ÿæ•ˆäº†ã€‚äº‹åŠ¡å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰å¤šå°‘é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸ä»…ä»…å¦‚æ­¤â€¦â€¦</p>
<h2 id="3-å¸¸è§é—®é¢˜æ€»ç»“"><a href="#3-å¸¸è§é—®é¢˜æ€»ç»“" class="headerlink" title="3. å¸¸è§é—®é¢˜æ€»ç»“"></a>3. å¸¸è§é—®é¢˜æ€»ç»“</h2><p>ä»ä¸Šé¢çš„å†…å®¹ä¸­å¯ä»¥çœ‹å‡ºï¼ŒSpring Boot ä¸­ä½¿ç”¨äº‹åŠ¡éå¸¸ç®€å•ï¼Œ<code>@Transactional</code> æ³¨è§£å³å¯è§£å†³é—®é¢˜ï¼Œè¯´æ˜¯è¿™ä¹ˆè¯´ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ˜¯æœ‰å¾ˆå¤šå°å‘åœ¨ç­‰ç€æˆ‘ä»¬ï¼Œè¿™äº›å°å‘æ˜¯æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™æ²¡æœ‰æ³¨æ„åˆ°ï¼Œè€Œä¸”æ­£å¸¸æƒ…å†µä¸‹ä¸å®¹æ˜“å‘ç°è¿™äº›å°å‘ï¼Œç­‰é¡¹ç›®å†™å¤§äº†ï¼ŒæŸä¸€å¤©çªç„¶å‡ºé—®é¢˜äº†ï¼Œæ’æŸ¥é—®é¢˜éå¸¸å›°éš¾ï¼Œåˆ°æ—¶å€™è‚¯å®šæ˜¯æŠ“çï¼Œéœ€è¦è´¹å¾ˆå¤§çš„ç²¾åŠ›å»æ’æŸ¥é—®é¢˜ã€‚  </p>
<p>è¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä¸“é—¨é’ˆå¯¹å®é™…é¡¹ç›®ä¸­ç»å¸¸å‡ºç°çš„ï¼Œå’Œäº‹åŠ¡ç›¸å…³çš„ç»†èŠ‚åšä¸€ä¸‹æ€»ç»“ï¼Œå¸Œæœ›è¯»è€…åœ¨è¯»å®Œä¹‹åï¼Œèƒ½å¤Ÿè½å®åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œèƒ½æœ‰æ‰€å—ç›Šã€‚</p>
<h3 id="3-1-å¼‚å¸¸å¹¶æ²¡æœ‰è¢«-â€æ•è·â€œ-åˆ°"><a href="#3-1-å¼‚å¸¸å¹¶æ²¡æœ‰è¢«-â€æ•è·â€œ-åˆ°" class="headerlink" title="3.1 å¼‚å¸¸å¹¶æ²¡æœ‰è¢« â€æ•è·â€œ åˆ°"></a>3.1 å¼‚å¸¸å¹¶æ²¡æœ‰è¢« â€æ•è·â€œ åˆ°</h3><p>é¦–å…ˆè¦è¯´çš„ï¼Œå°±æ˜¯å¼‚å¸¸å¹¶æ²¡æœ‰è¢« â€æ•è·â€œ åˆ°ï¼Œå¯¼è‡´äº‹åŠ¡å¹¶æ²¡æœ‰å›æ»šã€‚æˆ‘ä»¬åœ¨ä¸šåŠ¡å±‚ä»£ç ä¸­ï¼Œä¹Ÿè®¸å·²ç»è€ƒè™‘åˆ°äº†å¼‚å¸¸çš„å­˜åœ¨ï¼Œæˆ–è€…ç¼–è¾‘å™¨å·²ç»æç¤ºæˆ‘ä»¬éœ€è¦æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯è¿™é‡Œé¢æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼šå¹¶ä¸æ˜¯è¯´æˆ‘ä»¬æŠŠå¼‚å¸¸æŠ›å‡ºæ¥äº†ï¼Œæœ‰å¼‚å¸¸äº†äº‹åŠ¡å°±ä¼šå›æ»šï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">isertUser2</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// æ’å…¥ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        userMapper.insertUser(user);</span><br><span class="line">        <span class="comment">// æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> SQLException(<span class="string">"æ•°æ®åº“å¼‚å¸¸"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹ä¸Šé¢è¿™ä¸ªä»£ç ï¼Œå…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ª <code>SQLException</code> æ¥æ¨¡æ‹Ÿå®é™…ä¸­æ“ä½œæ•°æ®åº“å‘ç”Ÿçš„å¼‚å¸¸ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæ—¢ç„¶æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆäº‹åŠ¡åº”è¯¥å›æ»šï¼Œå®é™…å´ä¸å¦‚æ­¤ï¼Œè¯»è€…å¯ä»¥ä½¿ç”¨æˆ‘æºç ä¸­ controller çš„æ¥å£ï¼Œé€šè¿‡ postman æµ‹è¯•ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°ï¼Œä»ç„¶æ˜¯å¯ä»¥æ’å…¥ä¸€æ¡ç”¨æˆ·æ•°æ®çš„ã€‚  </p>
<p>é‚£ä¹ˆé—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿå› ä¸º Spring Boot é»˜è®¤çš„äº‹åŠ¡è§„åˆ™æ˜¯é‡åˆ°è¿è¡Œå¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰å’Œç¨‹åºé”™è¯¯ï¼ˆErrorï¼‰æ‰ä¼šå›æ»šã€‚æ¯”å¦‚ä¸Šé¢æˆ‘ä»¬çš„ä¾‹å­ä¸­æŠ›å‡ºçš„ RuntimeException å°±æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æŠ›å‡º SQLException å°±æ— æ³•å›æ»šäº†ã€‚é’ˆå¯¹éè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦‚æœè¦è¿›è¡Œäº‹åŠ¡å›æ»šçš„è¯ï¼Œå¯ä»¥åœ¨ <code>@Transactional</code> æ³¨è§£ä¸­ä½¿ç”¨ <code>rollbackFor</code> å±æ€§æ¥æŒ‡å®šå¼‚å¸¸ï¼Œæ¯”å¦‚ <code>@Transactional(rollbackFor = Exception.class)</code>ï¼Œè¿™æ ·å°±æ²¡æœ‰é—®é¢˜äº†ï¼Œæ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€å®šè¦æŒ‡å®šå¼‚å¸¸ã€‚</p>
<h3 id="3-2-å¼‚å¸¸è¢«-â€åƒâ€œ-æ‰"><a href="#3-2-å¼‚å¸¸è¢«-â€åƒâ€œ-æ‰" class="headerlink" title="3.2 å¼‚å¸¸è¢« â€åƒâ€œ æ‰"></a>3.2 å¼‚å¸¸è¢« â€åƒâ€œ æ‰</h3><p>è¿™ä¸ªæ ‡é¢˜å¾ˆæç¬‘ï¼Œå¼‚å¸¸æ€ä¹ˆä¼šè¢«åƒæ‰å‘¢ï¼Ÿè¿˜æ˜¯å›å½’åˆ°ç°å®é¡¹ç›®ä¸­å»ï¼Œæˆ‘ä»¬åœ¨å¤„ç†å¼‚å¸¸æ—¶ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œè¦ä¹ˆæŠ›å‡ºå»ï¼Œè®©ä¸Šä¸€å±‚æ¥æ•è·å¤„ç†ï¼›è¦ä¹ˆæŠŠå¼‚å¸¸ try catch æ‰ï¼Œåœ¨å¼‚å¸¸å‡ºç°çš„åœ°æ–¹ç»™å¤„ç†æ‰ã€‚å°±å› ä¸ºæœ‰è¿™ä¸­ tryâ€¦catchï¼Œæ‰€ä»¥å¯¼è‡´å¼‚å¸¸è¢« â€åƒâ€œ æ‰ï¼Œäº‹åŠ¡æ— æ³•å›æ»šã€‚æˆ‘ä»¬è¿˜æ˜¯çœ‹ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œåªä¸è¿‡ç®€å•ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span>(rollbackFor = Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">void</span> <span class="title">isertUser3</span>(<span class="title">User</span> <span class="title">user</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ’å…¥ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">            userMapper.insertUser(user);</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SQLException(<span class="string">"æ•°æ®åº“å¼‚å¸¸"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯»è€…å¯ä»¥ä½¿ç”¨æˆ‘æºç ä¸­ controller çš„æ¥å£ï¼Œé€šè¿‡ postman æµ‹è¯•ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°ï¼Œä»ç„¶æ˜¯å¯ä»¥æ’å…¥ä¸€æ¡ç”¨æˆ·æ•°æ®ï¼Œè¯´æ˜äº‹åŠ¡å¹¶æ²¡æœ‰å› ä¸ºæŠ›å‡ºå¼‚å¸¸è€Œå›æ»šã€‚è¿™ä¸ªç»†èŠ‚å¾€å¾€æ¯”ä¸Šé¢é‚£ä¸ªå‘æ›´éš¾ä»¥å‘ç°ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ€ç»´å¾ˆå®¹æ˜“å¯¼è‡´ tryâ€¦catch ä»£ç çš„äº§ç”Ÿï¼Œä¸€æ—¦å‡ºç°è¿™ç§é—®é¢˜ï¼Œå¾€å¾€æ’æŸ¥èµ·æ¥æ¯”è¾ƒè´¹åŠ²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹³æ—¶åœ¨å†™ä»£ç æ—¶ï¼Œä¸€å®šè¦å¤šæ€è€ƒï¼Œå¤šæ³¨æ„è¿™ç§ç»†èŠ‚ï¼Œå°½é‡é¿å…ç»™è‡ªå·±åŸ‹å‘ã€‚  </p>
<p>é‚£è¿™ç§æ€ä¹ˆè§£å†³å‘¢ï¼Ÿç›´æ¥å¾€ä¸ŠæŠ›ï¼Œç»™ä¸Šä¸€å±‚æ¥å¤„ç†å³å¯ï¼Œåƒä¸‡ä¸è¦åœ¨äº‹åŠ¡ä¸­æŠŠå¼‚å¸¸è‡ªå·± â€åƒâ€œ æ‰ã€‚</p>
<h3 id="3-3-äº‹åŠ¡çš„èŒƒå›´"><a href="#3-3-äº‹åŠ¡çš„èŒƒå›´" class="headerlink" title="3.3 äº‹åŠ¡çš„èŒƒå›´"></a>3.3 äº‹åŠ¡çš„èŒƒå›´</h3><p>äº‹åŠ¡èŒƒå›´è¿™ä¸ªä¸œè¥¿æ¯”ä¸Šé¢ä¸¤ä¸ªå‘åŸ‹çš„æ›´æ·±ï¼æˆ‘ä¹‹æ‰€ä»¥æŠŠè¿™ä¸ªä¹Ÿå†™ä¸Šï¼Œæ˜¯å› ä¸ºè¿™æ˜¯æˆ‘ä¹‹å‰åœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„ï¼Œè¯¥åœºæ™¯åœ¨è¿™ä¸ªè¯¾ç¨‹ä¸­æˆ‘å°±ä¸æ¨¡æ‹Ÿäº†ï¼Œæˆ‘å†™ä¸€ä¸ª demo è®©å¤§å®¶çœ‹ä¸€ä¸‹ï¼ŒæŠŠè¿™ä¸ªå‘è®°ä½å³å¯ï¼Œä»¥ååœ¨å†™ä»£ç æ—¶ï¼Œé‡åˆ°å¹¶å‘é—®é¢˜ï¼Œå°±ä¼šæ³¨æ„è¿™ä¸ªå‘äº†ï¼Œé‚£ä¹ˆè¿™èŠ‚è¯¾ä¹Ÿå°±æœ‰ä»·å€¼äº†ã€‚  </p>
<p>æˆ‘æ¥å†™ä¸ª demoï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span>(rollbackFor = Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">synchronized</span> <span class="title">void</span> <span class="title">isertUser4</span>(<span class="title">User</span> <span class="title">user</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å®é™…ä¸­çš„å…·ä½“ä¸šåŠ¡â€¦â€¦</span></span><br><span class="line">        userMapper.insertUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå› ä¸ºè¦è€ƒè™‘å¹¶å‘é—®é¢˜ï¼Œæˆ‘åœ¨ä¸šåŠ¡å±‚ä»£ç çš„æ–¹æ³•ä¸ŠåŠ äº†ä¸ª synchronized å…³é”®å­—ã€‚æˆ‘ä¸¾ä¸ªå®é™…çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œé’ˆå¯¹æŸä¸ªç”¨æˆ·ï¼Œåªæœ‰ä¸€æ¡è®°å½•ï¼Œä¸‹ä¸€ä¸ªæ’å…¥åŠ¨ä½œè¿‡æ¥ï¼Œä¼šå…ˆåˆ¤æ–­è¯¥æ•°æ®åº“ä¸­æœ‰æ²¡æœ‰ç›¸åŒçš„ç”¨æˆ·ï¼Œå¦‚æœæœ‰å°±ä¸æ’å…¥ï¼Œå°±æ›´æ–°ï¼Œæ²¡æœ‰æ‰æ’å…¥ï¼Œæ‰€ä»¥ç†è®ºä¸Šï¼Œæ•°æ®åº“ä¸­æ°¸è¿œå°±ä¸€æ¡åŒä¸€ç”¨æˆ·ä¿¡æ¯ï¼Œä¸ä¼šå‡ºç°åŒä¸€æ•°æ®åº“ä¸­æ’å…¥äº†ä¸¤æ¡ç›¸åŒç”¨æˆ·çš„ä¿¡æ¯ã€‚  </p>
<p>ä½†æ˜¯åœ¨å‹æµ‹æ—¶ï¼Œå°±ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼Œæ•°æ®åº“ä¸­ç¡®å®æœ‰ä¸¤æ¡åŒä¸€ç”¨æˆ·çš„ä¿¡æ¯ï¼Œåˆ†æå…¶åŸå› ï¼Œåœ¨äºäº‹åŠ¡çš„èŒƒå›´å’Œé”çš„èŒƒå›´é—®é¢˜ã€‚  </p>
<p>ä»ä¸Šé¢æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ–¹æ³•ä¸Šæ˜¯åŠ äº†äº‹åŠ¡çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œè¯¥æ–¹æ³•å¼€å§‹æ—¶ï¼Œäº‹åŠ¡å¯åŠ¨ï¼Œæ‰§è¡Œå®Œäº†åï¼Œäº‹åŠ¡å…³é—­ã€‚ä½†æ˜¯ synchronized æ²¡æœ‰èµ·ä½œç”¨ï¼Œå…¶å®æ ¹æœ¬åŸå› æ˜¯å› ä¸ºäº‹åŠ¡çš„èŒƒå›´æ¯”é”çš„èŒƒå›´å¤§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŠ é”çš„é‚£éƒ¨åˆ†ä»£ç æ‰§è¡Œå®Œä¹‹åï¼Œé”é‡Šæ”¾æ‰äº†ï¼Œä½†æ˜¯äº‹åŠ¡è¿˜æ²¡ç»“æŸï¼Œæ­¤æ—¶å¦ä¸€ä¸ªçº¿ç¨‹è¿›æ¥äº†ï¼Œäº‹åŠ¡æ²¡ç»“æŸçš„è¯ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹è¿›æ¥æ—¶ï¼Œæ•°æ®åº“çš„çŠ¶æ€å’Œç¬¬ä¸€ä¸ªçº¿ç¨‹åˆšè¿›æ¥æ˜¯ä¸€æ ·çš„ã€‚å³ç”±äºmysql Innodbå¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼ˆåœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œï¼ŒSELECTçš„ç»“æœæ˜¯äº‹åŠ¡å¼€å§‹æ—¶æ—¶é—´ç‚¹çš„çŠ¶æ€ï¼‰ï¼Œçº¿ç¨‹äºŒäº‹åŠ¡å¼€å§‹çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¸€è¿˜æ²¡æäº¤å®Œæˆï¼Œå¯¼è‡´è¯»å–çš„æ•°æ®è¿˜æ²¡æ›´æ–°ã€‚ç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿåšäº†æ’å…¥åŠ¨ä½œï¼Œå¯¼è‡´äº†è„æ•°æ®ã€‚  </p>
<p>è¿™ä¸ªé—®é¢˜å¯ä»¥é¿å…ï¼Œç¬¬ä¸€ï¼ŒæŠŠäº‹åŠ¡å»æ‰å³å¯ï¼ˆä¸æ¨èï¼‰ï¼›ç¬¬äºŒï¼Œåœ¨è°ƒç”¨è¯¥ service çš„åœ°æ–¹åŠ é”ï¼Œä¿è¯é”çš„èŒƒå›´æ¯”äº‹åŠ¡çš„èŒƒå›´å¤§å³å¯ã€‚</p>
<h2 id="4-æ€»ç»“-4"><a href="#4-æ€»ç»“-4" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬ç« ä¸»è¦æ€»ç»“äº† Spring Boot ä¸­å¦‚ä½•ä½¿ç”¨äº‹åŠ¡ï¼Œåªè¦ä½¿ç”¨ <code>@Transactional</code> æ³¨è§£å³å¯ä½¿ç”¨ï¼Œéå¸¸ç®€å•æ–¹ä¾¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé‡ç‚¹æ€»ç»“äº†ä¸‰ä¸ªåœ¨å®é™…é¡¹ç›®ä¸­å¯èƒ½é‡åˆ°çš„å‘ç‚¹ï¼Œè¿™éå¸¸æœ‰æ„ä¹‰ï¼Œå› ä¸ºäº‹åŠ¡è¿™ä¸œè¥¿ä¸å‡ºé—®é¢˜è¿˜å¥½ï¼Œå‡ºäº†é—®é¢˜æ¯”è¾ƒéš¾ä»¥æ’æŸ¥ï¼Œæ‰€ä»¥æ€»ç»“çš„è¿™ä¸‰ç‚¹æ³¨æ„äº‹é¡¹ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¼€å‘ä¸­çš„æœ‹å‹ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬12è¯¾ï¼šSpring-Bootä¸­ä½¿ç”¨ç›‘å¬å™¨"><a href="#ç¬¬12è¯¾ï¼šSpring-Bootä¸­ä½¿ç”¨ç›‘å¬å™¨" class="headerlink" title="ç¬¬12è¯¾ï¼šSpring Bootä¸­ä½¿ç”¨ç›‘å¬å™¨"></a>ç¬¬12è¯¾ï¼šSpring Bootä¸­ä½¿ç”¨ç›‘å¬å™¨</h1><h2 id="1-ç›‘å¬å™¨ä»‹ç»"><a href="#1-ç›‘å¬å™¨ä»‹ç»" class="headerlink" title="1. ç›‘å¬å™¨ä»‹ç»"></a>1. ç›‘å¬å™¨ä»‹ç»</h2><p>ä»€ä¹ˆæ˜¯ web ç›‘å¬å™¨ï¼Ÿweb ç›‘å¬å™¨æ˜¯ä¸€ç§ Servlet ä¸­ç‰¹æ®Šçš„ç±»ï¼Œå®ƒä»¬èƒ½å¸®åŠ©å¼€å‘è€…ç›‘å¬ web ä¸­ç‰¹å®šçš„äº‹ä»¶ï¼Œæ¯”å¦‚ ServletContext, HttpSession, ServletRequest çš„åˆ›å»ºå’Œé”€æ¯ï¼›å˜é‡çš„åˆ›å»ºã€é”€æ¯å’Œä¿®æ”¹ç­‰ã€‚å¯ä»¥åœ¨æŸäº›åŠ¨ä½œå‰åå¢åŠ å¤„ç†ï¼Œå®ç°ç›‘æ§ã€‚</p>
<h2 id="2-Spring-Bootä¸­ç›‘å¬å™¨çš„ä½¿ç”¨"><a href="#2-Spring-Bootä¸­ç›‘å¬å™¨çš„ä½¿ç”¨" class="headerlink" title="2. Spring Bootä¸­ç›‘å¬å™¨çš„ä½¿ç”¨"></a>2. Spring Bootä¸­ç›‘å¬å™¨çš„ä½¿ç”¨</h2><p>web ç›‘å¬å™¨çš„ä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œæ¯”å¦‚ç›‘å¬ servlet ä¸Šä¸‹æ–‡ç”¨æ¥åˆå§‹åŒ–ä¸€äº›æ•°æ®ã€ç›‘å¬ http session ç”¨æ¥è·å–å½“å‰åœ¨çº¿çš„äººæ•°ã€ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚çš„ servlet request å¯¹è±¡æ¥è·å–ç”¨æˆ·çš„è®¿é—®ä¿¡æ¯ç­‰ç­‰ã€‚è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦é€šè¿‡è¿™ä¸‰ä¸ªå®é™…çš„ä½¿ç”¨åœºæ™¯æ¥å­¦ä¹ ä¸€ä¸‹ Spring Boot ä¸­ç›‘å¬å™¨çš„ä½¿ç”¨ã€‚</p>
<h3 id="2-1-ç›‘å¬Servletä¸Šä¸‹æ–‡å¯¹è±¡"><a href="#2-1-ç›‘å¬Servletä¸Šä¸‹æ–‡å¯¹è±¡" class="headerlink" title="2.1 ç›‘å¬Servletä¸Šä¸‹æ–‡å¯¹è±¡"></a>2.1 ç›‘å¬Servletä¸Šä¸‹æ–‡å¯¹è±¡</h3><p>ç›‘å¬ servlet ä¸Šä¸‹æ–‡å¯¹è±¡å¯ä»¥ç”¨æ¥åˆå§‹åŒ–æ•°æ®ï¼Œç”¨äºç¼“å­˜ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä¸¾ä¸€ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨ç‚¹å‡»æŸä¸ªç«™ç‚¹çš„é¦–é¡µæ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šå±•ç°å‡ºé¦–é¡µçš„ä¸€äº›ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯åŸºæœ¬ä¸Šæˆ–è€…å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¿æŒä¸å˜çš„ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯éƒ½æ˜¯æ¥è‡ªæ•°æ®åº“ã€‚å¦‚æœç”¨æˆ·çš„æ¯æ¬¡ç‚¹å‡»ï¼Œéƒ½è¦ä»æ•°æ®åº“ä¸­å»è·å–æ•°æ®çš„è¯ï¼Œç”¨æˆ·é‡å°‘è¿˜å¯ä»¥æ¥å—ï¼Œå¦‚æœç”¨æˆ·é‡éå¸¸å¤§çš„è¯ï¼Œè¿™å¯¹æ•°æ®åº“ä¹Ÿæ˜¯ä¸€ç¬”å¾ˆå¤§çš„å¼€é”€ã€‚  </p>
<p>é’ˆå¯¹è¿™ç§é¦–é¡µæ•°æ®ï¼Œå¤§éƒ¨åˆ†éƒ½ä¸å¸¸æ›´æ–°çš„è¯ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠå®ƒä»¬ç¼“å­˜èµ·æ¥ï¼Œæ¯æ¬¡ç”¨æˆ·ç‚¹å‡»çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œè¿™æ ·æ—¢å¯ä»¥æé«˜é¦–é¡µçš„è®¿é—®é€Ÿåº¦ï¼Œåˆå¯ä»¥é™ä½æœåŠ¡å™¨çš„å‹åŠ›ã€‚å¦‚æœåšçš„æ›´åŠ çµæ´»ä¸€ç‚¹ï¼Œå¯ä»¥å†åŠ ä¸ªå®šæ—¶å™¨ï¼Œå®šæœŸçš„æ¥æ›´æ–°è¿™ä¸ªé¦–é¡µç¼“å­˜ã€‚å°±ç±»ä¼¼ä¸ CSDN ä¸ªäººåšå®¢é¦–é¡µä¸­æ’åçš„å˜åŒ–ä¸€æ ·ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬é’ˆå¯¹è¿™ä¸ªåŠŸèƒ½ï¼Œæ¥å†™ä¸€ä¸ª demoï¼Œåœ¨å®é™…ä¸­ï¼Œè¯»è€…å¯ä»¥å®Œå…¨å¥—ç”¨è¯¥ä»£ç ï¼Œæ¥å®ç°è‡ªå·±é¡¹ç›®ä¸­çš„ç›¸å…³é€»è¾‘ã€‚é¦–å…ˆå†™ä¸€ä¸ª Serviceï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®é™…ä¸­ä¼šæ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¯¹åº”çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="number">1L</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†™ä¸€ä¸ªç›‘å¬å™¨ï¼Œå®ç° <code>ApplicationListener&lt;ContextRefreshedEvent&gt;</code> æ¥å£ï¼Œé‡å†™ <code>onApplicationEvent</code> æ–¹æ³•ï¼Œå°† ContextRefreshedEvent å¯¹è±¡ä¼ è¿›å»ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨åŠ è½½æˆ–åˆ·æ–°åº”ç”¨ä¸Šä¸‹æ–‡æ—¶ï¼Œä¹Ÿé‡æ–°åˆ·æ–°ä¸‹æˆ‘ä»¬é¢„åŠ è½½çš„èµ„æºï¼Œå°±å¯ä»¥é€šè¿‡ç›‘å¬ ContextRefreshedEvent æ¥åšè¿™æ ·çš„äº‹æƒ…ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ApplicationListeneræ¥åˆå§‹åŒ–ä¸€äº›æ•°æ®åˆ°applicationåŸŸä¸­çš„ç›‘å¬å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengni ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/07/05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServletContextListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ContextRefreshedEvent</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ContextRefreshedEvent contextRefreshedEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆè·å–åˆ°applicationä¸Šä¸‹æ–‡</span></span><br><span class="line">        ApplicationContext applicationContext = contextRefreshedEvent.getApplicationContext();</span><br><span class="line">        <span class="comment">// è·å–å¯¹åº”çš„service</span></span><br><span class="line">        UserService userService = applicationContext.getBean(UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        User user = userService.getUser();</span><br><span class="line">        <span class="comment">// è·å–applicationåŸŸå¯¹è±¡ï¼Œå°†æŸ¥åˆ°çš„ä¿¡æ¯æ”¾åˆ°applicationåŸŸä¸­</span></span><br><span class="line">        ServletContext application = applicationContext.getBean(ServletContext<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        application.setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚æ³¨é‡Šä¸­æè¿°çš„ä¸€æ ·ï¼Œé¦–å…ˆé€šè¿‡ contextRefreshedEvent æ¥è·å– application ä¸Šä¸‹æ–‡ï¼Œå†é€šè¿‡ application ä¸Šä¸‹æ–‡æ¥è·å– UserService è¿™ä¸ª beanï¼Œé¡¹ç›®ä¸­å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯ï¼Œä¹Ÿå¯ä»¥è·å–å…¶ä»–çš„ beanï¼Œç„¶åå†è°ƒç”¨è‡ªå·±çš„ä¸šåŠ¡ä»£ç è·å–ç›¸åº”çš„æ•°æ®ï¼Œæœ€åå­˜å‚¨åˆ° application åŸŸä¸­ï¼Œè¿™æ ·å‰ç«¯åœ¨è¯·æ±‚ç›¸åº”æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä» application åŸŸä¸­è·å–ä¿¡æ¯ï¼Œå‡å°‘æ•°æ®åº“çš„å‹åŠ›ã€‚ä¸‹é¢å†™ä¸€ä¸ª Controller ç›´æ¥ä» application åŸŸä¸­è·å– user ä¿¡æ¯æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/listener"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        ServletContext application = request.getServletContext();</span><br><span class="line">        <span class="keyword">return</span> (User) application.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://localhost:8080/listener/user</code> æµ‹è¯•ä¸€ä¸‹å³å¯ï¼Œå¦‚æœæ­£å¸¸è¿”å› user ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯´æ˜æ•°æ®å·²ç»ç¼“å­˜æˆåŠŸã€‚ä¸è¿‡ application è¿™ç§æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯¹å†…å­˜ä¼šæœ‰æ¶ˆè€—ï¼Œåé¢çš„è¯¾ç¨‹ä¸­æˆ‘ä¼šè®²åˆ° redisï¼Œåˆ°æ—¶å€™å†ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ redis çš„ç¼“å­˜ã€‚</p>
<h3 id="2-2-ç›‘å¬HTTPä¼šè¯-Sessionå¯¹è±¡"><a href="#2-2-ç›‘å¬HTTPä¼šè¯-Sessionå¯¹è±¡" class="headerlink" title="2.2 ç›‘å¬HTTPä¼šè¯ Sessionå¯¹è±¡"></a>2.2 ç›‘å¬HTTPä¼šè¯ Sessionå¯¹è±¡</h3><p>ç›‘å¬å™¨è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„åœ°æ–¹å°±æ˜¯ç”¨æ¥ç›‘å¬ session å¯¹è±¡ï¼Œæ¥è·å–åœ¨çº¿ç”¨æˆ·æ•°é‡ï¼Œç°åœ¨æœ‰å¾ˆå¤šå¼€å‘è€…éƒ½æœ‰è‡ªå·±çš„ç½‘ç«™ï¼Œç›‘å¬ session æ¥è·å–å½“å‰åœ¨ä¸‹ç”¨æˆ·æ•°é‡æ˜¯ä¸ªå¾ˆå¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•æ¥ä½¿ç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨HttpSessionListenerç»Ÿè®¡åœ¨çº¿ç”¨æˆ·æ•°çš„ç›‘å¬å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/07/05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHttpSessionListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(MyHttpSessionListener<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®°å½•åœ¨çº¿çš„ç”¨æˆ·æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Integer count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"æ–°ç”¨æˆ·ä¸Šçº¿äº†"</span>);</span><br><span class="line">        count++;</span><br><span class="line">        httpSessionEvent.getSession().getServletContext().setAttribute(<span class="string">"count"</span>, count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"ç”¨æˆ·ä¸‹çº¿äº†"</span>);</span><br><span class="line">        count--;</span><br><span class="line">        httpSessionEvent.getSession().getServletContext().setAttribute(<span class="string">"count"</span>, count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆè¯¥ç›‘å¬å™¨éœ€è¦å®ç° HttpSessionListener æ¥å£ï¼Œç„¶åé‡å†™ <code>sessionCreated</code> å’Œ <code>sessionDestroyed</code> æ–¹æ³•ï¼Œåœ¨ <code>sessionCreated</code> æ–¹æ³•ä¸­ä¼ é€’ä¸€ä¸ª HttpSessionEvent å¯¹è±¡ï¼Œç„¶åå°†å½“å‰ session ä¸­çš„ç”¨æˆ·æ•°é‡åŠ 1ï¼Œ<code>sessionDestroyed</code> æ–¹æ³•åˆšå¥½ç›¸åï¼Œä¸å†èµ˜è¿°ã€‚ç„¶åæˆ‘ä»¬å†™ä¸€ä¸ª Controller æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/listener"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å½“å‰åœ¨çº¿äººæ•°ï¼Œè¯¥æ–¹æ³•æœ‰bug</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/total"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTotalUser</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        Integer count = (Integer) request.getSession().getServletContext().getAttribute(<span class="string">"count"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å½“å‰åœ¨çº¿äººæ•°ï¼š"</span> + count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥ Controller ä¸­æ˜¯ç›´æ¥è·å–å½“å‰ session ä¸­çš„ç”¨æˆ·æ•°é‡ï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/listener/total</code> å¯ä»¥çœ‹åˆ°è¿”å›çš„ç»“æœæ˜¯1ï¼Œå†æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œè¯·æ±‚ç›¸åŒçš„åœ°å€å¯ä»¥çœ‹åˆ° count æ˜¯ 2 ï¼Œè¿™æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœå…³é—­ä¸€ä¸ªæµè§ˆå™¨å†æ‰“å¼€ï¼Œç†è®ºä¸Šåº”è¯¥è¿˜æ˜¯2ï¼Œä½†æ˜¯å®é™…æµ‹è¯•å´æ˜¯ 3ã€‚åŸå› æ˜¯ session é”€æ¯çš„æ–¹æ³•æ²¡æœ‰æ‰§è¡Œï¼ˆå¯ä»¥åœ¨åå°æ§åˆ¶å°è§‚å¯Ÿæ—¥å¿—æ‰“å°æƒ…å†µï¼‰ï¼Œå½“é‡æ–°æ‰“å¼€æ—¶ï¼ŒæœåŠ¡å™¨æ‰¾ä¸åˆ°ç”¨æˆ·åŸæ¥çš„ sessionï¼Œäºæ˜¯åˆé‡æ–°åˆ›å»ºäº†ä¸€ä¸ª sessionï¼Œé‚£æ€ä¹ˆè§£å†³è¯¥é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ Controller æ–¹æ³•æ”¹é€ ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/total2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getTotalUser</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    Cookie cookie;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// æŠŠsessionIdè®°å½•åœ¨æµè§ˆå™¨ä¸­</span></span><br><span class="line">        cookie = <span class="keyword">new</span> Cookie(<span class="string">"JSESSIONID"</span>, URLEncoder.encode(request.getSession().getId(), <span class="string">"utf-8"</span>));</span><br><span class="line">        cookie.setPath(<span class="string">"/"</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®cookieæœ‰æ•ˆæœŸä¸º2å¤©ï¼Œè®¾ç½®é•¿ä¸€ç‚¹</span></span><br><span class="line">        cookie.setMaxAge( <span class="number">48</span>*<span class="number">60</span> * <span class="number">60</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    Integer count = (Integer) request.getSession().getServletContext().getAttribute(<span class="string">"count"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"å½“å‰åœ¨çº¿äººæ•°ï¼š"</span> + count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥å¤„ç†é€»è¾‘æ˜¯è®©æœåŠ¡å™¨è®°å¾—åŸæ¥é‚£ä¸ª sessionï¼Œå³æŠŠåŸæ¥çš„ sessionId è®°å½•åœ¨æµè§ˆå™¨ä¸­ï¼Œä¸‹æ¬¡å†æ‰“å¼€æ—¶ï¼ŒæŠŠè¿™ä¸ª sessionId ä¼ è¿‡å»ï¼Œè¿™æ ·æœåŠ¡å™¨å°±ä¸ä¼šé‡æ–°å†åˆ›å»ºäº†ã€‚é‡å¯ä¸€ä¸‹æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­å†æ¬¡æµ‹è¯•ä¸€ä¸‹ï¼Œå³å¯é¿å…ä¸Šé¢çš„é—®é¢˜ã€‚</p>
<h3 id="2-3-ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚Servlet-Requestå¯¹è±¡"><a href="#2-3-ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚Servlet-Requestå¯¹è±¡" class="headerlink" title="2.3 ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚Servlet Requestå¯¹è±¡"></a>2.3 ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚Servlet Requestå¯¹è±¡</h3><p>ä½¿ç”¨ç›‘å¬å™¨è·å–ç”¨æˆ·çš„è®¿é—®ä¿¡æ¯æ¯”è¾ƒç®€å•ï¼Œå®ç° ServletRequestListener æ¥å£å³å¯ï¼Œç„¶åé€šè¿‡ request å¯¹è±¡è·å–ä¸€äº›ä¿¡æ¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ServletRequestListenerè·å–è®¿é—®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/07/05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServletRequestListener</span> <span class="keyword">implements</span> <span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(MyServletRequestListener<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> </span>&#123;</span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequestEvent.getServletRequest();</span><br><span class="line">        logger.info(<span class="string">"session idä¸ºï¼š&#123;&#125;"</span>, request.getRequestedSessionId());</span><br><span class="line">        logger.info(<span class="string">"request urlä¸ºï¼š&#123;&#125;"</span>, request.getRequestURL());</span><br><span class="line"></span><br><span class="line">        request.setAttribute(<span class="string">"name"</span>, <span class="string">"å€ªå‡æ­¦"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"request end"</span>);</span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequestEvent.getServletRequest();</span><br><span class="line">        logger.info(<span class="string">"requeståŸŸä¸­ä¿å­˜çš„nameå€¼ä¸ºï¼š&#123;&#125;"</span>, request.getAttribute(<span class="string">"name"</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸å†èµ˜è¿°ï¼Œæ¥ä¸‹æ¥å†™ä¸€ä¸ª Controller æµ‹è¯•ä¸€ä¸‹å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/request"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getRequestInfo</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"requestListenerä¸­çš„åˆå§‹åŒ–çš„nameæ•°æ®ï¼š"</span> + request.getAttribute(<span class="string">"name"</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-Spring-Bootä¸­è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬"><a href="#3-Spring-Bootä¸­è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬" class="headerlink" title="3. Spring Bootä¸­è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬"></a>3. Spring Bootä¸­è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦è‡ªå®šä¹‰ä¸€äº›äº‹ä»¶å’Œç›‘å¬å™¨æ¥æ»¡è¶³ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚åœ¨å¾®æœåŠ¡ä¸­ä¼šæœ‰è¿™æ ·çš„åœºæ™¯ï¼šå¾®æœåŠ¡ A åœ¨å¤„ç†å®ŒæŸä¸ªé€»è¾‘ä¹‹åï¼Œéœ€è¦é€šçŸ¥å¾®æœåŠ¡ B å»å¤„ç†å¦ä¸€ä¸ªé€»è¾‘ï¼Œæˆ–è€…å¾®æœåŠ¡ A å¤„ç†å®ŒæŸä¸ªé€»è¾‘ä¹‹åï¼Œéœ€è¦å°†æ•°æ®åŒæ­¥åˆ°å¾®æœåŠ¡ Bï¼Œè¿™ç§åœºæ™¯éå¸¸æ™®éï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰äº‹ä»¶ä»¥åŠç›‘å¬å™¨æ¥ç›‘å¬ï¼Œä¸€æ—¦ç›‘å¬åˆ°å¾®æœåŠ¡ A ä¸­çš„æŸäº‹ä»¶å‘ç”Ÿï¼Œå°±å»é€šçŸ¥å¾®æœåŠ¡ B å¤„ç†å¯¹åº”çš„é€»è¾‘ã€‚</p>
<h3 id="3-1-è‡ªå®šä¹‰äº‹ä»¶"><a href="#3-1-è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="3.1 è‡ªå®šä¹‰äº‹ä»¶"></a>3.1 è‡ªå®šä¹‰äº‹ä»¶</h3><p>è‡ªå®šä¹‰äº‹ä»¶éœ€è¦ç»§æ‰¿ ApplicationEvent å¯¹è±¡ï¼Œåœ¨äº‹ä»¶ä¸­å®šä¹‰ä¸€ä¸ª User å¯¹è±¡æ¥æ¨¡æ‹Ÿæ•°æ®ï¼Œæ„é€ æ–¹æ³•ä¸­å°† User å¯¹è±¡ä¼ è¿›æ¥åˆå§‹åŒ–ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/07/05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyEvent</span><span class="params">(Object source, User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(source);</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœå»getã€setæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-è‡ªå®šä¹‰ç›‘å¬å™¨"><a href="#3-2-è‡ªå®šä¹‰ç›‘å¬å™¨" class="headerlink" title="3.2 è‡ªå®šä¹‰ç›‘å¬å™¨"></a>3.2 è‡ªå®šä¹‰ç›‘å¬å™¨</h3><p>æ¥ä¸‹æ¥ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªç›‘å¬å™¨æ¥ç›‘å¬ä¸Šé¢å®šä¹‰çš„ MyEvent äº‹ä»¶ï¼Œè‡ªå®šä¹‰ç›‘å¬å™¨éœ€è¦å®ç° <code>ApplicationListener</code> æ¥å£å³å¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰ç›‘å¬å™¨ï¼Œç›‘å¬MyEventäº‹ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/07/05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyEventListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">MyEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(MyEvent myEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æŠŠäº‹ä»¶ä¸­çš„ä¿¡æ¯è·å–åˆ°</span></span><br><span class="line">        User user = myEvent.getUser();</span><br><span class="line">        <span class="comment">// å¤„ç†äº‹ä»¶ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥é€šçŸ¥åˆ«çš„å¾®æœåŠ¡æˆ–è€…å¤„ç†å…¶ä»–é€»è¾‘ç­‰ç­‰</span></span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·åï¼š"</span> + user.getUsername());</span><br><span class="line">        System.out.println(<span class="string">"å¯†ç ï¼š"</span> + user.getPassword());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åé‡å†™ <code>onApplicationEvent</code> æ–¹æ³•ï¼Œå°†è‡ªå®šä¹‰çš„ MyEvent äº‹ä»¶ä¼ è¿›æ¥ï¼Œå› ä¸ºè¯¥äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† User å¯¹è±¡ï¼ˆè¯¥å¯¹è±¡åœ¨å®é™…ä¸­å°±æ˜¯éœ€è¦å¤„ç†çš„æ•°æ®ï¼Œåœ¨ä¸‹æ–‡æ¥æ¨¡æ‹Ÿï¼‰ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡çš„ä¿¡æ¯äº†ã€‚</p>
<p>OKï¼Œå®šä¹‰å¥½äº†äº‹ä»¶å’Œç›‘å¬å™¨ä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨å‘å¸ƒäº‹ä»¶ï¼Œè¿™æ ·ç›‘å¬å™¨æ‰èƒ½ç›‘å¬åˆ°ï¼Œè¿™éœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯æ¥è§¦å‘ï¼Œé’ˆå¯¹æœ¬æ–‡çš„ä¾‹å­ï¼Œæˆ‘å†™ä¸ªè§¦å‘é€»è¾‘ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserService</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å¸ƒäº‹ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="number">1L</span>, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        <span class="comment">// å‘å¸ƒäº‹ä»¶</span></span><br><span class="line">        MyEvent event = <span class="keyword">new</span> MyEvent(<span class="keyword">this</span>, user);</span><br><span class="line">        applicationContext.publishEvent(event);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ service ä¸­æ³¨å…¥ ApplicationContextï¼Œåœ¨ä¸šåŠ¡ä»£ç å¤„ç†å®Œä¹‹åï¼Œé€šè¿‡ ApplicationContext å¯¹è±¡æ‰‹åŠ¨å‘å¸ƒ MyEvent äº‹ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬è‡ªå®šä¹‰çš„ç›‘å¬å™¨å°±èƒ½ç›‘å¬åˆ°ï¼Œç„¶åå¤„ç†ç›‘å¬å™¨ä¸­å†™å¥½çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<p>æœ€åï¼Œåœ¨ Controller ä¸­å†™ä¸€ä¸ªæ¥å£æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/request"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getRequestInfo</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"requestListenerä¸­çš„åˆå§‹åŒ–çš„nameæ•°æ®ï¼š"</span> + request.getAttribute(<span class="string">"name"</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://localhost:8080/listener/publish</code>ï¼Œç„¶åè§‚å¯Ÿä¸€ä¸‹æ§åˆ¶å°æ‰“å°çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯è¯´æ˜è‡ªå®šä¹‰ç›‘å¬å™¨å·²ç»ç”Ÿæ•ˆã€‚</p>
<h2 id="4-æ€»ç»“-5"><a href="#4-æ€»ç»“-5" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬è¯¾ç³»ç»Ÿçš„ä»‹ç»äº†ç›‘å¬å™¨åŸç†ï¼Œä»¥åŠåœ¨ Spring Boot ä¸­å¦‚ä½•ä½¿ç”¨ç›‘å¬å™¨ï¼Œåˆ—ä¸¾äº†ç›‘å¬å™¨çš„ä¸‰ä¸ªå¸¸ç”¨çš„æ¡ˆä¾‹ï¼Œæœ‰å¾ˆå¥½çš„å®æˆ˜æ„ä¹‰ã€‚æœ€åè®²è§£äº†é¡¹ç›®ä¸­å¦‚ä½•è‡ªå®šä¹‰äº‹ä»¶å’Œç›‘å¬å™¨ï¼Œå¹¶ç»“åˆå¾®æœåŠ¡ä¸­å¸¸è§çš„åœºæ™¯ï¼Œç»™å‡ºå…·ä½“çš„ä»£ç æ¨¡å‹ï¼Œå‡èƒ½è¿ç”¨åˆ°å®é™…é¡¹ç›®ä¸­å»ï¼Œå¸Œæœ›è¯»è€…è®¤çœŸæ¶ˆåŒ–ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬13è¯¾ï¼šSpring-Bootä¸­ä½¿ç”¨æ‹¦æˆªå™¨"><a href="#ç¬¬13è¯¾ï¼šSpring-Bootä¸­ä½¿ç”¨æ‹¦æˆªå™¨" class="headerlink" title="ç¬¬13è¯¾ï¼šSpring Bootä¸­ä½¿ç”¨æ‹¦æˆªå™¨"></a>ç¬¬13è¯¾ï¼šSpring Bootä¸­ä½¿ç”¨æ‹¦æˆªå™¨</h1><p>æ‹¦æˆªå™¨çš„åŸç†å¾ˆç®€å•ï¼Œæ˜¯ AOP çš„ä¸€ç§å®ç°ï¼Œä¸“é—¨æ‹¦æˆªå¯¹åŠ¨æ€èµ„æºçš„åå°è¯·æ±‚ï¼Œå³æ‹¦æˆªå¯¹æ§åˆ¶å±‚çš„è¯·æ±‚ã€‚ä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¤šçš„æ˜¯åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¯·æ±‚åå°ï¼Œæ›´æ‹”é«˜ä¸€å±‚çš„ä½¿ç”¨åœºæ™¯ä¹Ÿæœ‰ï¼Œæ¯”å¦‚æ‹¦æˆªå™¨å¯ä»¥ç»“åˆ websocket ä¸€èµ·ä½¿ç”¨ï¼Œç”¨æ¥æ‹¦æˆª websocket è¯·æ±‚ï¼Œç„¶ååšç›¸åº”çš„å¤„ç†ç­‰ç­‰ã€‚æ‹¦æˆªå™¨ä¸ä¼šæ‹¦æˆªé™æ€èµ„æºï¼ŒSpring Boot çš„é»˜è®¤é™æ€ç›®å½•ä¸º resources/staticï¼Œè¯¥ç›®å½•ä¸‹çš„é™æ€é¡µé¢ã€jsã€cssã€å›¾ç‰‡ç­‰ç­‰ï¼Œä¸ä¼šè¢«æ‹¦æˆªï¼ˆä¹Ÿè¦çœ‹å¦‚ä½•å®ç°ï¼Œæœ‰äº›æƒ…å†µä¹Ÿä¼šæ‹¦æˆªï¼Œæˆ‘åœ¨ä¸‹æ–‡ä¼šæŒ‡å‡ºï¼‰ã€‚</p>
<h2 id="1-æ‹¦æˆªå™¨çš„å¿«é€Ÿä½¿ç”¨"><a href="#1-æ‹¦æˆªå™¨çš„å¿«é€Ÿä½¿ç”¨" class="headerlink" title="1. æ‹¦æˆªå™¨çš„å¿«é€Ÿä½¿ç”¨"></a>1. æ‹¦æˆªå™¨çš„å¿«é€Ÿä½¿ç”¨</h2><p>ä½¿ç”¨æ‹¦æˆªå™¨å¾ˆç®€å•ï¼Œåªéœ€è¦ä¸¤æ­¥å³å¯ï¼šå®šä¹‰æ‹¦æˆªå™¨å’Œé…ç½®æ‹¦æˆªå™¨ã€‚åœ¨é…ç½®æ‹¦æˆªå™¨ä¸­ï¼ŒSpring Boot 2.0 ä»¥åçš„ç‰ˆæœ¬å’Œä¹‹å‰çš„ç‰ˆæœ¬æœ‰æ‰€ä¸åŒï¼Œæˆ‘ä¼šé‡ç‚¹è®²è§£ä¸€ä¸‹è¿™é‡Œå¯èƒ½å‡ºç°çš„å‘ã€‚</p>
<h3 id="1-1-å®šä¹‰æ‹¦æˆªå™¨"><a href="#1-1-å®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="1.1 å®šä¹‰æ‹¦æˆªå™¨"></a>1.1 å®šä¹‰æ‹¦æˆªå™¨</h3><p>å®šä¹‰æ‹¦æˆªå™¨ï¼Œåªéœ€è¦å®ç° <code>HandlerInterceptor</code> æ¥å£ï¼Œ<code>HandlerInterceptor</code> æ¥å£æ˜¯æ‰€æœ‰è‡ªå®šä¹‰æ‹¦æˆªå™¨æˆ–è€… Spring Boot æä¾›çš„æ‹¦æˆªå™¨çš„é¼»ç¥–ï¼Œæ‰€ä»¥ï¼Œé¦–å…ˆæ¥äº†è§£ä¸‹è¯¥æ¥å£ã€‚è¯¥æ¥å£ä¸­æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š <code>preHandle(â€¦â€¦)</code>ã€<code>postHandle(â€¦â€¦)</code> å’Œ <code>afterCompletion(â€¦â€¦)</code> ã€‚</p>
<blockquote>
<p><code>preHandle(â€¦â€¦)</code> æ–¹æ³•ï¼šè¯¥æ–¹æ³•çš„æ‰§è¡Œæ—¶æœºæ˜¯ï¼Œå½“æŸä¸ª url å·²ç»åŒ¹é…åˆ°å¯¹åº”çš„ Controller ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œä¸”åœ¨è¿™ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹å‰ã€‚æ‰€ä»¥ <code>preHandle(â€¦â€¦)</code> æ–¹æ³•å¯ä»¥å†³å®šæ˜¯å¦å°†è¯·æ±‚æ”¾è¡Œï¼Œè¿™æ˜¯é€šè¿‡è¿”å›å€¼æ¥å†³å®šçš„ï¼Œè¿”å› true åˆ™æ”¾è¡Œï¼Œè¿”å› false åˆ™ä¸ä¼šå‘åæ‰§è¡Œã€‚<br><code>postHandle(â€¦â€¦)</code> æ–¹æ³•ï¼šè¯¥æ–¹æ³•çš„æ‰§è¡Œæ—¶æœºæ˜¯ï¼Œå½“æŸä¸ª url å·²ç»åŒ¹é…åˆ°å¯¹åº”çš„ Controller ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œä¸”åœ¨æ‰§è¡Œå®Œäº†è¯¥æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ DispatcherServlet è§†å›¾æ¸²æŸ“ä¹‹å‰ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æœ‰ä¸ª ModelAndView å‚æ•°ï¼Œå¯ä»¥åœ¨æ­¤åšä¸€äº›ä¿®æ”¹åŠ¨ä½œã€‚<br><code>afterCompletion(â€¦â€¦)</code> æ–¹æ³•ï¼šé¡¾åæ€ä¹‰ï¼Œè¯¥æ–¹æ³•æ˜¯åœ¨æ•´ä¸ªè¯·æ±‚å¤„ç†å®Œæˆåï¼ˆåŒ…æ‹¬è§†å›¾æ¸²æŸ“ï¼‰æ‰§è¡Œï¼Œè¿™æ—¶åšä¸€äº›èµ„æºçš„æ¸…ç†å·¥ä½œï¼Œè¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨ <code>preHandle(â€¦â€¦)</code> è¢«æˆåŠŸæ‰§è¡Œåå¹¶ä¸”è¿”å› true æ‰ä¼šè¢«æ‰§è¡Œã€‚  </p>
</blockquote>
<p>äº†è§£äº†è¯¥æ¥å£ï¼Œæ¥ä¸‹æ¥è‡ªå®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/08/03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(MyInterceptor<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        HandlerMethod handlerMethod = (HandlerMethod) handler;</span><br><span class="line">        Method method = handlerMethod.getMethod();</span><br><span class="line">        String methodName = method.getName();</span><br><span class="line">        logger.info(<span class="string">"====æ‹¦æˆªåˆ°äº†æ–¹æ³•ï¼š&#123;&#125;ï¼Œåœ¨è¯¥æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ===="</span>, methodName);</span><br><span class="line">        <span class="comment">// è¿”å›trueæ‰ä¼šç»§ç»­æ‰§è¡Œï¼Œè¿”å›falseåˆ™å–æ¶ˆå½“å‰è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"æ‰§è¡Œå®Œæ–¹æ³•ä¹‹åè¿›æ‰§è¡Œ(Controlleræ–¹æ³•è°ƒç”¨ä¹‹å)ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡è¿›è¡Œè§†å›¾æ¸²æŸ“"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"æ•´ä¸ªè¯·æ±‚éƒ½å¤„ç†å®Œå’¯ï¼ŒDispatcherServletä¹Ÿæ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾å’¯ï¼Œæ­¤æ—¶æˆ‘å¯ä»¥åšä¸€äº›æ¸…ç†çš„å·¥ä½œäº†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OKï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œæ‹¦æˆªå™¨å·²ç»å®šä¹‰å®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹è¯¥æ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆªé…ç½®ã€‚</p>
<h3 id="1-2-é…ç½®æ‹¦æˆªå™¨"><a href="#1-2-é…ç½®æ‹¦æˆªå™¨" class="headerlink" title="1.2 é…ç½®æ‹¦æˆªå™¨"></a>1.2 é…ç½®æ‹¦æˆªå™¨</h3><p>åœ¨ Spring Boot 2.0 ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç›´æ¥ç»§æ‰¿ WebMvcConfigurerAdapter ç±»ï¼Œç„¶åé‡å†™ <code>addInterceptors</code> æ–¹æ³•æ¥å®ç°æ‹¦æˆªå™¨çš„é…ç½®ã€‚ä½†æ˜¯åœ¨ Spring Boot 2.0 ä¹‹åï¼Œè¯¥æ–¹æ³•å·²ç»è¢«åºŸå¼ƒäº†ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ç”¨ï¼‰ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ WebMvcConfigurationSupport æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptorConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> MyInterceptor()).addPathPatterns(<span class="string">"/**"</span>);</span><br><span class="line">        <span class="keyword">super</span>.addInterceptors(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯¥é…ç½®ä¸­é‡å†™ <code>addInterceptors</code> æ–¹æ³•ï¼Œå°†æˆ‘ä»¬ä¸Šé¢è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨æ·»åŠ è¿›å»ï¼Œ<code>addPathPatterns</code> æ–¹æ³•æ˜¯æ·»åŠ è¦æ‹¦æˆªçš„è¯·æ±‚ï¼Œè¿™é‡Œæˆ‘ä»¬æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ã€‚è¿™æ ·å°±é…ç½®å¥½æ‹¦æˆªå™¨äº†ï¼Œæ¥ä¸‹æ¥å†™ä¸€ä¸ª Controller æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/interceptor"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®©å…¶è·³è½¬åˆ° hello.html é¡µé¢ï¼Œç›´æ¥åœ¨ hello.html ä¸­è¾“å‡º <code>hello interceptor</code> å³å¯ã€‚å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/interceptor/test</code> çœ‹ä¸€ä¸‹æ§åˆ¶å°çš„æ—¥å¿—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;æ‹¦æˆªåˆ°äº†æ–¹æ³•ï¼štestï¼Œåœ¨è¯¥æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">æ‰§è¡Œå®Œæ–¹æ³•ä¹‹åè¿›æ‰§è¡Œ(Controlleræ–¹æ³•è°ƒç”¨ä¹‹å)ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡è¿›è¡Œè§†å›¾æ¸²æŸ“  </span><br><span class="line">æ•´ä¸ªè¯·æ±‚éƒ½å¤„ç†å®Œå’¯ï¼ŒDispatcherServletä¹Ÿæ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾å’¯ï¼Œæ­¤æ—¶æˆ‘å¯ä»¥åšä¸€äº›æ¸…ç†çš„å·¥ä½œäº†</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºæ‹¦æˆªå™¨å·²ç»ç”Ÿæ•ˆï¼Œå¹¶èƒ½çœ‹å‡ºå…¶æ‰§è¡Œé¡ºåºã€‚</p>
<h3 id="1-3-è§£å†³é™æ€èµ„æºè¢«æ‹¦æˆªé—®é¢˜"><a href="#1-3-è§£å†³é™æ€èµ„æºè¢«æ‹¦æˆªé—®é¢˜" class="headerlink" title="1.3 è§£å†³é™æ€èµ„æºè¢«æ‹¦æˆªé—®é¢˜"></a>1.3 è§£å†³é™æ€èµ„æºè¢«æ‹¦æˆªé—®é¢˜</h3><p>ä¸Šæ–‡ä¸­å·²ç»ä»‹ç»äº†æ‹¦æˆªå™¨çš„å®šä¹‰å’Œé…ç½®ï¼Œä½†æ˜¯è¿™æ ·æ˜¯å¦å°±æ²¡é—®é¢˜äº†å‘¢ï¼Ÿå…¶å®ä¸ç„¶ï¼Œå¦‚æœä½¿ç”¨ä¸Šé¢è¿™ç§é…ç½®çš„è¯ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªç¼ºé™·ï¼Œé‚£å°±æ˜¯é™æ€èµ„æºè¢«æ‹¦æˆªäº†ã€‚å¯ä»¥åœ¨ resources/static/ ç›®å½•ä¸‹æ”¾ç½®ä¸€ä¸ªå›¾ç‰‡èµ„æºæˆ–è€… html æ–‡ä»¶ï¼Œç„¶åå¯åŠ¨é¡¹ç›®ç›´æ¥è®¿é—®ï¼Œå³å¯çœ‹åˆ°æ— æ³•è®¿é—®çš„ç°è±¡ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ Spring Boot 2.0 åºŸå¼ƒäº†WebMvcConfigurerAdapterï¼Œä½†æ˜¯ WebMvcConfigurationSupport åˆä¼šå¯¼è‡´é»˜è®¤çš„é™æ€èµ„æºè¢«æ‹¦æˆªï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å°†é™æ€èµ„æºæ”¾å¼€ã€‚</p>
<p>å¦‚ä½•æ”¾å¼€å‘¢ï¼Ÿé™¤äº†åœ¨ MyInterceptorConfig é…ç½®ç±»ä¸­é‡å†™ <code>addInterceptors</code> æ–¹æ³•å¤–ï¼Œè¿˜éœ€è¦å†é‡å†™ä¸€ä¸ªæ–¹æ³•ï¼š<code>addResourceHandlers</code>ï¼Œå°†é™æ€èµ„æºæ”¾å¼€ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æ¥æŒ‡å®šé™æ€èµ„æºä¸è¢«æ‹¦æˆªï¼Œå¦åˆ™ç»§æ‰¿WebMvcConfigurationSupportè¿™ç§æ–¹å¼ä¼šå¯¼è‡´é™æ€èµ„æºæ— æ³•ç›´æ¥è®¿é—®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    registry.addResourceHandler(<span class="string">"/**"</span>).addResourceLocations(<span class="string">"classpath:/static/"</span>);</span><br><span class="line">    <span class="keyword">super</span>.addResourceHandlers(registry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·é…ç½®å¥½ä¹‹åï¼Œé‡å¯é¡¹ç›®ï¼Œé™æ€èµ„æºä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚å¦‚æœä½ æ˜¯ä¸ªå–„äºå­¦ä¹ æˆ–è€…ç ”ç©¶çš„äººï¼Œé‚£è‚¯å®šä¸ä¼šæ­¢æ­¥äºæ­¤ï¼Œæ²¡é”™ï¼Œä¸Šé¢è¿™ç§æ–¹å¼çš„ç¡®èƒ½è§£å†³é™æ€èµ„æºæ— æ³•è®¿é—®çš„é—®é¢˜ï¼Œä½†æ˜¯ï¼Œè¿˜æœ‰æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥é…ç½®ã€‚</p>
<p>æˆ‘ä»¬ä¸ç»§æ‰¿ WebMvcConfigurationSupport ç±»ï¼Œç›´æ¥å®ç° WebMvcConfigurer æ¥å£ï¼Œç„¶åé‡å†™ <code>addInterceptors</code> æ–¹æ³•ï¼Œå°†è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨æ·»åŠ è¿›å»å³å¯ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®ç°WebMvcConfigurerä¸ä¼šå¯¼è‡´é™æ€èµ„æºè¢«æ‹¦æˆª</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> MyInterceptor()).addPathPatterns(<span class="string">"/**"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±éå¸¸æ–¹ä¾¿äº†ï¼Œå®ç° WebMvcConfigure æ¥å£çš„è¯ï¼Œä¸ä¼šæ‹¦æˆª Spring Boot é»˜è®¤çš„é™æ€èµ„æºã€‚</p>
<p>è¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œå…·ä½“ä»–ä»¬ä¹‹é—´çš„ç»†èŠ‚ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥åšè¿›ä¸€æ­¥çš„ç ”ç©¶ï¼Œç”±äºè¿™ä¸¤ç§æ–¹å¼çš„ä¸åŒï¼Œç»§æ‰¿ WebMvcConfigurationSupport ç±»çš„æ–¹å¼å¯ä»¥ç”¨åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œåå°ä¸éœ€è¦è®¿é—®é™æ€èµ„æºï¼ˆå°±ä¸éœ€è¦æ”¾å¼€é™æ€èµ„æºäº†ï¼‰ï¼›å®ç° WebMvcConfigure æ¥å£çš„æ–¹å¼å¯ä»¥ç”¨åœ¨éå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œå› ä¸ºéœ€è¦è¯»å–ä¸€äº›å›¾ç‰‡ã€cssã€jsæ–‡ä»¶ç­‰ç­‰ã€‚</p>
<h2 id="2-æ‹¦æˆªå™¨ä½¿ç”¨å®ä¾‹"><a href="#2-æ‹¦æˆªå™¨ä½¿ç”¨å®ä¾‹" class="headerlink" title="2. æ‹¦æˆªå™¨ä½¿ç”¨å®ä¾‹"></a>2. æ‹¦æˆªå™¨ä½¿ç”¨å®ä¾‹</h2><h3 id="2-1-åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•"><a href="#2-1-åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•" class="headerlink" title="2.1 åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•"></a>2.1 åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•</h3><p>ä¸€èˆ¬ç”¨æˆ·ç™»å½•åŠŸèƒ½æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼Œè¦ä¹ˆå¾€ session ä¸­å†™ä¸€ä¸ª userï¼Œè¦ä¹ˆé’ˆå¯¹æ¯ä¸ª user ç”Ÿæˆä¸€ä¸ª tokenï¼Œç¬¬äºŒç§è¦æ›´å¥½ä¸€ç‚¹ï¼Œé‚£ä¹ˆé’ˆå¯¹ç¬¬äºŒç§æ–¹å¼ï¼Œå¦‚æœç”¨æˆ·ç™»å½•æˆåŠŸäº†ï¼Œæ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½ä¼šå¸¦ä¸Šè¯¥ç”¨æˆ·çš„ tokenï¼Œå¦‚æœæœªç™»å½•ï¼Œåˆ™æ²¡æœ‰è¯¥ tokenï¼ŒæœåŠ¡ç«¯å¯ä»¥æ£€æµ‹è¿™ä¸ª token å‚æ•°çš„æœ‰æ— æ¥åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•ï¼Œä»è€Œå®ç°æ‹¦æˆªåŠŸèƒ½ã€‚æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ <code>preHandle</code> æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    HandlerMethod handlerMethod = (HandlerMethod) handler;</span><br><span class="line">    Method method = handlerMethod.getMethod();</span><br><span class="line">    String methodName = method.getName();</span><br><span class="line">    logger.info(<span class="string">"====æ‹¦æˆªåˆ°äº†æ–¹æ³•ï¼š&#123;&#125;ï¼Œåœ¨è¯¥æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ===="</span>, methodName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»é™†ï¼Œä¸€èˆ¬ç™»é™†ä¹‹åçš„ç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„token</span></span><br><span class="line">    String token = request.getParameter(<span class="string">"token"</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == token || <span class="string">""</span>.equals(token)) &#123;</span><br><span class="line">        logger.info(<span class="string">"ç”¨æˆ·æœªç™»å½•ï¼Œæ²¡æœ‰æƒé™æ‰§è¡Œâ€¦â€¦è¯·ç™»å½•"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›trueæ‰ä¼šç»§ç»­æ‰§è¡Œï¼Œè¿”å›falseåˆ™å–æ¶ˆå½“å‰è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/interceptor/test</code> åæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œå‘ç°è¢«æ‹¦æˆªï¼Œå¦‚æœåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/interceptor/test?token=123</code> å³å¯æ­£å¸¸å¾€ä¸‹èµ°ã€‚</p>
<h3 id="2-2-å–æ¶ˆæ‹¦æˆªæ“ä½œ"><a href="#2-2-å–æ¶ˆæ‹¦æˆªæ“ä½œ" class="headerlink" title="2.2 å–æ¶ˆæ‹¦æˆªæ“ä½œ"></a>2.2 å–æ¶ˆæ‹¦æˆªæ“ä½œ</h3><p>æ ¹æ®ä¸Šæ–‡ï¼Œå¦‚æœæˆ‘è¦æ‹¦æˆªæ‰€æœ‰ <code>/admin</code> å¼€å¤´çš„ url è¯·æ±‚çš„è¯ï¼Œéœ€è¦åœ¨æ‹¦æˆªå™¨é…ç½®ä¸­æ·»åŠ è¿™ä¸ªå‰ç¼€ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šæœ‰è¿™ç§åœºæ™¯å‡ºç°ï¼šæŸä¸ªè¯·æ±‚ä¹Ÿæ˜¯ <code>/admin</code> å¼€å¤´çš„ï¼Œä½†æ˜¯ä¸èƒ½æ‹¦æˆªï¼Œæ¯”å¦‚ <code>/admin/login</code> ç­‰ç­‰ï¼Œè¿™æ ·çš„è¯åˆéœ€è¦å»é…ç½®ã€‚é‚£ä¹ˆï¼Œå¯ä¸å¯ä»¥åšæˆä¸€ä¸ªç±»ä¼¼äºå¼€å…³çš„ä¸œè¥¿ï¼Œå“ªé‡Œä¸éœ€è¦æ‹¦æˆªï¼Œæˆ‘å°±åœ¨å“ªé‡Œå¼„ä¸ªå¼€å…³ä¸Šå»ï¼Œåšæˆè¿™ç§çµæ´»çš„å¯æ’æ‹”çš„æ•ˆæœå‘¢ï¼Ÿ</p>
<p>æ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œè¯¥æ³¨è§£ä¸“é—¨ç”¨æ¥å–æ¶ˆæ‹¦æˆªæ“ä½œï¼Œå¦‚æœæŸä¸ª Controller ä¸­çš„æ–¹æ³•æˆ‘ä»¬ä¸éœ€è¦æ‹¦æˆªæ‰ï¼Œå³å¯åœ¨è¯¥æ–¹æ³•ä¸ŠåŠ ä¸Šæˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£å³å¯ï¼Œä¸‹é¢å…ˆå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯¥æ³¨è§£ç”¨æ¥æŒ‡å®šæŸä¸ªæ–¹æ³•ä¸ç”¨æ‹¦æˆª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> UnInterception &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ Controller ä¸­çš„æŸä¸ªæ–¹æ³•ä¸Šæ·»åŠ è¯¥æ³¨è§£ï¼Œåœ¨æ‹¦æˆªå™¨å¤„ç†æ–¹æ³•ä¸­æ·»åŠ è¯¥æ³¨è§£å–æ¶ˆæ‹¦æˆªçš„é€»è¾‘ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    HandlerMethod handlerMethod = (HandlerMethod) handler;</span><br><span class="line">    Method method = handlerMethod.getMethod();</span><br><span class="line">    String methodName = method.getName();</span><br><span class="line">    logger.info(<span class="string">"====æ‹¦æˆªåˆ°äº†æ–¹æ³•ï¼š&#123;&#125;ï¼Œåœ¨è¯¥æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ===="</span>, methodName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡æ–¹æ³•ï¼Œå¯ä»¥è·å–è¯¥æ–¹æ³•ä¸Šçš„è‡ªå®šä¹‰æ³¨è§£ï¼Œç„¶åé€šè¿‡æ³¨è§£æ¥åˆ¤æ–­è¯¥æ–¹æ³•æ˜¯å¦è¦è¢«æ‹¦æˆª</span></span><br><span class="line">    <span class="comment">// @UnInterception æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£</span></span><br><span class="line">    UnInterception unInterception = method.getAnnotation(UnInterception<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != unInterception) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿”å›trueæ‰ä¼šç»§ç»­æ‰§è¡Œï¼Œè¿”å›falseåˆ™å–æ¶ˆå½“å‰è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Controller ä¸­çš„æ–¹æ³•ä»£ç å¯ä»¥å‚è§æºç ï¼Œé‡å¯é¡¹ç›®åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://localhost:8080/interceptor/test2?token=123</code> æµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒåŠ äº†è¯¥æ³¨è§£çš„æ–¹æ³•ä¸ä¼šè¢«æ‹¦æˆªã€‚</p>
<h2 id="3-æ€»ç»“-1"><a href="#3-æ€»ç»“-1" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>æœ¬èŠ‚ä¸»è¦ä»‹ç»äº† Spring Boot ä¸­æ‹¦æˆªå™¨çš„ä½¿ç”¨ï¼Œä»æ‹¦æˆªå™¨çš„åˆ›å»ºã€é…ç½®ï¼Œåˆ°æ‹¦æˆªå™¨å¯¹é™æ€èµ„æºçš„å½±å“ï¼Œéƒ½åšäº†è¯¦ç»†çš„åˆ†æã€‚Spring Boot 2.0 ä¹‹åæ‹¦æˆªå™¨çš„é…ç½®æ”¯æŒä¸¤ç§æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„é…ç½®æ–¹å¼ã€‚æœ€åç»“åˆå®é™…ä¸­çš„ä½¿ç”¨ï¼Œä¸¾äº†ä¸¤ä¸ªå¸¸ç”¨çš„åœºæ™¯ï¼Œå¸Œæœ›è¯»è€…èƒ½å¤Ÿè®¤çœŸæ¶ˆåŒ–ï¼ŒæŒæ¡æ‹¦æˆªå™¨çš„ä½¿ç”¨ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬14è¯¾ï¼šSpring-Boot-ä¸­é›†æˆRedis"><a href="#ç¬¬14è¯¾ï¼šSpring-Boot-ä¸­é›†æˆRedis" class="headerlink" title="ç¬¬14è¯¾ï¼šSpring Boot ä¸­é›†æˆRedis"></a>ç¬¬14è¯¾ï¼šSpring Boot ä¸­é›†æˆRedis</h1><h2 id="1-Redis-ä»‹ç»"><a href="#1-Redis-ä»‹ç»" class="headerlink" title="1. Redis ä»‹ç»"></a>1. Redis ä»‹ç»</h2><p>Redis æ˜¯ä¸€ç§éå…³ç³»å‹æ•°æ®åº“ï¼ˆNoSQLï¼‰ï¼ŒNoSQL æ˜¯ä»¥ key-value çš„å½¢å¼å­˜å‚¨çš„ï¼Œå’Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸ä¸€æ ·ï¼Œä¸ä¸€å®šéµå¾ªä¼ ç»Ÿæ•°æ®åº“çš„ä¸€äº›åŸºæœ¬è¦æ±‚ï¼Œæ¯”å¦‚è¯´ SQL æ ‡å‡†ï¼ŒACID å±æ€§ï¼Œè¡¨ç»“æ„ç­‰ç­‰ï¼Œè¿™ç±»æ•°æ®åº“ä¸»è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼šéå…³ç³»å‹çš„ã€åˆ†å¸ƒå¼çš„ã€å¼€æºçš„ã€æ°´å¹³å¯æ‰©å±•çš„ã€‚<br>NoSQL ä½¿ç”¨åœºæ™¯æœ‰ï¼šå¯¹æ•°æ®é«˜å¹¶å‘è¯»å†™ã€å¯¹æµ·é‡æ•°æ®çš„é«˜æ•ˆç‡å­˜å‚¨å’Œè®¿é—®ã€å¯¹æ•°æ®çš„é«˜å¯æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§ç­‰ç­‰ã€‚<br>Redis çš„ key å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å“ˆå¸Œã€é“¾è¡¨ã€é›†åˆå’Œæœ‰åºé›†åˆã€‚value ç±»å‹å¾ˆå¤šï¼ŒåŒ…æ‹¬ Stringã€listã€setã€zsetã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒ push/popã€add/removeã€å–äº¤é›†å’Œå¹¶é›†ä»¥åŠæ›´å¤šæ›´ä¸°å¯Œçš„æ“ä½œï¼ŒRedis ä¹Ÿæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯åœ¨ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå®ƒä¹Ÿå¯ä»¥å‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ä¸­ã€‚ æœ‰äº† redis æœ‰å“ªäº›å¥½å¤„å‘¢ï¼Ÿä¸¾ä¸ªæ¯”è¾ƒç®€å•çš„ä¾‹å­ï¼Œçœ‹ä¸‹å›¾ï¼š </p>
<p><img src="https://images.gitbook.cn/4258b9c0-9f93-11e8-a34f-d93da92347ea" alt="Redisä½¿ç”¨åœºæ™¯"></p>
<p>Redis é›†ç¾¤å’Œ Mysql æ˜¯åŒæ­¥çš„ï¼Œé¦–å…ˆä¼šä» redis ä¸­è·å–æ•°æ®ï¼Œå¦‚æœ redis æŒ‚äº†ï¼Œå†ä» mysql ä¸­è·å–æ•°æ®ï¼Œè¿™æ ·ç½‘ç«™å°±ä¸ä¼šæŒ‚æ‰ã€‚æ›´å¤šå…³äº redis çš„ä»‹ç»ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Œå¯ä»¥è°·æ­Œå’Œç™¾åº¦ï¼Œåœ¨è¿™å°±ä¸èµ˜è¿°äº†ã€‚</p>
<h2 id="2-Redis-å®‰è£…"><a href="#2-Redis-å®‰è£…" class="headerlink" title="2. Redis å®‰è£…"></a>2. Redis å®‰è£…</h2><p>æœ¬è¯¾ç¨‹æ˜¯åœ¨ vmvare è™šæ‹Ÿæœºä¸­æ¥å®‰è£…çš„ redis ï¼ˆcentos 7ï¼‰ï¼Œå­¦ä¹ çš„æ—¶å€™å¦‚æœæœ‰è‡ªå·±çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨é˜¿é‡Œäº‘ä¸­æ¥å®‰è£… redisï¼Œéƒ½å¯ä»¥ã€‚åªè¦èƒ½ ping çš„é€šäº‘ä¸»æœºæˆ–è€…è™šæ‹Ÿæœºçš„ ipï¼Œç„¶ååœ¨è™šæ‹Ÿæœºæˆ–è€…äº‘ä¸»æœºä¸­æ”¾è¡Œå¯¹åº”çš„ç«¯å£ï¼ˆæˆ–è€…å…³æ‰é˜²ç«å¢™ï¼‰å³å¯è®¿é—® redisã€‚ä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹ redis çš„å®‰è£…è¿‡ç¨‹ï¼š</p>
<ul>
<li>å®‰è£… gcc ç¼–è¯‘</li>
</ul>
<p>å› ä¸ºåé¢å®‰è£…redisçš„æ—¶å€™éœ€è¦ç¼–è¯‘ï¼Œæ‰€ä»¥äº‹å…ˆå¾—å…ˆå®‰è£…gccç¼–è¯‘ã€‚é˜¿é‡Œäº‘ä¸»æœºå·²ç»é»˜è®¤å®‰è£…äº† gccï¼Œå¦‚æœæ˜¯è‡ªå·±å®‰è£…çš„è™šæ‹Ÿæœºï¼Œé‚£ä¹ˆéœ€è¦å…ˆå®‰è£…ä¸€ä¸‹ gccï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc-c++</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸‹è½½ redis</li>
</ul>
<p>æœ‰ä¸¤ç§æ–¹å¼ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸€ç§æ˜¯å»å®˜ç½‘ä¸Šä¸‹è½½ï¼ˆ<a href="https://redis.ioï¼‰ï¼Œç„¶åå°†å®‰è£…åŒ…è€ƒåˆ°" target="_blank" rel="noopener">https://redis.ioï¼‰ï¼Œç„¶åå°†å®‰è£…åŒ…è€ƒåˆ°</a> centos ä¸­ï¼Œå¦ç§æ–¹æ³•æ˜¯ç›´æ¥ä½¿ç”¨ wget æ¥ä¸‹è½½ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-3.2.8.tar.gz</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰å®‰è£…è¿‡ wgetï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install wget</span><br></pre></td></tr></table></figure>

<ul>
<li>è§£å‹å®‰è£…</li>
</ul>
<p>è§£å‹å®‰è£…åŒ…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar â€“vzxf redis-3.2.8.tar.gz</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°†è§£å‹çš„æ–‡ä»¶å¤¹ redis-3.2.8 æ”¾åˆ° <code>/usr/local/</code> ä¸‹ï¼Œä¸€èˆ¬å®‰è£…è½¯ä»¶éƒ½æ”¾åœ¨ <code>/usr/local</code> ä¸‹ã€‚ç„¶åè¿›å…¥ <code>/usr/local/redis-3.2.8/</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œ <code>make</code> å‘½ä»¤å³å¯å®Œæˆå®‰è£…ã€‚<br>ã€æ³¨ã€‘å¦‚æœ make å¤±è´¥ï¼Œå¯ä»¥å°è¯•å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make MALLOC&#x3D;libc</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li>
</ul>
<p>å®‰è£…æˆåŠŸä¹‹åï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬å…è®¸æ¥å…¥çš„ ipï¼Œå…è®¸åå°æ‰§è¡Œï¼Œè®¾ç½®å¯†ç ç­‰ç­‰ã€‚<br>æ‰“å¼€ redis é…ç½®æ–‡ä»¶ï¼š<code>vi redis.conf</code><br>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥ <code>/bind</code> æ¥æŸ¥æ‰¾ bind é…ç½®ï¼ŒæŒ‰ n æ¥æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼Œæ‰¾åˆ°é…ç½®åï¼Œå°† bind é…ç½®æˆ 0.0.0.0ï¼Œå…è®¸ä»»æ„æœåŠ¡å™¨æ¥è®¿é—® redisï¼Œå³ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind 0.0.0.0</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œå°† daemonize æ”¹æˆ yes ï¼ˆé»˜è®¤ä¸º noï¼‰ï¼Œå…è®¸ redis åœ¨åå°æ‰§è¡Œã€‚<br>å°† requirepass æ³¨é‡Šæ‰“å¼€ï¼Œå¹¶è®¾ç½®å¯†ç ä¸º 123456ï¼ˆå¯†ç è‡ªå·±è®¾ç½®ï¼‰ã€‚</p>
<ul>
<li>å¯åŠ¨ redis</li>
</ul>
<p>åœ¨ redis-3.2.8 ç›®å½•ä¸‹ï¼ŒæŒ‡å®šåˆšåˆšä¿®æ”¹å¥½çš„é…ç½®æ–‡ä»¶ redis.conf æ¥å¯åŠ¨ redisï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server .&#x2F;redis.conf</span><br></pre></td></tr></table></figure>
<p>å†å¯åŠ¨ redis å®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli</span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬è®¾ç½®äº†å¯†ç ï¼Œåœ¨å¯åŠ¨å®¢æˆ·ç«¯ä¹‹åï¼Œè¾“å…¥ <code>auth 123456</code> å³å¯ç™»å½•è¿›å…¥å®¢æˆ·ç«¯ã€‚<br>ç„¶åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå¾€ redis ä¸­æ’å…¥ä¸€ä¸ªæ•°æ®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set name CSDN</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ¥è·å– name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get name</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ­£å¸¸è·å–åˆ° CSDNï¼Œåˆ™è¯´æ˜æ²¡æœ‰é—®é¢˜ã€‚</p>
<h2 id="3-Spring-Boot-é›†æˆ-Redis"><a href="#3-Spring-Boot-é›†æˆ-Redis" class="headerlink" title="3. Spring Boot é›†æˆ Redis"></a>3. Spring Boot é›†æˆ Redis</h2><h3 id="3-1-ä¾èµ–å¯¼å…¥"><a href="#3-1-ä¾èµ–å¯¼å…¥" class="headerlink" title="3.1 ä¾èµ–å¯¼å…¥"></a>3.1 ä¾èµ–å¯¼å…¥</h3><p>Spring Boot é›†æˆ redis å¾ˆæ–¹ä¾¿ï¼Œåªéœ€è¦å¯¼å…¥ä¸€ä¸ª redis çš„ starter ä¾èµ–å³å¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é˜¿é‡Œå·´å·´fastjson --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.35<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¹Ÿå¯¼å…¥é˜¿é‡Œå·´å·´çš„ fastjson æ˜¯ä¸ºäº†åœ¨åé¢æˆ‘ä»¬è¦å­˜ä¸€ä¸ªå®ä½“ï¼Œä¸ºäº†æ–¹ä¾¿æŠŠå®ä½“è½¬æ¢æˆ json å­—ç¬¦ä¸²å­˜è¿›å»ã€‚</p>
<h3 id="3-2-Redis-é…ç½®"><a href="#3-2-Redis-é…ç½®" class="headerlink" title="3.2 Redis é…ç½®"></a>3.2 Redis é…ç½®</h3><p>å¯¼å…¥äº†ä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬åœ¨ application.yml æ–‡ä»¶é‡Œé…ç½® redisï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment">#redisç›¸å…³é…ç½®</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">5</span></span><br><span class="line">    <span class="comment"># é…ç½®redisçš„ä¸»æœºåœ°å€ï¼Œéœ€è¦ä¿®æ”¹æˆè‡ªå·±çš„</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.48</span><span class="number">.190</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">5000</span></span><br><span class="line">    <span class="attr">jedis:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="comment"># è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥ï¼Œé»˜è®¤å€¼ä¹Ÿæ˜¯8ã€‚</span></span><br><span class="line">        <span class="attr">max-idle:</span> <span class="number">500</span></span><br><span class="line">        <span class="comment"># è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥ï¼Œé»˜è®¤å€¼ä¹Ÿæ˜¯0ã€‚</span></span><br><span class="line">        <span class="attr">min-idle:</span> <span class="number">50</span></span><br><span class="line">        <span class="comment"># å¦‚æœèµ‹å€¼ä¸º-1ï¼Œåˆ™è¡¨ç¤ºä¸é™åˆ¶ï¼›å¦‚æœpoolå·²ç»åˆ†é…äº†maxActiveä¸ªjediså®ä¾‹ï¼Œåˆ™æ­¤æ—¶poolçš„çŠ¶æ€ä¸ºexhausted(è€—å°½)</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">1000</span></span><br><span class="line">        <span class="comment"># ç­‰å¾…å¯ç”¨è¿æ¥çš„æœ€å¤§æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤å€¼ä¸º-1ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚å¦‚æœè¶…è¿‡ç­‰å¾…æ—¶é—´ï¼Œåˆ™ç›´æ¥æŠ›å‡ºJedisConnectionException</span></span><br><span class="line">        <span class="attr">max-wait:</span> <span class="number">2000</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-å¸¸ç”¨-api-ä»‹ç»"><a href="#3-3-å¸¸ç”¨-api-ä»‹ç»" class="headerlink" title="3.3 å¸¸ç”¨ api ä»‹ç»"></a>3.3 å¸¸ç”¨ api ä»‹ç»</h3><p>Spring Boot å¯¹ redis çš„æ”¯æŒå·²ç»éå¸¸å®Œå–„äº†ï¼Œä¸°å¯Œçš„ api å·²ç»è¶³å¤Ÿæˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ï¼Œè¿™é‡Œæˆ‘ä»‹ç»å‡ ä¸ªæœ€å¸¸ç”¨çš„ä¾›å¤§å®¶å­¦ä¹ ï¼Œå…¶ä»– api å¸Œæœ›å¤§å®¶è‡ªå·±å¤šå­¦ä¹ ï¼Œå¤šç ”ç©¶ã€‚ç”¨åˆ°ä¼šå»æŸ¥å³å¯ã€‚</p>
<p>æœ‰ä¸¤ä¸ª redis æ¨¡æ¿ï¼šRedisTemplate å’Œ StringRedisTemplateã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ RedisTemplateï¼ŒRedisTemplate æä¾›ç»™æˆ‘ä»¬æ“ä½œå¯¹è±¡ï¼Œæ“ä½œå¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸æ˜¯ä»¥ json æ ¼å¼å­˜å‚¨ï¼Œä½†åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ Redis é»˜è®¤çš„å†…éƒ¨åºåˆ—åŒ–å™¨ï¼›å¯¼è‡´æˆ‘ä»¬å­˜è¿›é‡Œé¢çš„æ˜¯ä¹±ç ä¹‹ç±»çš„ä¸œè¥¿ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰åºåˆ—åŒ–ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥ä½¿ç”¨ StringRedisTemplate æ¨¡æ¿ã€‚StringRedisTemplate ä¸»è¦ç»™æˆ‘ä»¬æä¾›å­—ç¬¦ä¸²æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ä½“ç±»ç­‰è½¬æˆ json å­—ç¬¦ä¸²å³å¯ï¼Œåœ¨å–å‡ºæ¥åï¼Œä¹Ÿå¯ä»¥è½¬æˆç›¸åº”çš„å¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸Šé¢æˆ‘å¯¼å…¥äº†é˜¿é‡Œ fastjson çš„åŸå› ã€‚</p>
<h4 id="3-3-1-redis-string-ç±»å‹"><a href="#3-3-1-redis-string-ç±»å‹" class="headerlink" title="3.3.1 redis:string ç±»å‹"></a>3.3.1 redis:string ç±»å‹</h4><p>æ–°å»ºä¸€ä¸ª RedisServiceï¼Œæ³¨å…¥ StringRedisTemplateï¼Œä½¿ç”¨ <code>stringRedisTemplate.opsForValue()</code> å¯ä»¥è·å– <code>ValueOperations&lt;String, String&gt;</code> å¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡å³å¯è¯»å†™ redis æ•°æ®åº“äº†ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * set redis: stringç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setString</span><span class="params">(String key, String value)</span></span>&#123;</span><br><span class="line">        ValueOperations&lt;String, String&gt; valueOperations = stringRedisTemplate.opsForValue();</span><br><span class="line">        valueOperations.set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * get redis: stringç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getString</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å¯¹è±¡æ“ä½œçš„æ˜¯ stringï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å­˜å®ä½“ç±»ï¼Œåªéœ€è¦å°†å®ä½“ç±»è½¬æ¢æˆ json å­—ç¬¦ä¸²å³å¯ã€‚ä¸‹é¢æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">Course14ApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(Course14ApplicationTests<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> RedisService redisService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æµ‹è¯•redisçš„stringç±»å‹</span></span><br><span class="line">        redisService.setString(<span class="string">"weichat"</span>,<span class="string">"ç¨‹åºå‘˜ç§æˆ¿èœ"</span>);</span><br><span class="line">        logger.info(<span class="string">"æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ä¸ºï¼š&#123;&#125;"</span>, redisService.getString(<span class="string">"weichat"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯ä¸ªå®ä½“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jsonå·¥å…·è½¬æˆjsonå­—ç¬¦ä¸²ï¼Œ</span></span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">"CSDN"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        redisService.setString(<span class="string">"userInfo"</span>, JSON.toJSONString(user));</span><br><span class="line">        logger.info(<span class="string">"ç”¨æˆ·ä¿¡æ¯ï¼š&#123;&#125;"</span>, redisService.getString(<span class="string">"userInfo"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…ˆå¯åŠ¨ redisï¼Œç„¶åè¿è¡Œè¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè§‚å¯Ÿæ§åˆ¶å°æ‰“å°çš„æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ä¸ºï¼šç¨‹åºå‘˜ç§æˆ¿èœ</span><br><span class="line">ç”¨æˆ·ä¿¡æ¯ï¼š&#123;&quot;password&quot;:&quot;123456&quot;,&quot;username&quot;:&quot;CSDN&quot;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-2-redis-hash-ç±»å‹"><a href="#3-3-2-redis-hash-ç±»å‹" class="headerlink" title="3.3.2 redis:hash ç±»å‹"></a>3.3.2 redis:hash ç±»å‹</h4><p>hash ç±»å‹å…¶å®åŸç†å’Œ string ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ª keyï¼Œä½¿ç”¨ <code>stringRedisTemplate.opsForHash()</code> å¯ä»¥è·å– <code>HashOperations&lt;String, Object, Object&gt;</code> å¯¹è±¡ã€‚æ¯”å¦‚æˆ‘ä»¬è¦å­˜å‚¨è®¢å•ä¿¡æ¯ï¼Œæ‰€æœ‰è®¢å•ä¿¡æ¯éƒ½æ”¾åœ¨ order ä¸‹ï¼Œé’ˆå¯¹ä¸åŒç”¨æˆ·çš„è®¢å•å®ä½“ï¼Œå¯ä»¥é€šè¿‡ç”¨æˆ·çš„ id æ¥åŒºåˆ†ï¼Œè¿™å°±ç›¸å½“äºä¸¤ä¸ª key äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * set redis: hashç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filedKey filedkey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHash</span><span class="params">(String key, String filedKey, String value)</span></span>&#123;</span><br><span class="line">        HashOperations&lt;String, Object, Object&gt; hashOperations = stringRedisTemplate.opsForHash();</span><br><span class="line">        hashOperations.put(key,filedKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * get redis: hashç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filedkey filedkey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHash</span><span class="params">(String key, String filedkey)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (String) stringRedisTemplate.opsForHash().get(key, filedkey);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œhash å’Œ string æ²¡å•¥ä¸¤æ ·ï¼Œåªä¸è¿‡å¤šäº†ä¸ªå‚æ•°ï¼ŒSpring Boot ä¸­æ“ä½œ redis éå¸¸ç®€å•æ–¹ä¾¿ã€‚æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course14ApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(Course14ApplicationTests<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> RedisService redisService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æµ‹è¯•redisçš„hashç±»å‹</span></span><br><span class="line">        redisService.setHash(<span class="string">"user"</span>, <span class="string">"name"</span>, JSON.toJSONString(user));</span><br><span class="line">        logger.info(<span class="string">"ç”¨æˆ·å§“åï¼š&#123;&#125;"</span>, redisService.getHash(<span class="string">"user"</span>,<span class="string">"name"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-3-redis-list-ç±»å‹"><a href="#3-3-3-redis-list-ç±»å‹" class="headerlink" title="3.3.3 redis:list ç±»å‹"></a>3.3.3 redis:list ç±»å‹</h4><p>ä½¿ç”¨ <code>stringRedisTemplate.opsForList()</code> å¯ä»¥è·å– <code>ListOperations&lt;String, String&gt; listOperations</code>  redis åˆ—è¡¨å¯¹è±¡ï¼Œè¯¥åˆ—è¡¨æ˜¯ä¸ªç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¯ä»¥æ”¯æŒä»å·¦ä¾§æ·»åŠ ï¼Œä¹Ÿå¯ä»¥æ”¯æŒä»å³ä¾§æ·»åŠ ï¼Œä¸€ä¸ªåˆ—è¡¨æœ€å¤šåŒ…å« 2 ^ 32 -1 ä¸ªå…ƒç´ ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * set redis:listç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">setList</span><span class="params">(String key, String value)</span></span>&#123;</span><br><span class="line">        ListOperations&lt;String, String&gt; listOperations = stringRedisTemplate.opsForList();</span><br><span class="line">        <span class="keyword">return</span> listOperations.leftPush(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * get redis:listç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start start</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end end</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getList</span><span class="params">(String key, <span class="keyword">long</span> start, <span class="keyword">long</span> end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stringRedisTemplate.opsForList().range(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¿™äº› api éƒ½æ˜¯ä¸€æ ·çš„å½¢å¼ï¼Œæ–¹ä¾¿è®°å¿†ä¹Ÿæ–¹ä¾¿ä½¿ç”¨ã€‚å…·ä½“çš„ api ç»†èŠ‚æˆ‘å°±ä¸å±•å¼€äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±çœ‹ api æ–‡æ¡£ã€‚å…¶å®ï¼Œè¿™äº› api æ ¹æ®å‚æ•°å’Œè¿”å›å€¼ä¹Ÿèƒ½çŸ¥é“å®ƒä»¬æ˜¯åšä»€ä¹ˆç”¨çš„ã€‚æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">Course14ApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(Course14ApplicationTests<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> RedisService redisService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æµ‹è¯•redisçš„listç±»å‹</span></span><br><span class="line">        redisService.setList(<span class="string">"list"</span>, <span class="string">"football"</span>);</span><br><span class="line">        redisService.setList(<span class="string">"list"</span>, <span class="string">"basketball"</span>);</span><br><span class="line">        List&lt;String&gt; valList = redisService.getList(<span class="string">"list"</span>,<span class="number">0</span>,-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(String value :valList)&#123;</span><br><span class="line">            logger.info(<span class="string">"listä¸­æœ‰ï¼š&#123;&#125;"</span>, value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-æ€»ç»“-6"><a href="#4-æ€»ç»“-6" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬èŠ‚ä¸»è¦ä»‹ç»äº† redis çš„ä½¿ç”¨åœºæ™¯ã€å®‰è£…è¿‡ç¨‹ï¼Œä»¥åŠ Spring Boot ä¸­é›†æˆ redis çš„è¯¦ç»†æ­¥éª¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€šå¸¸éƒ½ç”¨ redis ä½œä¸ºç¼“å­˜ï¼Œåœ¨æŸ¥è¯¢æ•°æ®åº“çš„æ—¶å€™ï¼Œä¼šå…ˆä» redis ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæœ‰ä¿¡æ¯ï¼Œåˆ™ä» redis ä¸­å–ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä»æ•°æ®åº“ä¸­æŸ¥ï¼Œå¹¶ä¸”åŒæ­¥åˆ° redis ä¸­ï¼Œä¸‹æ¬¡ redis ä¸­å°±æœ‰äº†ã€‚æ›´æ–°å’Œåˆ é™¤ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œéƒ½éœ€è¦åŒæ­¥åˆ° redisã€‚redis åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹è¿ç”¨çš„å¾ˆå¤šã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬15è¯¾ï¼š-Spring-Bootä¸­é›†æˆActiveMQ"><a href="#ç¬¬15è¯¾ï¼š-Spring-Bootä¸­é›†æˆActiveMQ" class="headerlink" title="ç¬¬15è¯¾ï¼š Spring Bootä¸­é›†æˆActiveMQ"></a>ç¬¬15è¯¾ï¼š Spring Bootä¸­é›†æˆActiveMQ</h1><h2 id="1-JMS-å’Œ-ActiveMQ-ä»‹ç»"><a href="#1-JMS-å’Œ-ActiveMQ-ä»‹ç»" class="headerlink" title="1. JMS å’Œ ActiveMQ ä»‹ç»"></a>1. JMS å’Œ ActiveMQ ä»‹ç»</h2><h3 id="1-1-JMS-æ˜¯å•¥"><a href="#1-1-JMS-æ˜¯å•¥" class="headerlink" title="1.1 JMS æ˜¯å•¥"></a>1.1 JMS æ˜¯å•¥</h3><p>ç™¾åº¦ç™¾ç§‘çš„è§£é‡Šï¼š</p>
<blockquote>
<p>JMS å³ Java æ¶ˆæ¯æœåŠ¡ï¼ˆJava Message Serviceï¼‰åº”ç”¨ç¨‹åºæ¥å£ï¼Œæ˜¯ä¸€ä¸ªJavaå¹³å°ä¸­å…³äºé¢å‘æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMOMï¼‰çš„ APIï¼Œç”¨äºåœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ï¼Œæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚Java æ¶ˆæ¯æœåŠ¡æ˜¯ä¸€ä¸ªä¸å…·ä½“å¹³å°æ— å…³çš„ APIï¼Œç»å¤§å¤šæ•° MOM æä¾›å•†éƒ½å¯¹ JMS æä¾›æ”¯æŒã€‚</p>
</blockquote>
<p>JMS åªæ˜¯æ¥å£ï¼Œä¸åŒçš„æä¾›å•†æˆ–è€…å¼€æºç»„ç»‡å¯¹å…¶æœ‰ä¸åŒçš„å®ç°ï¼ŒActiveMQ å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒæ”¯æŒJMSï¼Œæ˜¯ Apache æ¨å‡ºçš„ã€‚JMS ä¸­æœ‰å‡ ä¸ªå¯¹è±¡æ¨¡å‹ï¼š</p>
<blockquote>
<p>è¿æ¥å·¥å‚ï¼šConnectionFactory<br>JMSè¿æ¥ï¼šConnection<br>JMSä¼šè¯ï¼šSession<br>JMSç›®çš„ï¼šDestination<br>JMSç”Ÿäº§è€…ï¼šProducer<br>JMSæ¶ˆè´¹è€…ï¼šConsumer<br>JMSæ¶ˆæ¯ä¸¤ç§ç±»å‹ï¼šç‚¹å¯¹ç‚¹å’Œå‘å¸ƒ/è®¢é˜…ã€‚  </p>
</blockquote>
<p>å¯ä»¥çœ‹å‡º JMS å®é™…ä¸Šå’Œ JDBC æœ‰ç‚¹ç±»ä¼¼ï¼ŒJDBC æ˜¯å¯ä»¥ç”¨æ¥è®¿é—®è®¸å¤šä¸åŒå…³ç³»æ•°æ®åº“çš„ APIï¼Œè€Œ JMS åˆ™æä¾›åŒæ ·ä¸å‚å•†æ— å…³çš„è®¿é—®æ–¹æ³•ï¼Œä»¥è®¿é—®æ¶ˆæ¯æ”¶å‘æœåŠ¡ã€‚æœ¬æ–‡ä¸»è¦ä½¿ç”¨ ActiveMQã€‚</p>
<h3 id="1-2-ActiveMQ"><a href="#1-2-ActiveMQ" class="headerlink" title="1.2 ActiveMQ"></a>1.2 ActiveMQ</h3><p>ActiveMQ æ˜¯ Apache çš„ä¸€ä¸ªèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ã€‚ActiveMQ å®Œå…¨æ”¯æŒJMS1.1å’ŒJ2EE 1.4è§„èŒƒï¼Œå°½ç®¡ JMS è§„èŒƒå‡ºå°å·²ç»æ˜¯å¾ˆä¹…çš„äº‹æƒ…äº†ï¼Œä½†æ˜¯ JMS åœ¨å½“ä»Šçš„ Java EE åº”ç”¨ä¸­é—´ä»ç„¶æ‰®æ¼”ç€ç‰¹æ®Šçš„åœ°ä½ã€‚ActiveMQ ç”¨åœ¨å¼‚æ­¥æ¶ˆæ¯çš„å¤„ç†ä¸Šï¼Œæ‰€è°“å¼‚æ­¥æ¶ˆæ¯å³æ¶ˆæ¯å‘é€è€…æ— éœ€ç­‰å¾…æ¶ˆæ¯æ¥æ”¶è€…çš„å¤„ç†ä»¥åŠè¿”å›ï¼Œç”šè‡³æ— éœ€å…³å¿ƒæ¶ˆæ¯æ˜¯å¦å‘é€æˆåŠŸã€‚   </p>
<p>å¼‚æ­¥æ¶ˆæ¯ä¸»è¦æœ‰ä¸¤ç§ç›®çš„åœ°å½¢å¼ï¼Œé˜Ÿåˆ—ï¼ˆqueueï¼‰å’Œä¸»é¢˜ï¼ˆtopicï¼‰ï¼Œé˜Ÿåˆ—ç”¨äºç‚¹å¯¹ç‚¹å½¢å¼çš„æ¶ˆæ¯é€šä¿¡ï¼Œä¸»é¢˜ç”¨äºå‘å¸ƒ/è®¢é˜…å¼çš„æ¶ˆæ¯é€šä¿¡ã€‚æœ¬ç« èŠ‚ä¸»è¦æ¥å­¦ä¹ ä¸€ä¸‹åœ¨ Spring Boot ä¸­å¦‚ä½•ä½¿ç”¨è¿™ä¸¤ç§å½¢å¼çš„æ¶ˆæ¯ã€‚</p>
<h2 id="2-ActiveMQå®‰è£…"><a href="#2-ActiveMQå®‰è£…" class="headerlink" title="2. ActiveMQå®‰è£…"></a>2. ActiveMQå®‰è£…</h2><p>ä½¿ç”¨ ActiveMQ é¦–å…ˆéœ€è¦å»å®˜ç½‘ä¸‹è½½ï¼Œå®˜ç½‘åœ°å€ä¸ºï¼š<a href="http://activemq.apache.org/" target="_blank" rel="noopener">http://activemq.apache.org/</a><br>æœ¬è¯¾ç¨‹ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ apache-activemq-5.15.3ï¼Œä¸‹è½½åè§£å‹ç¼©ä¼šæœ‰ä¸€ä¸ªåä¸º apache-activemq-5.15.3 çš„æ–‡ä»¶å¤¹ï¼Œæ²¡é”™ï¼Œè¿™å°±å®‰è£…å¥½äº†ï¼Œéå¸¸ç®€å•ï¼Œå¼€ç®±å³ç”¨ã€‚æ‰“å¼€æ–‡ä»¶å¤¹ä¼šçœ‹åˆ°é‡Œé¢æœ‰ä¸ª <code>activemq-all-5.15.3.jar</code>ï¼Œè¿™ä¸ª jar æˆ‘ä»¬æ˜¯å¯ä»¥åŠ è¿›å·¥ç¨‹é‡Œçš„ï¼Œä½†æ˜¯ä½¿ç”¨ maven çš„è¯ï¼Œè¿™ä¸ª jar æˆ‘ä»¬ä¸éœ€è¦ã€‚</p>
<p>åœ¨ä½¿ç”¨ ActiveMQ ä¹‹å‰ï¼Œé¦–å…ˆå¾—å…ˆå¯åŠ¨ï¼Œåˆšæ‰è§£å‹åçš„ç›®å½•ä¸­æœ‰ä¸ª bin ç›®å½•ï¼Œé‡Œé¢æœ‰ win32 å’Œ win64 ä¸¤ä¸ªç›®å½•ï¼Œæ ¹æ®è‡ªå·±ç”µè„‘é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ‰“å¼€è¿è¡Œé‡Œé¢çš„ activemq.bat å³å¯å¯åŠ¨ ActiveMQã€‚<br>æ¶ˆæ¯ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯å‘å¸ƒåˆ°queueä¸­ï¼Œç„¶åæ¶ˆæ¯æ¶ˆè´¹è€…ä»queueä¸­å–å‡ºï¼Œå¹¶ä¸”æ¶ˆè´¹æ¶ˆæ¯ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼šæ¶ˆæ¯è¢«æ¶ˆè´¹è€…æ¶ˆè´¹ä»¥åï¼Œqueueä¸­ä¸å†æœ‰å­˜å‚¨ï¼Œæ‰€ä»¥æ¶ˆæ¯æ¶ˆè´¹è€…ä¸å¯æ¶ˆè´¹åˆ°å·²ç»è¢«æ¶ˆè´¹çš„æ¶ˆæ¯ã€‚Queueæ”¯æŒå­˜åœ¨å¤šä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªæ¶ˆæ¯è€Œè¨€ï¼Œåªä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹<br>å¯åŠ¨å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://127.0.0.1:8161/admin/</code> æ¥è®¿é—® ActiveMQ çš„æœåŠ¡å™¨ï¼Œç”¨æˆ·åå’Œå¯†ç æ˜¯ admin/adminã€‚å¦‚ä¸‹ï¼š</p>
<p><img src="https://images.gitbook.cn/cfb9c460-aa94-11e8-888f-df33be8ed191" alt="activemq"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ Queues å’Œ Topics è¿™ä¸¤ä¸ªé€‰é¡¹ï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹åˆ†åˆ«æ˜¯ç‚¹å¯¹ç‚¹æ¶ˆæ¯å’Œå‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„æŸ¥çœ‹çª—å£ã€‚ä½•ä¸ºç‚¹å¯¹ç‚¹æ¶ˆæ¯å’Œå‘å¸ƒ/è®¢é˜…æ¶ˆæ¯å‘¢ï¼Ÿ</p>
<p>ç‚¹å¯¹ç‚¹æ¶ˆæ¯ï¼šæ¶ˆæ¯ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯å‘å¸ƒåˆ° queue ä¸­ï¼Œç„¶åæ¶ˆæ¯æ¶ˆè´¹è€…ä» queue ä¸­å–å‡ºï¼Œå¹¶ä¸”æ¶ˆè´¹æ¶ˆæ¯ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼šæ¶ˆæ¯è¢«æ¶ˆè´¹è€…æ¶ˆè´¹ä»¥åï¼Œqueue ä¸­ä¸å†æœ‰å­˜å‚¨ï¼Œæ‰€ä»¥æ¶ˆæ¯æ¶ˆè´¹è€…ä¸å¯æ¶ˆè´¹åˆ°å·²ç»è¢«æ¶ˆè´¹çš„æ¶ˆæ¯ã€‚Queue æ”¯æŒå­˜åœ¨å¤šä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªæ¶ˆæ¯è€Œè¨€ï¼Œåªä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹ã€‚</p>
<p>å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯ï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆå‘å¸ƒï¼‰å°†æ¶ˆæ¯å‘å¸ƒåˆ° topic ä¸­ï¼ŒåŒæ—¶æœ‰å¤šä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…ï¼ˆè®¢é˜…ï¼‰æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚å’Œç‚¹å¯¹ç‚¹æ–¹å¼ä¸åŒï¼Œå‘å¸ƒåˆ° topic çš„æ¶ˆæ¯ä¼šè¢«æ‰€æœ‰è®¢é˜…è€…æ¶ˆè´¹ã€‚ä¸‹é¢åˆ†æå…·ä½“çš„å®ç°æ–¹å¼ã€‚</p>
<h2 id="3-ActiveMQé›†æˆ"><a href="#3-ActiveMQé›†æˆ" class="headerlink" title="3. ActiveMQé›†æˆ"></a>3. ActiveMQé›†æˆ</h2><h3 id="3-1-ä¾èµ–å¯¼å…¥å’Œé…ç½®"><a href="#3-1-ä¾èµ–å¯¼å…¥å’Œé…ç½®" class="headerlink" title="3.1 ä¾èµ–å¯¼å…¥å’Œé…ç½®"></a>3.1 ä¾èµ–å¯¼å…¥å’Œé…ç½®</h3><p>åœ¨ Spring Boot ä¸­é›†æˆ ActiveMQ éœ€è¦å¯¼å…¥å¦‚ä¸‹ starter ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-activemq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ application.yml é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯¹ activemq åšä¸€ä¸‹é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">activemq:</span></span><br><span class="line">  	<span class="comment"># activemq url</span></span><br><span class="line">    <span class="attr">broker-url:</span> <span class="string">tcp://localhost:61616</span></span><br><span class="line">    <span class="attr">in-memory:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">pool:</span></span><br><span class="line">      <span class="comment"># å¦‚æœæ­¤å¤„è®¾ç½®ä¸ºtrueï¼Œéœ€è¦æ·»åŠ activemq-poolçš„ä¾èµ–åŒ…ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é…ç½®å¤±è´¥ï¼Œæ— æ³•æ³¨å…¥JmsMessagingTemplate</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-Queue-å’Œ-Topic-çš„åˆ›å»º"><a href="#3-2-Queue-å’Œ-Topic-çš„åˆ›å»º" class="headerlink" title="3.2 Queue å’Œ Topic çš„åˆ›å»º"></a>3.2 Queue å’Œ Topic çš„åˆ›å»º</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ç§æ¶ˆæ¯ Queue å’Œ Topicï¼Œè¿™ä¸¤ç§æ¶ˆæ¯çš„åˆ›å»ºï¼Œæˆ‘ä»¬æ”¾åˆ° ActiveMqConfig ä¸­æ¥åˆ›å»ºï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * activemqçš„é…ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActiveMqConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å¸ƒ/è®¢é˜…æ¨¡å¼é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOPIC_NAME = <span class="string">"activemq.topic"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç‚¹å¯¹ç‚¹æ¨¡å¼é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String QUEUE_NAME = <span class="string">"activemq.queue"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Destination <span class="title">topic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ActiveMQTopic(TOPIC_NAME);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Destination <span class="title">queue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ActiveMQQueue(QUEUE_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºåˆ›å»º Queue å’Œ Topic ä¸¤ç§æ¶ˆæ¯ï¼Œåˆ†åˆ«ä½¿ç”¨ <code>new ActiveMQQueue</code> å’Œ <code>new ActiveMQTopic</code> æ¥åˆ›å»ºï¼Œåˆ†åˆ«è·Ÿä¸Šå¯¹åº”æ¶ˆæ¯çš„åç§°å³å¯ã€‚è¿™æ ·åœ¨å…¶ä»–åœ°æ–¹å°±å¯ä»¥ç›´æ¥å°†è¿™ä¸¤ç§æ¶ˆæ¯ä½œä¸ºç»„ä»¶æ³¨å…¥è¿›æ¥äº†ã€‚</p>
<h3 id="3-3-æ¶ˆæ¯çš„å‘é€æ¥å£"><a href="#3-3-æ¶ˆæ¯çš„å‘é€æ¥å£" class="headerlink" title="3.3 æ¶ˆæ¯çš„å‘é€æ¥å£"></a>3.3 æ¶ˆæ¯çš„å‘é€æ¥å£</h3><p>åœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬åªè¦æ³¨å…¥ JmsMessagingTemplate æ¨¡æ¿å³å¯å¿«é€Ÿå‘é€æ¶ˆæ¯ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆæ¯å‘é€è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MsgProducer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> JmsMessagingTemplate jmsMessagingTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(Destination destination, String msg)</span> </span>&#123;</span><br><span class="line">        jmsMessagingTemplate.convertAndSend(destination, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>convertAndSend</code> æ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯å‘é€çš„ç›®çš„åœ°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å…·ä½“çš„æ¶ˆæ¯å†…å®¹ã€‚</p>
<h3 id="3-4-ç‚¹å¯¹ç‚¹æ¶ˆæ¯ç”Ÿäº§ä¸æ¶ˆè´¹"><a href="#3-4-ç‚¹å¯¹ç‚¹æ¶ˆæ¯ç”Ÿäº§ä¸æ¶ˆè´¹" class="headerlink" title="3.4 ç‚¹å¯¹ç‚¹æ¶ˆæ¯ç”Ÿäº§ä¸æ¶ˆè´¹"></a>3.4 ç‚¹å¯¹ç‚¹æ¶ˆæ¯ç”Ÿäº§ä¸æ¶ˆè´¹</h3><h4 id="3-4-1-ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„ç”Ÿäº§"><a href="#3-4-1-ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„ç”Ÿäº§" class="headerlink" title="3.4.1 ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„ç”Ÿäº§"></a>3.4.1 ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„ç”Ÿäº§</h4><p>æ¶ˆæ¯çš„ç”Ÿäº§ï¼Œæˆ‘ä»¬æ”¾åˆ° Controller ä¸­æ¥åšï¼Œç”±äºä¸Šé¢å·²ç»ç”Ÿæˆäº† Queue æ¶ˆæ¯çš„ç»„ä»¶ï¼Œæ‰€ä»¥åœ¨ Controller ä¸­æˆ‘ä»¬ç›´æ¥æ³¨å…¥è¿›æ¥å³å¯ã€‚ç„¶åè°ƒç”¨ä¸Šæ–‡çš„æ¶ˆæ¯å‘é€æ–¹æ³• <code>sendMessage</code> å³å¯æˆåŠŸç”Ÿäº§ä¸€æ¡æ¶ˆæ¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ActiveMQ controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/activemq"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActiveMqController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ActiveMqController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MsgProducer producer;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Destination queue;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/send/queue"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendQueueMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"===å¼€å§‹å‘é€ç‚¹å¯¹ç‚¹æ¶ˆæ¯==="</span>);</span><br><span class="line">        producer.sendMessage(queue, <span class="string">"Queue: hello activemq!"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-2-ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„æ¶ˆè´¹"><a href="#3-4-2-ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„æ¶ˆè´¹" class="headerlink" title="3.4.2 ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„æ¶ˆè´¹"></a>3.4.2 ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„æ¶ˆè´¹</h4><p>ç‚¹å¯¹ç‚¹æ¶ˆæ¯çš„æ¶ˆè´¹å¾ˆç®€å•ï¼Œåªè¦æˆ‘ä»¬æŒ‡å®šç›®çš„åœ°å³å¯ï¼Œjms ç›‘å¬å™¨ä¸€ç›´åœ¨ç›‘å¬æ˜¯å¦æœ‰æ¶ˆæ¯è¿‡æ¥ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æ¶ˆè´¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆæ¯æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueueConsumer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥æ”¶ç‚¹å¯¹ç‚¹æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JmsListener</span>(destination = ActiveMqConfig.QUEUE_NAME)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiveQueueMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š"</span> + msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ <code>@JmsListener</code> æ³¨è§£æ¥æŒ‡å®šè¦ç›‘å¬çš„ç›®çš„åœ°ï¼Œåœ¨æ¶ˆæ¯æ¥æ”¶æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚åšç›¸åº”çš„é€»è¾‘å¤„ç†å³å¯ã€‚</p>
<h4 id="3-4-3-æµ‹è¯•ä¸€ä¸‹"><a href="#3-4-3-æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="3.4.3 æµ‹è¯•ä¸€ä¸‹"></a>3.4.3 æµ‹è¯•ä¸€ä¸‹</h4><p>å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>http://localhost:8081/activemq/send/queue</code>ï¼Œè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºæ—¥å¿—ï¼Œå‡ºç°ä¸‹é¢çš„æ—¥å¿—è¯´æ˜æ¶ˆæ¯å‘é€å’Œæ¶ˆè´¹æˆåŠŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼šQueue: hello activemq!</span><br></pre></td></tr></table></figure>

<h3 id="3-5-å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹"><a href="#3-5-å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹" class="headerlink" title="3.5 å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹"></a>3.5 å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹</h3><h4 id="3-5-1-å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§"><a href="#3-5-1-å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§" class="headerlink" title="3.5.1 å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§"></a>3.5.1 å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„ç”Ÿäº§</h4><p>å’Œç‚¹å¯¹ç‚¹æ¶ˆæ¯ä¸€æ ·ï¼Œæˆ‘ä»¬æ³¨å…¥ topic å¹¶è°ƒç”¨ producer çš„ <code>sendMessage</code> æ–¹æ³•å³å¯å‘é€è®¢é˜…æ¶ˆæ¯ï¼Œå¦‚ä¸‹ï¼Œä¸å†èµ˜è¿°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/activemq"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActiveMqController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ActiveMqController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MsgProducer producer;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Destination topic;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/send/topic"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendTopicMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"===å¼€å§‹å‘é€è®¢é˜…æ¶ˆæ¯==="</span>);</span><br><span class="line">        producer.sendMessage(topic, <span class="string">"Topic: hello activemq!"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-5-2-å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯çš„æ¶ˆè´¹"><a href="#3-5-2-å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯çš„æ¶ˆè´¹" class="headerlink" title="3.5.2 å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„æ¶ˆè´¹"></a>3.5.2 å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„æ¶ˆè´¹</h4><p>å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„æ¶ˆè´¹å’Œç‚¹å¯¹ç‚¹ä¸åŒï¼Œè®¢é˜…æ¶ˆæ¯æ”¯æŒå¤šä¸ªæ¶ˆè´¹è€…ä¸€èµ·æ¶ˆè´¹ã€‚å…¶æ¬¡ï¼ŒSpring Boot ä¸­é»˜è®¤çš„æ—¶ç‚¹å¯¹ç‚¹æ¶ˆæ¯ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ topic æ—¶ï¼Œä¼šä¸èµ·ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é…ç½®æ–‡ä»¶ application.yml ä¸­æ·»åŠ ä¸€ä¸ªé…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">jms:</span></span><br><span class="line">    <span class="attr">pub-sub-domain:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>è¯¥é…ç½®æ˜¯ false çš„è¯ï¼Œåˆ™ä¸ºç‚¹å¯¹ç‚¹æ¶ˆæ¯ï¼Œä¹Ÿæ˜¯ Spring Boot é»˜è®¤çš„ã€‚è¿™æ ·æ˜¯å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè¿™æ ·é…ç½®çš„è¯ï¼Œä¸Šé¢æåˆ°çš„ç‚¹å¯¹ç‚¹æ¶ˆæ¯åˆä¸èƒ½æ­£å¸¸æ¶ˆè´¹äº†ã€‚æ‰€ä»¥äºŒè€…ä¸å¯å…¼å¾—ï¼Œè¿™å¹¶éä¸€ä¸ªå¥½çš„è§£å†³åŠæ³•ã€‚</p>
<p>æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•æ˜¯ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå·¥å‚ï¼Œ<code>@JmsListener</code> æ³¨è§£é»˜è®¤åªæ¥æ”¶ queue æ¶ˆæ¯ï¼Œå¦‚æœè¦æ¥æ”¶ topic æ¶ˆæ¯ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹ containerFactoryã€‚æˆ‘ä»¬è¿˜åœ¨ä¸Šé¢çš„é‚£ä¸ª ActiveMqConfig é…ç½®ç±»ä¸­æ·»åŠ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * activemqçš„é…ç½®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActiveMqConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">// çœç•¥å…¶ä»–å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * JmsListeneræ³¨è§£é»˜è®¤åªæ¥æ”¶queueæ¶ˆæ¯,å¦‚æœè¦æ¥æ”¶topicæ¶ˆæ¯,éœ€è¦è®¾ç½®containerFactory</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JmsListenerContainerFactory <span class="title">topicListenerContainer</span><span class="params">(ConnectionFactory connectionFactory)</span> </span>&#123;</span><br><span class="line">        DefaultJmsListenerContainerFactory factory = <span class="keyword">new</span> DefaultJmsListenerContainerFactory();</span><br><span class="line">        factory.setConnectionFactory(connectionFactory);</span><br><span class="line">        <span class="comment">// ç›¸å½“äºåœ¨application.ymlä¸­é…ç½®ï¼šspring.jms.pub-sub-domain=true</span></span><br><span class="line">        factory.setPubSubDomain(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡è¿™æ ·çš„é…ç½®ä¹‹åï¼Œæˆ‘ä»¬åœ¨æ¶ˆè´¹çš„æ—¶å€™ï¼Œåœ¨ <code>@JmsListener</code> æ³¨è§£ä¸­æŒ‡å®šè¿™ä¸ªå®¹å™¨å·¥å‚å³å¯æ¶ˆè´¹ topic æ¶ˆæ¯ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Topicæ¶ˆæ¯æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TopicConsumer1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥æ”¶è®¢é˜…æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JmsListener</span>(destination = ActiveMqConfig.TOPIC_NAME, containerFactory = <span class="string">"topicListenerContainer"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiveTopicMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š"</span> + msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‡å®š containerFactory å±æ€§ä¸ºä¸Šé¢æˆ‘ä»¬è‡ªå·±é…ç½®çš„ topicListenerContainer å³å¯ã€‚ç”±äº topic æ¶ˆæ¯å¯ä»¥å¤šä¸ªæ¶ˆè´¹ï¼Œæ‰€ä»¥è¯¥æ¶ˆè´¹çš„ç±»å¯ä»¥æ‹·è´å‡ ä¸ªä¸€èµ·æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘å°±ä¸è´´ä»£ç äº†ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„æºç æµ‹è¯•ã€‚</p>
<h4 id="3-5-3-æµ‹è¯•ä¸€ä¸‹"><a href="#3-5-3-æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="3.5.3 æµ‹è¯•ä¸€ä¸‹"></a>3.5.3 æµ‹è¯•ä¸€ä¸‹</h4><p>å¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼š<code>http://localhost:8081/activemq/send/topic</code>ï¼Œè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºæ—¥å¿—ï¼Œå‡ºç°ä¸‹é¢çš„æ—¥å¿—è¯´æ˜æ¶ˆæ¯å‘é€å’Œæ¶ˆè´¹æˆåŠŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼šTopic: hello activemq!</span><br><span class="line">æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼šTopic: hello activemq!</span><br></pre></td></tr></table></figure>

<h2 id="4-æ€»ç»“-7"><a href="#4-æ€»ç»“-7" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><p>æœ¬ç« ä¸»è¦ä»‹ç»äº† jms å’Œ activemq çš„ç›¸å…³æ¦‚å¿µã€activemq çš„å®‰è£…ä¸å¯åŠ¨ã€‚è¯¦ç»†åˆ†æäº† Spring Boot ä¸­ç‚¹å¯¹ç‚¹æ¶ˆæ¯å’Œå‘å¸ƒ/è®¢é˜…æ¶ˆæ¯ä¸¤ç§æ–¹å¼çš„é…ç½®ã€æ¶ˆæ¯ç”Ÿäº§å’Œæ¶ˆè´¹æ–¹å¼ã€‚ActiveMQ æ˜¯èƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ï¼Œåœ¨å¼‚æ­¥æ¶ˆæ¯çš„å¤„ç†ä¸Šå¾ˆæœ‰ç”¨ï¼Œå¸Œæœ›å¤§å®¶å¥½å¥½æ¶ˆåŒ–ä¸€ä¸‹ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬16è¯¾ï¼šSpring-Bootä¸­é›†æˆ-Shiro"><a href="#ç¬¬16è¯¾ï¼šSpring-Bootä¸­é›†æˆ-Shiro" class="headerlink" title="ç¬¬16è¯¾ï¼šSpring Bootä¸­é›†æˆ Shiro"></a>ç¬¬16è¯¾ï¼šSpring Bootä¸­é›†æˆ Shiro</h1><p>Shiro æ˜¯ä¸€ä¸ªå¼ºå¤§ã€ç®€å•æ˜“ç”¨çš„ Java å®‰å…¨æ¡†æ¶ï¼Œä¸»è¦ç”¨æ¥æ›´ä¾¿æ·çš„è®¤è¯ï¼Œæˆæƒï¼ŒåŠ å¯†ï¼Œä¼šè¯ç®¡ç­‰ç­‰ï¼Œå¯ä¸ºä»»ä½•åº”ç”¨æä¾›å®‰å…¨ä¿éšœã€‚æœ¬è¯¾ç¨‹ä¸»è¦æ¥ä»‹ç» Shiro çš„è®¤è¯å’ŒæˆæƒåŠŸèƒ½ã€‚</p>
<h2 id="1-Shiro-ä¸‰å¤§æ ¸å¿ƒç»„ä»¶"><a href="#1-Shiro-ä¸‰å¤§æ ¸å¿ƒç»„ä»¶" class="headerlink" title="1. Shiro ä¸‰å¤§æ ¸å¿ƒç»„ä»¶"></a>1. Shiro ä¸‰å¤§æ ¸å¿ƒç»„ä»¶</h2><p>Shiro æœ‰ä¸‰å¤§æ ¸å¿ƒçš„ç»„ä»¶ï¼š<code>Subject</code>ã€<code>SecurityManager</code> å’Œ <code>Realm</code>ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p><img src="https://images.gitbook.cn/2dd0f5f0-af4a-11e8-a51c-93c39f2785b1" alt="ä¸‰å¤§æ ¸å¿ƒç»„ä»¶çš„å…³ç³»"></p>
<ol>
<li>Subjectï¼šè®¤è¯ä¸»ä½“ã€‚å®ƒåŒ…å«ä¸¤ä¸ªä¿¡æ¯ï¼šPrincipals å’Œ Credentialsã€‚çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªä¿¡æ¯å…·ä½“æ˜¯ä»€ä¹ˆã€‚<blockquote>
<p>Principalsï¼šèº«ä»½ã€‚å¯ä»¥æ˜¯ç”¨æˆ·åï¼Œé‚®ä»¶ï¼Œæ‰‹æœºå·ç ç­‰ç­‰ï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ªç™»å½•ä¸»ä½“èº«ä»½ï¼›<br>Credentialsï¼šå‡­è¯ã€‚å¸¸è§æœ‰å¯†ç ï¼Œæ•°å­—è¯ä¹¦ç­‰ç­‰ã€‚</p>
</blockquote>
</li>
</ol>
<p>è¯´ç™½äº†ï¼Œå°±æ˜¯éœ€è¦è®¤è¯çš„ä¸œè¥¿ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ç”¨æˆ·åå¯†ç äº†ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨ç™»å½•çš„æ—¶å€™ï¼ŒShiro éœ€è¦å»è¿›è¡Œèº«ä»½è®¤è¯ï¼Œå°±éœ€è¦ Subject è®¤è¯ä¸»ä½“ã€‚</p>
<ol start="2">
<li><p>SecurityManagerï¼šå®‰å…¨ç®¡ç†å‘˜ã€‚è¿™æ˜¯ Shiro æ¶æ„çš„æ ¸å¿ƒï¼Œå®ƒå°±åƒ Shiro å†…éƒ¨æ‰€æœ‰åŸä»¶çš„ä¿æŠ¤ä¼ä¸€æ ·ã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½ä¼šé…ç½® SecurityManagerï¼Œå¼€å‘äººå‘˜å¤§éƒ¨åˆ†ç²¾åŠ›ä¸»è¦æ˜¯åœ¨ Subject è®¤è¯ä¸»ä½“ä¸Šé¢ã€‚æˆ‘ä»¬åœ¨ä¸ Subject è¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ SecurityManager åœ¨èƒŒååšä¸€äº›å®‰å…¨æ“ä½œã€‚</p>
</li>
<li><p>Realmsï¼šRealms æ˜¯ä¸€ä¸ªåŸŸï¼Œå®ƒæ˜¯è¿æ¥ Shiro å’Œå…·ä½“åº”ç”¨çš„æ¡¥æ¢ï¼Œå½“éœ€è¦ä¸å®‰å…¨æ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œæ¯”å¦‚ç”¨æˆ·è´¦æˆ·ã€è®¿é—®æ§åˆ¶ç­‰ï¼ŒShiro å°±ä¼šä»ä¸€ä¸ªæˆ–å¤šä¸ª Realms ä¸­å»æŸ¥æ‰¾ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šè‡ªå·±å®šåˆ¶ Realmï¼Œè¿™åœ¨ä¸‹æ–‡ä¼šè¯¦ç»†è¯´æ˜ã€‚</p>
</li>
</ol>
<h2 id="1-Shiro-èº«ä»½å’Œæƒé™è®¤è¯"><a href="#1-Shiro-èº«ä»½å’Œæƒé™è®¤è¯" class="headerlink" title="1. Shiro èº«ä»½å’Œæƒé™è®¤è¯"></a>1. Shiro èº«ä»½å’Œæƒé™è®¤è¯</h2><h3 id="1-2-Shiro-èº«ä»½è®¤è¯"><a href="#1-2-Shiro-èº«ä»½è®¤è¯" class="headerlink" title="1.2 Shiro èº«ä»½è®¤è¯"></a>1.2 Shiro èº«ä»½è®¤è¯</h3><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ Shiro èº«ä»½è®¤è¯çš„è¿‡ç¨‹ï¼Œçœ‹ä¸€ä¸‹å®˜æ–¹çš„ä¸€ä¸ªè®¤è¯å›¾ï¼š</p>
<p><img src="https://images.gitbook.cn/f21c53a0-af4f-11e8-a51c-93c39f2785b1" alt="è®¤è¯è¿‡ç¨‹"></p>
<p>Step1ï¼šåº”ç”¨ç¨‹åºä»£ç åœ¨è°ƒç”¨ <code>Subject.login(token)</code> æ–¹æ³•åï¼Œä¼ å…¥ä»£è¡¨æœ€ç»ˆç”¨æˆ·çš„èº«ä»½å’Œå‡­è¯çš„ AuthenticationToken å®ä¾‹ tokenã€‚ </p>
<p>Step2ï¼šå°† Subject å®ä¾‹å§”æ‰˜ç»™åº”ç”¨ç¨‹åºçš„ SecurityManagerï¼ˆShiroçš„å®‰å…¨ç®¡ç†ï¼‰æ¥å¼€å§‹å®é™…çš„è®¤è¯å·¥ä½œã€‚è¿™é‡Œå¼€å§‹çœŸæ­£çš„è®¤è¯å·¥ä½œäº†ã€‚ </p>
<p>Step3ï¼Œ4ï¼Œ5ï¼šç„¶å SecurityManager å°±ä¼šæ ¹æ®å…·ä½“çš„ realm å»è¿›è¡Œå®‰å…¨è®¤è¯äº†ã€‚ ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œrealm å¯ä»¥è‡ªå®šä¹‰ï¼ˆCustom Realmï¼‰ã€‚</p>
<h3 id="1-3-Shiro-æƒé™è®¤è¯"><a href="#1-3-Shiro-æƒé™è®¤è¯" class="headerlink" title="1.3 Shiro æƒé™è®¤è¯"></a>1.3 Shiro æƒé™è®¤è¯</h3><p>æƒé™è®¤è¯ï¼Œä¹Ÿå°±æ˜¯è®¿é—®æ§åˆ¶ï¼Œå³åœ¨åº”ç”¨ä¸­æ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æºã€‚åœ¨æƒé™è®¤è¯ä¸­ï¼Œæœ€æ ¸å¿ƒçš„ä¸‰ä¸ªè¦ç´ æ˜¯ï¼šæƒé™ï¼Œè§’è‰²å’Œç”¨æˆ·ã€‚</p>
<blockquote>
<p>æƒé™ï¼ˆpermissionï¼‰ï¼šå³æ“ä½œèµ„æºçš„æƒåˆ©ï¼Œæ¯”å¦‚è®¿é—®æŸä¸ªé¡µé¢ï¼Œä»¥åŠå¯¹æŸä¸ªæ¨¡å—çš„æ•°æ®çš„æ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼ŒæŸ¥çœ‹çš„æƒåˆ©ï¼›<br>è§’è‰²ï¼ˆroleï¼‰ï¼šæŒ‡çš„æ˜¯ç”¨æˆ·æ‹…ä»»çš„çš„è§’è‰²ï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥æœ‰å¤šä¸ªæƒé™ï¼›<br>ç”¨æˆ·ï¼ˆuserï¼‰ï¼šåœ¨ Shiro ä¸­ï¼Œä»£è¡¨è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå³ä¸Šé¢æåˆ°çš„ Subject è®¤è¯ä¸»ä½“ã€‚</p>
</blockquote>
<p>å®ƒä»¬ä¹‹é—´çš„çš„å…³ç³»å¯ä»¥ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š </p>
<p><img src="https://images.gitbook.cn/44a68bc0-af75-11e8-85ef-dd986da3511e" alt="ç”¨æˆ·ã€è§’è‰²å’Œæƒé™çš„å…³ç³»"></p>
<p>ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè§’è‰²ï¼Œè€Œä¸åŒçš„è§’è‰²å¯ä»¥æœ‰ä¸åŒçš„æƒé™ï¼Œä¹Ÿå¯ç”±æœ‰ç›¸åŒçš„æƒé™ã€‚æ¯”å¦‚è¯´ç°åœ¨æœ‰ä¸‰ä¸ªè§’è‰²ï¼Œ1æ˜¯æ™®é€šè§’è‰²ï¼Œ2ä¹Ÿæ˜¯æ™®é€šè§’è‰²ï¼Œ3æ˜¯ç®¡ç†å‘˜ï¼Œè§’è‰²1åªèƒ½æŸ¥çœ‹ä¿¡æ¯ï¼Œè§’è‰²2åªèƒ½æ·»åŠ ä¿¡æ¯ï¼Œç®¡ç†å‘˜éƒ½å¯ä»¥ï¼Œè€Œä¸”è¿˜å¯ä»¥åˆ é™¤ä¿¡æ¯ï¼Œç±»ä¼¼äºè¿™æ ·ã€‚</p>
<h2 id="2-Spring-Boot-é›†æˆ-Shiro-è¿‡ç¨‹"><a href="#2-Spring-Boot-é›†æˆ-Shiro-è¿‡ç¨‹" class="headerlink" title="2. Spring Boot é›†æˆ Shiro è¿‡ç¨‹"></a>2. Spring Boot é›†æˆ Shiro è¿‡ç¨‹</h2><h3 id="2-1-ä¾èµ–å¯¼å…¥-2"><a href="#2-1-ä¾èµ–å¯¼å…¥-2" class="headerlink" title="2.1 ä¾èµ–å¯¼å…¥"></a>2.1 ä¾èµ–å¯¼å…¥</h3><p>Spring Boot 2.0.3 é›†æˆ Shiro éœ€è¦å¯¼å…¥å¦‚ä¸‹ starter ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-æ•°æ®åº“è¡¨æ•°æ®åˆå§‹åŒ–"><a href="#2-2-æ•°æ®åº“è¡¨æ•°æ®åˆå§‹åŒ–" class="headerlink" title="2.2 æ•°æ®åº“è¡¨æ•°æ®åˆå§‹åŒ–"></a>2.2 æ•°æ®åº“è¡¨æ•°æ®åˆå§‹åŒ–</h3><p>è¿™é‡Œä¸»è¦æ¶‰åŠåˆ°ä¸‰å¼ è¡¨ï¼šç”¨æˆ·è¡¨ã€è§’è‰²è¡¨å’Œæƒé™è¡¨ï¼Œå…¶å®åœ¨ demo ä¸­ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œä¸ç”¨å»ºè¡¨ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ æ¥è¿‘å®é™…æƒ…å†µï¼Œæˆ‘ä»¬è¿˜æ˜¯åŠ å…¥ mybatisï¼Œæ¥æ“ä½œæ•°æ®åº“ã€‚ä¸‹é¢æ˜¯æ•°æ®åº“è¡¨çš„è„šæœ¬ã€‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_role`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'ä¸»é”®'</span>,</span><br><span class="line">  <span class="string">`rolename`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'è§’è‰²åç§°'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">4</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'ç”¨æˆ·ä¸»é”®'</span>,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'ç”¨æˆ·å'</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'å¯†ç '</span>,</span><br><span class="line">  <span class="string">`role_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'å¤–é”®å…³è”roleè¡¨'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`role_id`</span> (<span class="string">`role_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`t_user_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`role_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`t_role`</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">4</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_permission`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'ä¸»é”®'</span>,</span><br><span class="line">  <span class="string">`permissionname`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æƒé™å'</span>,</span><br><span class="line">  <span class="string">`role_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'å¤–é”®å…³è”role'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`role_id`</span> (<span class="string">`role_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`t_permission_ibfk_1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`role_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`t_role`</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">3</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œt_userï¼Œt_role å’Œ t_permissionï¼Œåˆ†åˆ«å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œè§’è‰²ä¿¡æ¯å’Œæƒé™ä¿¡æ¯ï¼Œè¡¨å»ºç«‹å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬å¾€è¡¨é‡Œæ’å…¥ä¸€äº›æµ‹è¯•æ•°æ®ã€‚<br>t_user è¡¨ï¼š<br>|id|username|password|role_id|<br>|:â€“:|:â€“:|:â€“:|:â€“:|<br>|1|csdn1|123456|1|<br>|2|csdn2|123456|2|<br>|3|csdn3|123456|3|</p>
<p>t_role è¡¨ï¼š<br>|id|rolename|<br>|:â€“:|:â€“:|<br>|1|admin|<br>|2|teacher|<br>|3|student|</p>
<p>t_permission è¡¨ï¼š<br>|id|permissionname|role_id|<br>|:â€“:|:â€“:|:â€“:|<br>|1|<code>user:*</code>|1|<br>|2|<code>student:*</code>|2|</p>
<p>è§£é‡Šä¸€ä¸‹è¿™é‡Œçš„æƒé™ï¼š<code>user:*</code>è¡¨ç¤ºæƒé™å¯ä»¥æ˜¯ <code>user:create</code> æˆ–è€…å…¶ä»–ï¼Œ<code>*</code> å¤„è¡¨ç¤ºä¸€ä¸ªå ä½ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ï¼Œå…·ä½“çš„ä¼šåœ¨ä¸‹æ–‡ Shiro é…ç½®é‚£é‡Œè¯´æ˜ã€‚</p>
<h3 id="2-2-è‡ªå®šä¹‰-Realm"><a href="#2-2-è‡ªå®šä¹‰-Realm" class="headerlink" title="2.2 è‡ªå®šä¹‰ Realm"></a>2.2 è‡ªå®šä¹‰ Realm</h3><p>æœ‰äº†æ•°æ®åº“è¡¨å’Œæ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹è‡ªå®šä¹‰ realmï¼Œè‡ªå®šä¹‰ realm éœ€è¦ç»§æ‰¿ AuthorizingRealm ç±»ï¼Œå› ä¸ºè¯¥ç±»å°è£…äº†å¾ˆå¤šæ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯ä¸€æ­¥æ­¥ç»§æ‰¿è‡ª Realm ç±»çš„ï¼Œç»§æ‰¿äº† AuthorizingRealm ç±»åï¼Œéœ€è¦é‡å†™ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<blockquote>
<p><code>doGetAuthenticationInfo()</code> æ–¹æ³•ï¼šç”¨æ¥éªŒè¯å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼Œè·å–è®¤è¯ä¿¡æ¯<br><code>doGetAuthorizationInfo()</code> æ–¹æ³•ï¼šç”¨æ¥ä¸ºå½“å‰ç™»é™†æˆåŠŸçš„ç”¨æˆ·æˆäºˆæƒé™å’Œè§’è‰²</p>
</blockquote>
<p>å…·ä½“å®ç°å¦‚ä¸‹ï¼Œç›¸å…³çš„è§£é‡Šæˆ‘æ”¾åœ¨ä»£ç çš„æ³¨é‡Šä¸­ï¼Œè¿™æ ·æ›´åŠ æ–¹ä¾¿ç›´è§‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–ç”¨æˆ·å</span></span><br><span class="line">        String username = (String) principalCollection.getPrimaryPrincipal();</span><br><span class="line">        SimpleAuthorizationInfo authorizationInfo = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">        <span class="comment">// ç»™è¯¥ç”¨æˆ·è®¾ç½®è§’è‰²ï¼Œè§’è‰²ä¿¡æ¯å­˜åœ¨t_roleè¡¨ä¸­å–</span></span><br><span class="line">        authorizationInfo.setRoles(userService.getRoles(username));</span><br><span class="line">        <span class="comment">// ç»™è¯¥ç”¨æˆ·è®¾ç½®æƒé™ï¼Œæƒé™ä¿¡æ¯å­˜åœ¨t_permissionè¡¨ä¸­å–</span></span><br><span class="line">        authorizationInfo.setStringPermissions(userService.getPermissions(username));</span><br><span class="line">        <span class="keyword">return</span> authorizationInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®tokenè·å–ç”¨æˆ·åï¼Œå¦‚æœæ‚¨ä¸çŸ¥é“è¯¥è¯¥tokenæ€ä¹ˆæ¥çš„ï¼Œå…ˆå¯ä»¥ä¸ç®¡ï¼Œä¸‹æ–‡ä¼šè§£é‡Š</span></span><br><span class="line">        String username = (String) authenticationToken.getPrincipal();</span><br><span class="line">        <span class="comment">// æ ¹æ®ç”¨æˆ·åä»æ•°æ®åº“ä¸­æŸ¥è¯¢è¯¥ç”¨æˆ·</span></span><br><span class="line">        User user = userService.getByUsername(username);</span><br><span class="line">        <span class="keyword">if</span>(user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// æŠŠå½“å‰ç”¨æˆ·å­˜åˆ°sessionä¸­</span></span><br><span class="line">            SecurityUtils.getSubject().getSession().setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">            <span class="comment">// ä¼ å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œèº«ä»½è®¤è¯ï¼Œå¹¶è¿”å›è®¤è¯ä¿¡æ¯</span></span><br><span class="line">            AuthenticationInfo authcInfo = <span class="keyword">new</span> SimpleAuthenticationInfo(user.getUsername(), user.getPassword(), <span class="string">"myRealm"</span>);</span><br><span class="line">            <span class="keyword">return</span> authcInfo;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ä¸­å¯ä»¥çœ‹å‡ºï¼šéªŒè¯èº«ä»½çš„æ—¶å€™æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå…ˆä»æ•°æ®åº“ä¸­æŸ¥å‡ºè¯¥ç”¨æˆ·åå¯¹åº”çš„ç”¨æˆ·ï¼Œè¿™æ—¶å€™å¹¶æ²¡æœ‰æ¶‰åŠåˆ°å¯†ç ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ°è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œå³ä½¿ç”¨æˆ·è¾“å…¥çš„å¯†ç ä¸å¯¹ï¼Œä¹Ÿæ˜¯å¯ä»¥æŸ¥å‡ºæ¥è¯¥ç”¨æˆ·çš„ï¼Œç„¶åå°†è¯¥ç”¨æˆ·çš„æ­£ç¡®ä¿¡æ¯å°è£…åˆ° authcInfo ä¸­è¿”å›ç»™ Shiroï¼Œæ¥ä¸‹æ¥å°±æ˜¯Shiroçš„äº‹äº†ï¼Œå®ƒä¼šæ ¹æ®è¿™é‡Œé¢çš„çœŸå®ä¿¡æ¯ä¸ç”¨æˆ·å‰å°è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œæ ¡éªŒï¼Œ è¿™ä¸ªæ—¶å€™ä¹Ÿè¦æ ¡éªŒå¯†ç äº†ï¼Œå¦‚æœæ ¡éªŒé€šè¿‡å°±è®©ç”¨æˆ·ç™»å½•ï¼Œå¦åˆ™è·³è½¬åˆ°æŒ‡å®šé¡µé¢ã€‚åŒç†ï¼Œæƒé™éªŒè¯çš„æ—¶å€™ä¹Ÿæ˜¯å…ˆæ ¹æ®ç”¨æˆ·åä»æ•°æ®åº“ä¸­è·å–ä¸è¯¥ç”¨æˆ·åæœ‰å…³çš„è§’è‰²å’Œæƒé™ï¼Œç„¶åå°è£…åˆ° authorizationInfo ä¸­è¿”å›ç»™ Shiroã€‚</p>
<h3 id="2-3-Shiro-é…ç½®"><a href="#2-3-Shiro-é…ç½®" class="headerlink" title="2.3 Shiro é…ç½®"></a>2.3 Shiro é…ç½®</h3><p>è‡ªå®šä¹‰çš„ realm å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥éœ€è¦å¯¹ Shiro è¿›è¡Œé…ç½®äº†ã€‚æˆ‘ä»¬ä¸»è¦é…ç½®ä¸‰ä¸ªä¸œè¥¿ï¼šè‡ªå®šä¹‰ realmã€å®‰å…¨ç®¡ç†å™¨ SecurityManager å’Œ Shiro è¿‡æ»¤å™¨ã€‚å¦‚ä¸‹ï¼š</p>
<p>é…ç½®è‡ªå®šä¹‰ realmï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ShiroConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å…¥è‡ªå®šä¹‰çš„realm</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> MyRealm</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyRealm <span class="title">myAuthRealm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MyRealm myRealm = <span class="keyword">new</span> MyRealm();</span><br><span class="line">        logger.info(<span class="string">"====myRealmæ³¨å†Œå®Œæˆ====="</span>);</span><br><span class="line">        <span class="keyword">return</span> myRealm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®å®‰å…¨ç®¡ç†å™¨ SecurityManagerï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ShiroConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å…¥å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> SecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å°†è‡ªå®šä¹‰realmåŠ è¿›æ¥</span></span><br><span class="line">        DefaultWebSecurityManager securityManager = <span class="keyword">new</span> DefaultWebSecurityManager(myAuthRealm());</span><br><span class="line">        logger.info(<span class="string">"====securityManageræ³¨å†Œå®Œæˆ===="</span>);</span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½® SecurityManager æ—¶ï¼Œéœ€è¦å°†ä¸Šé¢çš„è‡ªå®šä¹‰ realm æ·»åŠ è¿›æ¥ï¼Œè¿™æ ·çš„è¯ Shiro æ‰ä¼šèµ°åˆ°è‡ªå®šä¹‰çš„ realm ä¸­ã€‚</p>
<p>é…ç½® Shiro è¿‡æ»¤å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ShiroConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å…¥Shiroè¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> securityManager å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ShiroFilterFactoryBean</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilter</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰shiroFactoryBean</span></span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean=<span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®è‡ªå®šä¹‰çš„securityManager</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®é»˜è®¤ç™»å½•çš„urlï¼Œèº«ä»½è®¤è¯å¤±è´¥ä¼šè®¿é—®è¯¥url</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/login"</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®æˆåŠŸä¹‹åè¦è·³è½¬çš„é“¾æ¥</span></span><br><span class="line">        shiroFilterFactoryBean.setSuccessUrl(<span class="string">"/success"</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®æœªæˆæƒç•Œé¢ï¼Œæƒé™è®¤è¯å¤±è´¥ä¼šè®¿é—®è¯¥url</span></span><br><span class="line">        shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">"/unauthorized"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// LinkedHashMapæ˜¯æœ‰åºçš„ï¼Œè¿›è¡Œé¡ºåºæ‹¦æˆªå™¨é…ç½®</span></span><br><span class="line">        Map&lt;String,String&gt; filterChainMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é…ç½®å¯ä»¥åŒ¿åè®¿é—®çš„åœ°å€ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªå·±æ·»åŠ ï¼Œæ”¾è¡Œä¸€äº›é™æ€èµ„æºç­‰ï¼Œanonè¡¨ç¤ºæ”¾è¡Œ</span></span><br><span class="line">        filterChainMap.put(<span class="string">"/css/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainMap.put(<span class="string">"/imgs/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainMap.put(<span class="string">"/js/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainMap.put(<span class="string">"/swagger-*/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainMap.put(<span class="string">"/swagger-ui.html/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        <span class="comment">// ç™»å½•url æ”¾è¡Œ</span></span><br><span class="line">        filterChainMap.put(<span class="string">"/login"</span>, <span class="string">"anon"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// â€œ/user/adminâ€ å¼€å¤´çš„éœ€è¦èº«ä»½è®¤è¯ï¼Œauthcè¡¨ç¤ºè¦èº«ä»½è®¤è¯</span></span><br><span class="line">        filterChainMap.put(<span class="string">"/user/admin*"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        <span class="comment">// â€œ/user/studentâ€ å¼€å¤´çš„éœ€è¦è§’è‰²è®¤è¯ï¼Œæ˜¯â€œadminâ€æ‰å…è®¸</span></span><br><span class="line">        filterChainMap.put(<span class="string">"/user/student*/**"</span>, <span class="string">"roles[admin]"</span>);</span><br><span class="line">        <span class="comment">// â€œ/user/teacherâ€ å¼€å¤´çš„éœ€è¦æƒé™è®¤è¯ï¼Œæ˜¯â€œuser:createâ€æ‰å…è®¸</span></span><br><span class="line">        filterChainMap.put(<span class="string">"/user/teacher*/**"</span>, <span class="string">"perms[\"user:create\"]"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é…ç½®logoutè¿‡æ»¤å™¨</span></span><br><span class="line">        filterChainMap.put(<span class="string">"/logout"</span>, <span class="string">"logout"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®shiroFilterFactoryBeançš„FilterChainDefinitionMap</span></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainMap);</span><br><span class="line">        logger.info(<span class="string">"====shiroFilterFactoryBeanæ³¨å†Œå®Œæˆ===="</span>);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½® Shiro è¿‡æ»¤å™¨æ—¶ä¼šä¼ å…¥ä¸€ä¸ªå®‰å…¨ç®¡ç†å™¨ï¼Œå¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸€ç¯å¥—ä¸€ç¯ï¼Œreaml -&gt; SecurityManager -&gt; filterã€‚åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª shiroFactoryBeanï¼Œç„¶åå°† SecurityManager æ·»åŠ è¿›æ¥ï¼Œç»“åˆä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œè¦é…ç½®çš„ä¸œè¥¿ä¸»è¦æœ‰ï¼š</p>
<blockquote>
<p>é»˜è®¤ç™»å½•çš„ urlï¼šèº«ä»½è®¤è¯å¤±è´¥ä¼šè®¿é—®è¯¥ url<br>è®¤è¯æˆåŠŸä¹‹åè¦è·³è½¬çš„ url<br>æƒé™è®¤è¯å¤±è´¥ä¼šè®¿é—®è¯¥ url<br>éœ€è¦æ‹¦æˆªæˆ–è€…æ”¾è¡Œçš„ urlï¼šè¿™äº›éƒ½æ”¾åœ¨ä¸€ä¸ª map ä¸­</p>
</blockquote>
<p>ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨ map ä¸­ï¼Œé’ˆå¯¹ä¸åŒçš„ urlï¼Œæœ‰ä¸åŒçš„æƒé™è¦æ±‚ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹å¸¸ç”¨çš„å‡ ä¸ªæƒé™ã€‚<br>|Filter|è¯´æ˜|<br>|:â€“:|:â€“:|<br>|anon|å¼€æ”¾æƒé™ï¼Œå¯ä»¥ç†è§£ä¸ºåŒ¿åç”¨æˆ·æˆ–æ¸¸å®¢ï¼Œå¯ä»¥ç›´æ¥è®¿é—®çš„|<br>|authc|éœ€è¦èº«ä»½è®¤è¯çš„|<br>|logout|æ³¨é”€ï¼Œæ‰§è¡Œåä¼šç›´æ¥è·³è½¬åˆ° <code>shiroFilterFactoryBean.setLoginUrl();</code> è®¾ç½®çš„ urlï¼Œå³ç™»å½•é¡µé¢|<br>|roles[admin]|å‚æ•°å¯å†™å¤šä¸ªï¼Œè¡¨ç¤ºæ˜¯æŸä¸ªæˆ–æŸäº›è§’è‰²æ‰èƒ½é€šè¿‡ï¼Œå¤šä¸ªå‚æ•°æ—¶å†™ roles[â€œadminï¼Œuserâ€]ï¼Œå½“æœ‰å¤šä¸ªå‚æ•°æ—¶å¿…é¡»æ¯ä¸ªå‚æ•°éƒ½é€šè¿‡æ‰ç®—é€šè¿‡|<br>|perms[user]|å‚æ•°å¯å†™å¤šä¸ªï¼Œè¡¨ç¤ºéœ€è¦æŸä¸ªæˆ–æŸäº›æƒé™æ‰èƒ½é€šè¿‡ï¼Œå¤šä¸ªå‚æ•°æ—¶å†™ perms[â€œuser, adminâ€]ï¼Œå½“æœ‰å¤šä¸ªå‚æ•°æ—¶å¿…é¡»æ¯ä¸ªå‚æ•°éƒ½é€šè¿‡æ‰ç®—é€šè¿‡|</p>
<h3 id="2-4-ä½¿ç”¨-Shiro-è¿›è¡Œè®¤è¯"><a href="#2-4-ä½¿ç”¨-Shiro-è¿›è¡Œè®¤è¯" class="headerlink" title="2.4 ä½¿ç”¨ Shiro è¿›è¡Œè®¤è¯"></a>2.4 ä½¿ç”¨ Shiro è¿›è¡Œè®¤è¯</h3><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ Shiro çš„å‡†å¤‡å·¥ä½œéƒ½åšå®Œäº†ï¼Œæ¥ä¸‹æ¥å¼€å§‹ä½¿ç”¨ Shiro è¿›è¡Œè®¤è¯å·¥ä½œã€‚æˆ‘ä»¬é¦–å…ˆæ¥è®¾è®¡å‡ ä¸ªæ¥å£ï¼š</p>
<blockquote>
<p>æ¥å£ä¸€ï¼š ä½¿ç”¨ <code>http://localhost:8080/user/admin</code> æ¥éªŒè¯èº«ä»½è®¤è¯<br>æ¥å£äºŒï¼š ä½¿ç”¨ <code>http://localhost:8080/user/student</code> æ¥éªŒè¯è§’è‰²è®¤è¯<br>æ¥å£ä¸‰ï¼š ä½¿ç”¨ <code>http://localhost:8080/user/teacher</code> æ¥éªŒè¯æƒé™è®¤è¯<br>æ¥å£å››ï¼š ä½¿ç”¨ <code>http://localhost:8080/user/login</code> æ¥å®ç°ç”¨æˆ·ç™»å½•</p>
</blockquote>
<p>ç„¶åæ¥ä¸€ä¸‹è®¤è¯çš„æµç¨‹ï¼š</p>
<blockquote>
<p>æµç¨‹ä¸€ï¼š ç›´æ¥è®¿é—®æ¥å£ä¸€ï¼ˆæ­¤æ—¶è¿˜æœªç™»å½•ï¼‰ï¼Œè®¤è¯å¤±è´¥ï¼Œè·³è½¬åˆ° login.html é¡µé¢è®©ç”¨æˆ·ç™»å½•ï¼Œç™»å½•ä¼šè¯·æ±‚æ¥å£å››ï¼Œå®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼Œæ­¤æ—¶ Shiro å·²ç»ä¿å­˜äº†ç”¨æˆ·ä¿¡æ¯äº†ã€‚<br>æµç¨‹äºŒï¼š å†æ¬¡è®¿é—®æ¥å£ä¸€ï¼ˆæ­¤æ—¶ç”¨æˆ·å·²ç»ç™»å½•ï¼‰ï¼Œè®¤è¯æˆåŠŸï¼Œè·³è½¬åˆ° success.html é¡µé¢ï¼Œå±•ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚<br>æµç¨‹ä¸‰ï¼š è®¿é—®æ¥å£äºŒï¼Œæµ‹è¯•è§’è‰²è®¤è¯æ˜¯å¦æˆåŠŸã€‚<br>æµç¨‹å››ï¼š è®¿é—®æ¥å£ä¸‰ï¼Œæµ‹è¯•æƒé™è®¤è¯æ˜¯å¦æˆåŠŸã€‚</p>
</blockquote>
<h4 id="2-4-1-èº«ä»½ã€è§’è‰²ã€æƒé™è®¤è¯æ¥å£"><a href="#2-4-1-èº«ä»½ã€è§’è‰²ã€æƒé™è®¤è¯æ¥å£" class="headerlink" title="2.4.1 èº«ä»½ã€è§’è‰²ã€æƒé™è®¤è¯æ¥å£"></a>2.4.1 èº«ä»½ã€è§’è‰²ã€æƒé™è®¤è¯æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èº«ä»½è®¤è¯æµ‹è¯•æ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/admin"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">admin</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        Object user = request.getSession().getAttribute(<span class="string">"user"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§’è‰²è®¤è¯æµ‹è¯•æ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/student"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">student</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æƒé™è®¤è¯æµ‹è¯•æ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/teacher"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">teacher</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸‰ä¸ªæ¥å£å¾ˆç®€å•ï¼Œç›´æ¥è¿”å›åˆ°æŒ‡å®šé¡µé¢å±•ç¤ºå³å¯ï¼Œåªè¦è®¤è¯æˆåŠŸå°±ä¼šæ­£å¸¸è·³è½¬ï¼Œå¦‚æœè®¤è¯å¤±è´¥ï¼Œå°±ä¼šè·³è½¬åˆ°ä¸Šæ–‡ ShrioConfig ä¸­é…ç½®çš„é¡µé¢è¿›è¡Œå±•ç¤ºã€‚</p>
<h4 id="2-4-2-ç”¨æˆ·ç™»å½•æ¥å£"><a href="#2-4-2-ç”¨æˆ·ç™»å½•æ¥å£" class="headerlink" title="2.4.2 ç”¨æˆ·ç™»å½•æ¥å£"></a>2.4.2 ç”¨æˆ·ç™»å½•æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ç™»å½•æ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(User user, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®ç”¨æˆ·åå’Œå¯†ç åˆ›å»ºtoken</span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(user.getUsername(), user.getPassword());</span><br><span class="line">        <span class="comment">// è·å–subjectè®¤è¯ä¸»ä½“</span></span><br><span class="line">        Subject subject = SecurityUtils.getSubject();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å¼€å§‹è®¤è¯ï¼Œè¿™ä¸€æ­¥ä¼šè·³åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„realmä¸­</span></span><br><span class="line">            subject.login(token);</span><br><span class="line">            request.getSession().setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            request.getSession().setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">            request.setAttribute(<span class="string">"error"</span>, <span class="string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é‡ç‚¹åˆ†æä¸€ä¸‹è¿™ä¸ªç™»å½•æ¥å£ï¼Œé¦–å…ˆä¼šæ ¹æ®å‰ç«¯ä¼ è¿‡æ¥çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œåˆ›å»ºä¸€ä¸ª tokenï¼Œç„¶åä½¿ç”¨ SecurityUtils æ¥åˆ›å»ºä¸€ä¸ªè®¤è¯ä¸»ä½“ï¼Œæ¥ä¸‹æ¥å¼€å§‹è°ƒç”¨ <code>subject.login(token)</code> å¼€å§‹è¿›è¡Œèº«ä»½è®¤è¯äº†ï¼Œæ³¨æ„è¿™é‡Œä¼ äº†åˆšåˆšåˆ›å»ºçš„ tokenï¼Œå°±å¦‚æ³¨é‡Šä¸­æ‰€è¿°ï¼Œè¿™ä¸€æ­¥ä¼šè·³è½¬åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ realm ä¸­ï¼Œè¿›å…¥ <code>doGetAuthenticationInfo</code> æ–¹æ³•ï¼Œæ‰€ä»¥åˆ°è¿™é‡Œï¼Œæ‚¨å°±ä¼šæ˜ç™½è¯¥æ–¹æ³•ä¸­é‚£ä¸ªå‚æ•° token äº†ã€‚ç„¶åå°±æ˜¯ä¸Šæ–‡åˆ†æçš„é‚£æ ·ï¼Œå¼€å§‹è¿›è¡Œèº«ä»½è®¤è¯ã€‚</p>
<h4 id="2-4-3-æµ‹è¯•ä¸€ä¸‹"><a href="#2-4-3-æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="2.4.3 æµ‹è¯•ä¸€ä¸‹"></a>2.4.3 æµ‹è¯•ä¸€ä¸‹</h4><p>æœ€åï¼Œå¯åŠ¨é¡¹ç›®ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š<br>æµè§ˆå™¨è¯·æ±‚ <code>http://localhost:8080/user/admin</code> ä¼šè¿›è¡Œèº«ä»½è®¤è¯ï¼Œå› ä¸ºæ­¤æ—¶æœªç™»å½•ï¼Œæ‰€ä»¥ä¼šè·³è½¬åˆ° IndexController ä¸­çš„ <code>/login</code> æ¥å£ï¼Œç„¶åè·³è½¬åˆ° <code>login.html</code> é¡µé¢è®©æˆ‘ä»¬ç™»å½•ï¼Œä½¿ç”¨ç”¨æˆ·åå¯†ç ä¸º csdn/123456 ç™»å½•ä¹‹åï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ <code>http://localhost:8080/user/student</code> æ¥å£ï¼Œä¼šè¿›è¡Œè§’è‰²è®¤è¯ï¼Œå› ä¸ºæ•°æ®åº“ä¸­ csdn1 çš„ç”¨æˆ·è§’è‰²æ˜¯ adminï¼Œæ‰€ä»¥å’Œé…ç½®ä¸­çš„å»åˆï¼Œè®¤è¯é€šè¿‡ï¼›æˆ‘ä»¬å†è¯·æ±‚ <code>http://localhost:8080/user/teacher</code> æ¥å£ï¼Œä¼šè¿›è¡Œæƒé™è®¤è¯ï¼Œå› ä¸ºæ•°æ®åº“ä¸­ csdn1 çš„ç”¨æˆ·æƒé™ä¸º <code>user:*</code>ï¼Œæ»¡è¶³é…ç½®ä¸­çš„ <code>user:create</code>ï¼Œæ‰€ä»¥è®¤è¯é€šè¿‡ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç‚¹é€€å‡ºï¼Œç³»ç»Ÿä¼šæ³¨é”€é‡æ–°è®©æˆ‘ä»¬ç™»å½•ï¼Œæˆ‘ä»¬ä½¿ç”¨ csdn2 è¿™ä¸ªç”¨æˆ·æ¥ç™»å½•ï¼Œé‡å¤ä¸Šè¿°æ“ä½œï¼Œå½“åœ¨è¿›è¡Œè§’è‰²è®¤è¯å’Œæƒé™è®¤è¯è¿™ä¸¤æ­¥æ—¶ï¼Œå°±è®¤è¯ä¸é€šè¿‡äº†ï¼Œå› ä¸ºæ•°æ®åº“ä¸­ csdn2 è¿™ä¸ªç”¨æˆ·å­˜çš„è§’è‰²å’Œæƒé™ä¸é…ç½®ä¸­çš„ä¸åŒï¼Œæ‰€ä»¥è®¤è¯ä¸é€šè¿‡ã€‚</p>
<h2 id="3-æ€»ç»“-2"><a href="#3-æ€»ç»“-2" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>æœ¬èŠ‚ä¸»è¦ä»‹ç»äº† Shiro å®‰å…¨æ¡†æ¶ä¸ Spring Boot çš„æ•´åˆã€‚å…ˆä»‹ç»äº† Shiro çš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶å·²ç»å®ƒä»¬çš„ä½œç”¨ï¼›ç„¶åä»‹ç»äº† Shiro çš„èº«ä»½è®¤è¯ã€è§’è‰²è®¤è¯å’Œæƒé™è®¤è¯ï¼›æœ€åç»“åˆä»£ç ï¼Œè¯¦ç»†ä»‹ç»äº† Spring Boot ä¸­æ˜¯å¦‚ä½•æ•´åˆ Shiro çš„ï¼Œå¹¶è®¾è®¡äº†ä¸€å¥—æµ‹è¯•æµç¨‹ï¼Œé€æ­¥åˆ†æ Shiro çš„å·¥ä½œæµç¨‹å’ŒåŸç†ï¼Œè®©è¯»è€…æ›´ç›´è§‚åœ°ä½“ä¼šå‡º Shiro çš„æ•´å¥—å·¥ä½œæµç¨‹ã€‚Shiro ä½¿ç”¨çš„å¾ˆå¹¿æ³›ï¼Œå¸Œæœ›è¯»è€…å°†å…¶æŒæ¡ï¼Œå¹¶èƒ½è¿ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬17è¯¾ï¼šSpring-Bootä¸­é›†æˆLucence"><a href="#ç¬¬17è¯¾ï¼šSpring-Bootä¸­é›†æˆLucence" class="headerlink" title="ç¬¬17è¯¾ï¼šSpring Bootä¸­é›†æˆLucence"></a>ç¬¬17è¯¾ï¼šSpring Bootä¸­é›†æˆLucence</h1><h2 id="1-Lucence-å’Œå…¨æ–‡æ£€ç´¢"><a href="#1-Lucence-å’Œå…¨æ–‡æ£€ç´¢" class="headerlink" title="1. Lucence å’Œå…¨æ–‡æ£€ç´¢"></a>1. Lucence å’Œå…¨æ–‡æ£€ç´¢</h2><p>Lucene æ˜¯ä»€ä¹ˆï¼Ÿçœ‹ä¸€ä¸‹ç™¾åº¦ç™¾ç§‘ï¼š</p>
<blockquote>
<p>Luceneæ˜¯ä¸€å¥—ç”¨äºå…¨æ–‡æ£€ç´¢å’Œæœå¯»çš„å¼€æºç¨‹å¼åº“ï¼Œç”± Apache è½¯ä»¶åŸºé‡‘ä¼šæ”¯æŒå’Œæä¾›ã€‚Lucene æä¾›äº†ä¸€ä¸ªç®€å•å´å¼ºå¤§çš„åº”ç”¨ç¨‹å¼æ¥å£ï¼Œèƒ½å¤Ÿåšå…¨æ–‡ç´¢å¼•å’Œæœå¯»ã€‚åœ¨ Java å¼€å‘ç¯å¢ƒé‡Œ Lucene æ˜¯ä¸€ä¸ªæˆç†Ÿçš„å…è´¹å¼€æºå·¥å…·ã€‚å°±å…¶æœ¬èº«è€Œè¨€ï¼ŒLucene æ˜¯å½“å‰ä»¥åŠæœ€è¿‘å‡ å¹´æœ€å—æ¬¢è¿çš„å…è´¹ Java ä¿¡æ¯æ£€ç´¢ç¨‹åºåº“ã€‚â€”â€”ã€Šç™¾åº¦ç™¾ç§‘ã€‹</p>
</blockquote>
<h3 id="1-1-å…¨æ–‡æ£€ç´¢"><a href="#1-1-å…¨æ–‡æ£€ç´¢" class="headerlink" title="1.1 å…¨æ–‡æ£€ç´¢"></a>1.1 å…¨æ–‡æ£€ç´¢</h3><p>è¿™é‡Œæåˆ°äº†å…¨æ–‡æ£€ç´¢çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹ä»€ä¹ˆæ˜¯å…¨æ–‡æ£€ç´¢ï¼Œç†è§£äº†å…¨æ–‡æ£€ç´¢ä¹‹åï¼Œå†ç†è§£ Lucene çš„åŸç†å°±éå¸¸ç®€å•äº†ã€‚  </p>
<p>ä½•ä¸ºå…¨æ–‡æ£€ç´¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç°åœ¨è¦åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾æŸä¸ªå­—ç¬¦ä¸²ï¼Œæœ€ç›´æ¥çš„æƒ³æ³•å°±æ˜¯ä»å¤´å¼€å§‹æ£€ç´¢ï¼ŒæŸ¥åˆ°äº†å°±OKï¼Œè¿™ç§å¯¹äºå°æ•°æ®é‡çš„æ–‡ä»¶æ¥è¯´ï¼Œå¾ˆå®ç”¨ï¼Œä½†æ˜¯å¯¹äºå¤§æ•°æ®é‡çš„æ–‡ä»¶æ¥è¯´ï¼Œå°±æœ‰ç‚¹åƒåŠ›äº†ã€‚æˆ–è€…è¯´æ‰¾åŒ…å«æŸä¸ªå­—ç¬¦ä¸²çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯è¿™æ ·ï¼Œå¦‚æœåœ¨ä¸€ä¸ªæ‹¥æœ‰å‡ åä¸ª G çš„ç¡¬ç›˜ä¸­æ‰¾é‚£æ•ˆç‡å¯æƒ³è€ŒçŸ¥ï¼Œæ˜¯å¾ˆä½çš„ã€‚   </p>
<p>æ–‡ä»¶ä¸­çš„æ•°æ®æ˜¯å±äºéç»“æ„åŒ–æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ²¡æœ‰ä»€ä¹ˆç»“æ„å¯è¨€ï¼Œè¦è§£å†³ä¸Šé¢æåˆ°çš„æ•ˆç‡é—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—å°†éç»“æ„åŒ–æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†ä¿¡æ¯æå–å‡ºæ¥ï¼Œé‡æ–°ç»„ç»‡ï¼Œä½¿å…¶å˜å¾—æœ‰ä¸€å®šç»“æ„ï¼Œç„¶åå¯¹è¿™äº›æœ‰ä¸€å®šç»“æ„çš„æ•°æ®è¿›è¡Œæœç´¢ï¼Œä»è€Œè¾¾åˆ°æœç´¢ç›¸å¯¹è¾ƒå¿«çš„ç›®çš„ã€‚è¿™å°±å«å…¨æ–‡æœç´¢ã€‚å³å…ˆå»ºç«‹ç´¢å¼•ï¼Œå†å¯¹ç´¢å¼•è¿›è¡Œæœç´¢çš„è¿‡ç¨‹ã€‚ </p>
<h3 id="1-2-Lucene-å»ºç«‹ç´¢å¼•çš„æ–¹å¼"><a href="#1-2-Lucene-å»ºç«‹ç´¢å¼•çš„æ–¹å¼" class="headerlink" title="1.2 Lucene å»ºç«‹ç´¢å¼•çš„æ–¹å¼"></a>1.2 Lucene å»ºç«‹ç´¢å¼•çš„æ–¹å¼</h3><p>é‚£ä¹ˆ Lucene ä¸­æ˜¯å¦‚ä½•å»ºç«‹ç´¢å¼•çš„å‘¢ï¼Ÿå‡è®¾ç°åœ¨æœ‰ä¸¤ç¯‡æ–‡ç« ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æ–‡ç« 1çš„å†…å®¹ä¸ºï¼šTom lives in Guangzhou, I live in Guangzhou too.<br>æ–‡ç« 2çš„å†…å®¹ä¸ºï¼šHe once lived in Shanghai.</p>
</blockquote>
<p>é¦–å…ˆç¬¬ä¸€æ­¥æ˜¯å°†æ–‡æ¡£ä¼ ç»™åˆ†è¯ç»„ä»¶ï¼ˆTokenizerï¼‰ï¼Œåˆ†è¯ç»„ä»¶ä¼šå°†æ–‡æ¡£åˆ†æˆä¸€ä¸ªä¸ªå•è¯ï¼Œå¹¶å»é™¤æ ‡ç‚¹ç¬¦å·å’Œåœè¯ã€‚æ‰€è°“çš„åœè¯æŒ‡çš„æ˜¯æ²¡æœ‰ç‰¹åˆ«æ„ä¹‰çš„è¯ï¼Œæ¯”å¦‚è‹±æ–‡ä¸­çš„ aï¼Œtheï¼Œtoo ç­‰ã€‚ç»è¿‡åˆ†è¯åï¼Œå¾—åˆ°è¯å…ƒï¼ˆTokenï¼‰ ã€‚å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æ–‡ç« 1ç»è¿‡åˆ†è¯åçš„ç»“æœï¼š<code>[Tom]</code> <code>[lives]</code> <code>[Guangzhou]</code> <code>[I]</code> <code>[live]</code> <code>[Guangzhou]</code><br>æ–‡ç« 2ç»è¿‡åˆ†è¯åçš„ç»“æœï¼š<code>[He]</code> <code>[lives]</code> <code>[Shanghai]</code></p>
</blockquote>
<p>ç„¶åå°†è¯å…ƒä¼ ç»™è¯­è¨€å¤„ç†ç»„ä»¶ï¼ˆLinguistic Processorï¼‰ï¼Œå¯¹äºè‹±è¯­ï¼Œè¯­è¨€å¤„ç†ç»„ä»¶ä¸€èˆ¬ä¼šå°†å­—æ¯å˜ä¸ºå°å†™ï¼Œå°†å•è¯ç¼©å‡ä¸ºè¯æ ¹å½¢å¼ï¼Œå¦‚ â€livesâ€ åˆ° â€liveâ€ ç­‰ï¼Œå°†å•è¯è½¬å˜ä¸ºè¯æ ¹å½¢å¼ï¼Œå¦‚ â€droveâ€ åˆ° â€driveâ€ ç­‰ã€‚ç„¶åå¾—åˆ°è¯ï¼ˆTermï¼‰ã€‚å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æ–‡ç« 1ç»è¿‡å¤„ç†åçš„ç»“æœï¼š<code>[tom]</code> <code>[live]</code> <code>[guangzhou]</code> <code>[i]</code> <code>[live]</code> <code>[guangzhou]</code><br>æ–‡ç« 2ç»è¿‡å¤„ç†åçš„ç»“æœï¼š<code>[he]</code> <code>[live]</code> <code>[shanghai]</code></p>
</blockquote>
<p>æœ€åå°†å¾—åˆ°çš„è¯ä¼ ç»™ç´¢å¼•ç»„ä»¶ï¼ˆIndexerï¼‰ï¼Œç´¢å¼•ç»„ä»¶ç»è¿‡å¤„ç†ï¼Œå¾—åˆ°ä¸‹é¢çš„ç´¢å¼•ç»“æ„ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å…³é”®è¯</th>
<th align="center">æ–‡ç« å·[å‡ºç°é¢‘ç‡]</th>
<th align="center">å‡ºç°ä½ç½®</th>
</tr>
</thead>
<tbody><tr>
<td align="center">guangzhou</td>
<td align="center">1[2]</td>
<td align="center">3,6</td>
</tr>
<tr>
<td align="center">he</td>
<td align="center">2[1]</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">i</td>
<td align="center">1[1]</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">live</td>
<td align="center">1[2],2[1]</td>
<td align="center">2,5,2</td>
</tr>
<tr>
<td align="center">shanghai</td>
<td align="center">2[1]</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">tom</td>
<td align="center">1[1]</td>
<td align="center">1</td>
</tr>
</tbody></table>
<p>ä»¥ä¸Šå°±æ˜¯Lucene ç´¢å¼•ç»“æ„ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚å®ƒçš„å…³é”®å­—æ˜¯æŒ‰å­—ç¬¦é¡ºåºæ’åˆ—çš„ï¼Œå› æ­¤ Lucene å¯ä»¥ç”¨äºŒå…ƒæœç´¢ç®—æ³•å¿«é€Ÿå®šä½å…³é”®è¯ã€‚å®ç°æ—¶ Lucene å°†ä¸Šé¢ä¸‰åˆ—åˆ†åˆ«ä½œä¸ºè¯å…¸æ–‡ä»¶ï¼ˆTerm Dictionaryï¼‰ã€é¢‘ç‡æ–‡ä»¶ï¼ˆfrequenciesï¼‰å’Œä½ç½®æ–‡ä»¶ï¼ˆpositionsï¼‰ä¿å­˜ã€‚å…¶ä¸­è¯å…¸æ–‡ä»¶ä¸ä»…ä¿å­˜æœ‰æ¯ä¸ªå…³é”®è¯ï¼Œè¿˜ä¿ç•™äº†æŒ‡å‘é¢‘ç‡æ–‡ä»¶å’Œä½ç½®æ–‡ä»¶çš„æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆå¯ä»¥æ‰¾åˆ°è¯¥å…³é”®å­—çš„é¢‘ç‡ä¿¡æ¯å’Œä½ç½®ä¿¡æ¯ã€‚<br>æœç´¢çš„è¿‡ç¨‹æ˜¯å…ˆå¯¹è¯å…¸äºŒå…ƒæŸ¥æ‰¾ã€æ‰¾åˆ°è¯¥è¯ï¼Œé€šè¿‡æŒ‡å‘é¢‘ç‡æ–‡ä»¶çš„æŒ‡é’ˆè¯»å‡ºæ‰€æœ‰æ–‡ç« å·ï¼Œç„¶åè¿”å›ç»“æœï¼Œç„¶åå°±å¯ä»¥åœ¨å…·ä½“çš„æ–‡ç« ä¸­æ ¹æ®å‡ºç°ä½ç½®æ‰¾åˆ°è¯¥è¯äº†ã€‚æ‰€ä»¥ Lucene åœ¨ç¬¬ä¸€æ¬¡å»ºç«‹ç´¢å¼•çš„æ—¶å€™å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯ä»¥åå°±ä¸éœ€è¦æ¯æ¬¡éƒ½å»ºç«‹ç´¢å¼•äº†ï¼Œå°±å¿«äº†ã€‚</p>
<p>ç†è§£äº† Lucene çš„åˆ†è¯åŸç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ Spring Boot ä¸­é›†æˆ Lucene å¹¶å®ç°ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ã€‚</p>
<h2 id="2-Spring-Boot-ä¸­é›†æˆ-Lucence"><a href="#2-Spring-Boot-ä¸­é›†æˆ-Lucence" class="headerlink" title="2. Spring Boot ä¸­é›†æˆ Lucence"></a>2. Spring Boot ä¸­é›†æˆ Lucence</h2><h3 id="2-1-ä¾èµ–å¯¼å…¥-3"><a href="#2-1-ä¾èµ–å¯¼å…¥-3" class="headerlink" title="2.1 ä¾èµ–å¯¼å…¥"></a>2.1 ä¾èµ–å¯¼å…¥</h3><p>é¦–å…ˆéœ€è¦å¯¼å…¥ Lucene çš„ä¾èµ–ï¼Œå®ƒçš„ä¾èµ–æœ‰å¥½å‡ ä¸ªï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Lucenceæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- LuceneæŸ¥è¯¢è§£æåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-queryparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¸¸è§„çš„åˆ†è¯ï¼ˆè‹±æ–‡ï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-analyzers-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ”¯æŒåˆ†è¯é«˜äº®  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-highlighter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ”¯æŒä¸­æ–‡åˆ†è¯  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-analyzers-smartcn<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªä¾èµ–æ˜¯ç”¨æ¥æ”¯æŒä¸­æ–‡åˆ†è¯çš„ï¼Œå› ä¸ºé»˜è®¤æ˜¯æ”¯æŒè‹±æ–‡çš„ã€‚é‚£ä¸ªé«˜äº®çš„åˆ†è¯ä¾èµ–æ˜¯æœ€åæˆ‘è¦åšä¸€ä¸ªæœç´¢ï¼Œç„¶åå°†æœåˆ°çš„å†…å®¹é«˜äº®æ˜¾ç¤ºï¼Œæ¨¡æ‹Ÿå½“å‰äº’è”ç½‘ä¸Šçš„åšæ³•ï¼Œå¤§å®¶å¯ä»¥è¿ç”¨åˆ°å®é™…é¡¹ç›®ä¸­å»ã€‚</p>
<h3 id="2-2-å¿«é€Ÿå…¥é—¨"><a href="#2-2-å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.2 å¿«é€Ÿå…¥é—¨"></a>2.2 å¿«é€Ÿå…¥é—¨</h3><p>æ ¹æ®ä¸Šæ–‡çš„åˆ†æï¼Œå…¨æ–‡æ£€ç´¢æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼Œå…ˆå»ºç«‹ç´¢å¼•ï¼Œå†æ£€ç´¢ã€‚æ‰€ä»¥ä¸ºäº†æµ‹è¯•è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘æ–°å»ºä¸¤ä¸ª java ç±»ï¼Œä¸€ä¸ªç”¨æ¥å»ºç«‹ç´¢å¼•çš„ï¼Œå¦ä¸€ä¸ªç”¨æ¥æ£€ç´¢ã€‚</p>
<h4 id="2-2-1-å»ºç«‹ç´¢å¼•"><a href="#2-2-1-å»ºç«‹ç´¢å¼•" class="headerlink" title="2.2.1 å»ºç«‹ç´¢å¼•"></a>2.2.1 å»ºç«‹ç´¢å¼•</h4><p>æˆ‘ä»¬è‡ªå·±å¼„å‡ ä¸ªæ–‡ä»¶ï¼Œæ”¾åˆ° <code>D:\lucene\data</code> ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª Indexer ç±»æ¥å®ç°å»ºç«‹ç´¢å¼•åŠŸèƒ½ã€‚é¦–å…ˆåœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–æ ‡å‡†åˆ†è¯å™¨å’Œå†™ç´¢å¼•å®ä¾‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Indexer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†™ç´¢å¼•å®ä¾‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> IndexWriter writer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„é€ æ–¹æ³•ï¼Œå®ä¾‹åŒ–IndexWriter</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> indexDir</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Indexer</span><span class="params">(String indexDir)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Directory dir = FSDirectory.open(Paths.get(indexDir));</span><br><span class="line">        <span class="comment">//æ ‡å‡†åˆ†è¯å™¨ï¼Œä¼šè‡ªåŠ¨å»æ‰ç©ºæ ¼å•Šï¼Œis a theç­‰å•è¯</span></span><br><span class="line">        Analyzer analyzer = <span class="keyword">new</span> StandardAnalyzer();</span><br><span class="line">        <span class="comment">//å°†æ ‡å‡†åˆ†è¯å™¨é…åˆ°å†™ç´¢å¼•çš„é…ç½®ä¸­</span></span><br><span class="line">        IndexWriterConfig config = <span class="keyword">new</span> IndexWriterConfig(analyzer);</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–å†™ç´¢å¼•å¯¹è±¡</span></span><br><span class="line">        writer = <span class="keyword">new</span> IndexWriter(dir, config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ„é€ æ”¾å‘ä¸­ä¼ ä¸€ä¸ªå­˜æ”¾ç´¢å¼•çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç„¶åæ„å»ºæ ‡å‡†åˆ†è¯å™¨ï¼ˆè¿™æ˜¯è‹±æ–‡çš„ï¼‰ï¼Œå†ä½¿ç”¨æ ‡å‡†åˆ†è¯å™¨æ¥å®ä¾‹åŒ–å†™ç´¢å¼•å¯¹è±¡ã€‚æ¥ä¸‹æ¥å°±å¼€å§‹å»ºç«‹ç´¢å¼•äº†ï¼Œæˆ‘å°†è§£é‡Šæ”¾åˆ°ä»£ç æ³¨é‡Šé‡Œï¼Œæ–¹ä¾¿å¤§å®¶è·Ÿè¿›ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç´¢å¼•æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> dataDir</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexAll</span><span class="params">(String dataDir)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// è·å–è¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">    File[] files = <span class="keyword">new</span> File(dataDir).listFiles();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != files) &#123;</span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">            <span class="comment">//è°ƒç”¨ä¸‹é¢çš„indexFileæ–¹æ³•ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡Œç´¢å¼•</span></span><br><span class="line">            indexFile(file);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›ç´¢å¼•çš„æ–‡ä»¶æ•°</span></span><br><span class="line">    <span class="keyword">return</span> writer.numDocs();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç´¢å¼•æŒ‡å®šçš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">indexFile</span><span class="params">(File file)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"ç´¢å¼•æ–‡ä»¶çš„è·¯å¾„ï¼š"</span> + file.getCanonicalPath());</span><br><span class="line">    <span class="comment">//è°ƒç”¨ä¸‹é¢çš„getDocumentæ–¹æ³•ï¼Œè·å–è¯¥æ–‡ä»¶çš„document</span></span><br><span class="line">    Document doc = getDocument(file);</span><br><span class="line">    <span class="comment">//å°†docæ·»åŠ åˆ°ç´¢å¼•ä¸­</span></span><br><span class="line">    writer.addDocument(doc);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡æ¡£ï¼Œæ–‡æ¡£é‡Œå†è®¾ç½®æ¯ä¸ªå­—æ®µï¼Œå°±ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„ä¸€è¡Œè®°å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Document <span class="title">getDocument</span><span class="params">(File file)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Document doc = <span class="keyword">new</span> Document();</span><br><span class="line">    <span class="comment">//å¼€å§‹æ·»åŠ å­—æ®µ</span></span><br><span class="line">    <span class="comment">//æ·»åŠ å†…å®¹</span></span><br><span class="line">    doc.add(<span class="keyword">new</span> TextField(<span class="string">"contents"</span>, <span class="keyword">new</span> FileReader(file)));</span><br><span class="line">    <span class="comment">//æ·»åŠ æ–‡ä»¶åï¼Œå¹¶æŠŠè¿™ä¸ªå­—æ®µå­˜åˆ°ç´¢å¼•æ–‡ä»¶é‡Œ</span></span><br><span class="line">    doc.add(<span class="keyword">new</span> TextField(<span class="string">"fileName"</span>, file.getName(), Field.Store.YES));</span><br><span class="line">    <span class="comment">//æ·»åŠ æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    doc.add(<span class="keyword">new</span> TextField(<span class="string">"fullPath"</span>, file.getCanonicalPath(), Field.Store.YES));</span><br><span class="line">    <span class="keyword">return</span> doc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å»ºç«‹å¥½ç´¢å¼•äº†ï¼Œæˆ‘ä»¬åœ¨è¯¥ç±»ä¸­å†™ä¸€ä¸ª main æ–¹æ³•æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç´¢å¼•ä¿å­˜åˆ°çš„è·¯å¾„</span></span><br><span class="line">        String indexDir = <span class="string">"D:\\lucene"</span>;</span><br><span class="line">        <span class="comment">//éœ€è¦ç´¢å¼•çš„æ–‡ä»¶æ•°æ®å­˜æ”¾çš„ç›®å½•</span></span><br><span class="line">        String dataDir = <span class="string">"D:\\lucene\\data"</span>;</span><br><span class="line">        Indexer indexer = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> indexedNum = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//è®°å½•ç´¢å¼•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å¼€å§‹æ„å»ºç´¢å¼•</span></span><br><span class="line">            indexer = <span class="keyword">new</span> Indexer(indexDir);</span><br><span class="line">            indexedNum = indexer.indexAll(dataDir);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != indexer) &#123;</span><br><span class="line">                    indexer.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è®°å½•ç´¢å¼•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"ç´¢å¼•è€—æ—¶"</span> + (endTime - startTime) + <span class="string">"æ¯«ç§’"</span>);</span><br><span class="line">        System.out.println(<span class="string">"å…±ç´¢å¼•äº†"</span> + indexedNum + <span class="string">"ä¸ªæ–‡ä»¶"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘æäº†ä¸¤ä¸ª tomcat ç›¸å…³çš„æ–‡ä»¶æ”¾åˆ° <code>D:\lucene\data</code> ä¸‹äº†ï¼Œæ‰§è¡Œå®Œä¹‹åï¼Œçœ‹åˆ°æ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç´¢å¼•æ–‡ä»¶çš„è·¯å¾„ï¼šD:\lucene\data\catalina.properties</span><br><span class="line">ç´¢å¼•æ–‡ä»¶çš„è·¯å¾„ï¼šD:\lucene\data\logging.properties</span><br><span class="line">ç´¢å¼•è€—æ—¶882æ¯«ç§’</span><br><span class="line">å…±ç´¢å¼•äº†2ä¸ªæ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬å» <code>D:\lucene\</code> ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°ä¸€äº›ç´¢å¼•æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¸èƒ½åˆ é™¤ï¼Œåˆ é™¤äº†å°±éœ€è¦é‡æ–°æ„å»ºç´¢å¼•ï¼Œå¦åˆ™æ²¡äº†ç´¢å¼•ï¼Œå°±æ— æ³•å»æ£€ç´¢å†…å®¹äº†ã€‚</p>
<p>####2.2.2 æ£€ç´¢å†…å®¹</p>
<p>ä¸Šé¢æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶çš„ç´¢å¼•å»ºç«‹å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å†™æ£€ç´¢ç¨‹åºäº†ï¼Œåœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾ç‰¹å®šçš„è¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Searcher</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">search</span><span class="params">(String indexDir, String q)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¦æŸ¥è¯¢çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">        Directory dir = FSDirectory.open(Paths.get(indexDir));</span><br><span class="line">        IndexReader reader = DirectoryReader.open(dir);</span><br><span class="line">        <span class="comment">//æ„å»ºIndexSearcher</span></span><br><span class="line">        IndexSearcher searcher = <span class="keyword">new</span> IndexSearcher(reader);</span><br><span class="line">        <span class="comment">//æ ‡å‡†åˆ†è¯å™¨ï¼Œä¼šè‡ªåŠ¨å»æ‰ç©ºæ ¼å•Šï¼Œis a theç­‰å•è¯</span></span><br><span class="line">        Analyzer analyzer = <span class="keyword">new</span> StandardAnalyzer();</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢è§£æå™¨</span></span><br><span class="line">        QueryParser parser = <span class="keyword">new</span> QueryParser(<span class="string">"contents"</span>, analyzer);</span><br><span class="line">        <span class="comment">//é€šè¿‡è§£æè¦æŸ¥è¯¢çš„Stringï¼Œè·å–æŸ¥è¯¢å¯¹è±¡ï¼Œqä¸ºä¼ è¿›æ¥çš„å¾…æŸ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line">        Query query = parser.parse(q);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®°å½•ç´¢å¼•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//å¼€å§‹æŸ¥è¯¢ï¼ŒæŸ¥è¯¢å‰10æ¡æ•°æ®ï¼Œå°†è®°å½•ä¿å­˜åœ¨docsä¸­</span></span><br><span class="line">        TopDocs docs = searcher.search(query, <span class="number">10</span>);</span><br><span class="line">        <span class="comment">//è®°å½•ç´¢å¼•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"åŒ¹é…"</span> + q + <span class="string">"å…±è€—æ—¶"</span> + (endTime-startTime) + <span class="string">"æ¯«ç§’"</span>);</span><br><span class="line">        System.out.println(<span class="string">"æŸ¥è¯¢åˆ°"</span> + docs.totalHits + <span class="string">"æ¡è®°å½•"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å–å‡ºæ¯æ¡æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">        <span class="keyword">for</span>(ScoreDoc scoreDoc : docs.scoreDocs) &#123;</span><br><span class="line">            <span class="comment">//scoreDoc.docç›¸å½“äºdocID,æ ¹æ®è¿™ä¸ªdocIDæ¥è·å–æ–‡æ¡£</span></span><br><span class="line">            Document doc = searcher.doc(scoreDoc.doc);</span><br><span class="line">            <span class="comment">//fullPathæ˜¯åˆšåˆšå»ºç«‹ç´¢å¼•çš„æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºè·¯å¾„ã€‚ä¹Ÿå¯ä»¥å–å…¶ä»–çš„å†…å®¹ï¼Œåªè¦æˆ‘ä»¬åœ¨å»ºç«‹ç´¢å¼•æ—¶æœ‰å®šä¹‰å³å¯ã€‚</span></span><br><span class="line">            System.out.println(doc.get(<span class="string">"fullPath"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        reader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>okï¼Œè¿™æ ·æˆ‘ä»¬æ£€ç´¢çš„ä»£ç å°±å†™å®Œäº†ï¼Œæ¯ä¸€æ­¥è§£é‡Šæˆ‘å†™åœ¨ä»£ç ä¸­çš„æ³¨é‡Šä¸Šäº†ï¼Œä¸‹é¢å†™ä¸ª main æ–¹æ³•æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String indexDir = <span class="string">"D:\\lucene"</span>;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢è¿™ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    String q = <span class="string">"security"</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        search(indexDir, q);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸ¥ä¸€ä¸‹ <code>security</code> è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰§è¡Œä¸€ä¸‹çœ‹æ§åˆ¶å°æ‰“å°çš„ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŒ¹é…securityå…±è€—æ—¶23æ¯«ç§’</span><br><span class="line">æŸ¥è¯¢åˆ°1æ¡è®°å½•</span><br><span class="line">D:\lucene\data\catalina.properties</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œè€—æ—¶äº†23æ¯«ç§’åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°äº† security è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¾“å‡ºäº†æ–‡ä»¶çš„åç§°ã€‚ä¸Šé¢çš„ä»£ç æˆ‘å†™çš„å¾ˆè¯¦ç»†ï¼Œè¿™ä¸ªä»£ç å·²ç»æ¯”è¾ƒå…¨äº†ï¼Œå¯ä»¥ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šã€‚</p>
<h3 id="2-3-ä¸­æ–‡åˆ†è¯æ£€ç´¢é«˜äº®å®æˆ˜"><a href="#2-3-ä¸­æ–‡åˆ†è¯æ£€ç´¢é«˜äº®å®æˆ˜" class="headerlink" title="2.3 ä¸­æ–‡åˆ†è¯æ£€ç´¢é«˜äº®å®æˆ˜"></a>2.3 ä¸­æ–‡åˆ†è¯æ£€ç´¢é«˜äº®å®æˆ˜</h3><p>ä¸Šæ–‡å·²ç»å†™äº†å»ºç«‹ç´¢å¼•å’Œæ£€ç´¢çš„ä»£ç ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€æ˜¯ç»“åˆé¡µé¢åšä¸€äº›æŸ¥è¯¢ç»“æœçš„å±•ç¤ºï¼Œæ¯”å¦‚æˆ‘è¦æŸ¥æŸä¸ªå…³é”®å­—ï¼ŒæŸ¥åˆ°äº†ä¹‹åï¼Œå°†ç›¸å…³çš„ä¿¡æ¯ç‚¹å±•ç¤ºå‡ºæ¥ï¼Œå¹¶å°†æŸ¥è¯¢çš„å…³é”®å­—é«˜äº®ç­‰ç­‰ã€‚è¿™ç§éœ€æ±‚åœ¨å®é™…é¡¹ç›®ä¸­éå¸¸å¸¸è§ï¼Œè€Œä¸”å¤§å¤šæ•°ç½‘ç«™ä¸­éƒ½ä¼šæœ‰è¿™ç§æ•ˆæœã€‚æ‰€ä»¥è¿™ä¸€å°èŠ‚æˆ‘ä»¬å°±ä½¿ç”¨ Lucene æ¥å®ç°è¿™ç§æ•ˆæœã€‚</p>
<h4 id="2-3-1-ä¸­æ–‡åˆ†è¯"><a href="#2-3-1-ä¸­æ–‡åˆ†è¯" class="headerlink" title="2.3.1 ä¸­æ–‡åˆ†è¯"></a>2.3.1 ä¸­æ–‡åˆ†è¯</h4><p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª ChineseIndexer ç±»æ¥å»ºç«‹ä¸­æ–‡ç´¢å¼•ï¼Œå»ºç«‹è¿‡ç¨‹å’Œè‹±æ–‡ç´¢å¼•ä¸€æ ·çš„ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºä½¿ç”¨çš„æ˜¯ä¸­æ–‡åˆ†è¯å™¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ç”¨é€šè¿‡è¯»å–æ–‡ä»¶å»å»ºç«‹ç´¢å¼•ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹ç”¨å­—ç¬¦ä¸²æ¥å»ºç«‹ï¼Œå› ä¸ºåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µæ˜¯è·å–åˆ°ä¸€äº›æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œç„¶åæ ¹æ®ä¸€äº›å…³é”®å­—å»æŸ¥è¯¢ç›¸å…³å†…å®¹ç­‰ç­‰ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChineseIndexer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜æ”¾ç´¢å¼•çš„ä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Directory dir;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡†å¤‡ä¸€ä¸‹ç”¨æ¥æµ‹è¯•çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">//ç”¨æ¥æ ‡è¯†æ–‡æ¡£</span></span><br><span class="line">    <span class="keyword">private</span> Integer ids[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> String citys[] = &#123;<span class="string">"ä¸Šæµ·"</span>, <span class="string">"å—äº¬"</span>, <span class="string">"é’å²›"</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> String descs[] = &#123;</span><br><span class="line">            <span class="string">"ä¸Šæµ·æ˜¯ä¸ªç¹åçš„åŸå¸‚ã€‚"</span>,</span><br><span class="line">            <span class="string">"å—äº¬æ˜¯ä¸€ä¸ªæ–‡åŒ–çš„åŸå¸‚å—äº¬ï¼Œç®€ç§°å®ï¼Œæ˜¯æ±Ÿè‹çœä¼šï¼Œåœ°å¤„ä¸­å›½ä¸œéƒ¨åœ°åŒºï¼Œé•¿æ±Ÿä¸‹æ¸¸ï¼Œæ¿’æ±Ÿè¿‘æµ·ã€‚å…¨å¸‚ä¸‹è¾–11ä¸ªåŒºï¼Œæ€»é¢ç§¯6597å¹³æ–¹å…¬é‡Œï¼Œ2013å¹´å»ºæˆåŒºé¢ç§¯752.83å¹³æ–¹å…¬é‡Œï¼Œå¸¸ä½äººå£818.78ä¸‡ï¼Œå…¶ä¸­åŸé•‡äººå£659.1ä¸‡äººã€‚[1-4] â€œæ±Ÿå—ä½³ä¸½åœ°ï¼Œé‡‘é™µå¸ç‹å·â€ï¼Œå—äº¬æ‹¥æœ‰ç€6000å¤šå¹´æ–‡æ˜å²ã€è¿‘2600å¹´å»ºåŸå²å’Œè¿‘500å¹´çš„å»ºéƒ½å²ï¼Œæ˜¯ä¸­å›½å››å¤§å¤éƒ½ä¹‹ä¸€ï¼Œæœ‰â€œå…­æœå¤éƒ½â€ã€â€œåæœéƒ½ä¼šâ€ä¹‹ç§°ï¼Œæ˜¯ä¸­åæ–‡æ˜çš„é‡è¦å‘ç¥¥åœ°ï¼Œå†å²ä¸Šæ›¾æ•°æ¬¡åº‡ä½‘åå¤ä¹‹æ­£æœ”ï¼Œé•¿æœŸæ˜¯ä¸­å›½å—æ–¹çš„æ”¿æ²»ã€ç»æµã€æ–‡åŒ–ä¸­å¿ƒï¼Œæ‹¥æœ‰åšé‡çš„æ–‡åŒ–åº•è•´å’Œä¸°å¯Œçš„å†å²é—å­˜ã€‚[5-7] å—äº¬æ˜¯å›½å®¶é‡è¦çš„ç§‘æ•™ä¸­å¿ƒï¼Œè‡ªå¤ä»¥æ¥å°±æ˜¯ä¸€åº§å´‡æ–‡é‡æ•™çš„åŸå¸‚ï¼Œæœ‰â€œå¤©ä¸‹æ–‡æ¢â€ã€â€œä¸œå—ç¬¬ä¸€å­¦â€çš„ç¾èª‰ã€‚æˆªè‡³2013å¹´ï¼Œå—äº¬æœ‰é«˜ç­‰é™¢æ ¡75æ‰€ï¼Œå…¶ä¸­211é«˜æ ¡8æ‰€ï¼Œä»…æ¬¡äºåŒ—äº¬ä¸Šæµ·ï¼›å›½å®¶é‡ç‚¹å®éªŒå®¤25æ‰€ã€å›½å®¶é‡ç‚¹å­¦ç§‘169ä¸ªã€ä¸¤é™¢é™¢å£«83äººï¼Œå‡å±…ä¸­å›½ç¬¬ä¸‰ã€‚[8-10] ã€‚"</span>,</span><br><span class="line">            <span class="string">"é’å²›æ˜¯ä¸€ä¸ªç¾ä¸½çš„åŸå¸‚ã€‚"</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> indexDir</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">index</span><span class="params">(String indexDir)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        dir = FSDirectory.open(Paths.get(indexDir));</span><br><span class="line">        <span class="comment">// å…ˆè°ƒç”¨ getWriter è·å–IndexWriterå¯¹è±¡</span></span><br><span class="line">        IndexWriter writer = getWriter();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ids.length; i++) &#123;</span><br><span class="line">            Document doc = <span class="keyword">new</span> Document();</span><br><span class="line">            <span class="comment">// æŠŠä¸Šé¢çš„æ•°æ®éƒ½ç”Ÿæˆç´¢å¼•ï¼Œåˆ†åˆ«ç”¨idã€cityå’Œdescæ¥æ ‡è¯†</span></span><br><span class="line">            doc.add(<span class="keyword">new</span> IntField(<span class="string">"id"</span>, ids[i], Field.Store.YES));</span><br><span class="line">            doc.add(<span class="keyword">new</span> StringField(<span class="string">"city"</span>, citys[i], Field.Store.YES));</span><br><span class="line">            doc.add(<span class="keyword">new</span> TextField(<span class="string">"desc"</span>, descs[i], Field.Store.YES));</span><br><span class="line">            <span class="comment">//æ·»åŠ æ–‡æ¡£</span></span><br><span class="line">            writer.addDocument(doc);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//closeäº†æ‰çœŸæ­£å†™åˆ°æ–‡æ¡£ä¸­</span></span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–IndexWriterå®ä¾‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> IndexWriter <span class="title">getWriter</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨ä¸­æ–‡åˆ†è¯å™¨</span></span><br><span class="line">        SmartChineseAnalyzer analyzer = <span class="keyword">new</span> SmartChineseAnalyzer();</span><br><span class="line">        <span class="comment">//å°†ä¸­æ–‡åˆ†è¯å™¨é…åˆ°å†™ç´¢å¼•çš„é…ç½®ä¸­</span></span><br><span class="line">        IndexWriterConfig config = <span class="keyword">new</span> IndexWriterConfig(analyzer);</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–å†™ç´¢å¼•å¯¹è±¡</span></span><br><span class="line">        IndexWriter writer = <span class="keyword">new</span> IndexWriter(dir, config);</span><br><span class="line">        <span class="keyword">return</span> writer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ChineseIndexer().index(<span class="string">"D:\\lucene2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨ idã€cityã€desc åˆ†åˆ«ä»£è¡¨ idã€åŸå¸‚åç§°å’ŒåŸå¸‚æè¿°ï¼Œç”¨ä»–ä»¬ä½œä¸ºå…³é”®å­—æ¥å»ºç«‹ç´¢å¼•ï¼Œåé¢æˆ‘ä»¬è·å–å†…å®¹çš„æ—¶å€™ï¼Œä¸»è¦æ¥è·å–åŸå¸‚æè¿°ã€‚å—äº¬çš„æè¿°æˆ‘æ•…æ„å†™çš„é•¿ä¸€ç‚¹ï¼Œå› ä¸ºä¸‹æ–‡æ£€ç´¢çš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒçš„å…³é”®å­—ä¼šæ£€ç´¢åˆ°ä¸åŒéƒ¨åˆ†çš„ä¿¡æ¯ï¼Œæœ‰ä¸ªæƒé‡çš„æ¦‚å¿µåœ¨é‡Œé¢ã€‚<br>ç„¶åæ‰§è¡Œä¸€ä¸‹ main æ–¹æ³•ï¼Œå°†ç´¢å¼•ä¿å­˜åˆ° <code>D:\lucene2\</code> ä¸­ã€‚ </p>
<h4 id="2-3-2-ä¸­æ–‡åˆ†è¯æŸ¥è¯¢"><a href="#2-3-2-ä¸­æ–‡åˆ†è¯æŸ¥è¯¢" class="headerlink" title="2.3.2 ä¸­æ–‡åˆ†è¯æŸ¥è¯¢"></a>2.3.2 ä¸­æ–‡åˆ†è¯æŸ¥è¯¢</h4><p>ä¸­æ–‡åˆ†è¯æŸ¥è¯¢ä»£ç é€»è¾‘å’Œé»˜è®¤çš„æŸ¥è¯¢å·®ä¸å¤šï¼Œæœ‰ä¸€äº›åŒºåˆ«åœ¨äºï¼Œæˆ‘ä»¬éœ€è¦å°†æŸ¥è¯¢å‡ºæ¥çš„å…³é”®å­—æ ‡çº¢åŠ ç²—ç­‰éœ€è¦å¤„ç†ï¼Œéœ€è¦è®¡ç®—å‡ºä¸€ä¸ªå¾—åˆ†ç‰‡æ®µï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¯”å¦‚æˆ‘æœç´¢ â€œå—äº¬æ–‡åŒ–â€ è·Ÿæœç´¢ â€œå—äº¬æ–‡æ˜â€ï¼Œè¿™ä¸¤ä¸ªæœç´¢ç»“æœåº”è¯¥æ ¹æ®å…³é”®å­—å‡ºç°çš„ä½ç½®ï¼Œè¿”å›çš„ç»“æœä¸ä¸€æ ·æ‰å¯¹ï¼Œè¿™åœ¨ä¸‹æ–‡ä¼šæµ‹è¯•ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»£ç å’Œæ³¨é‡Šï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChineseSearch</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ChineseSearch<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">search</span><span class="params">(String indexDir, String q)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¦æŸ¥è¯¢çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">        Directory dir = FSDirectory.open(Paths.get(indexDir));</span><br><span class="line">        IndexReader reader = DirectoryReader.open(dir);</span><br><span class="line">        IndexSearcher searcher = <span class="keyword">new</span> IndexSearcher(reader);</span><br><span class="line">        <span class="comment">//ä½¿ç”¨ä¸­æ–‡åˆ†è¯å™¨</span></span><br><span class="line">        SmartChineseAnalyzer analyzer = <span class="keyword">new</span> SmartChineseAnalyzer();</span><br><span class="line">        <span class="comment">//ç”±ä¸­æ–‡åˆ†è¯å™¨åˆå§‹åŒ–æŸ¥è¯¢è§£æå™¨</span></span><br><span class="line">        QueryParser parser = <span class="keyword">new</span> QueryParser(<span class="string">"desc"</span>, analyzer);</span><br><span class="line">        <span class="comment">//é€šè¿‡è§£æè¦æŸ¥è¯¢çš„Stringï¼Œè·å–æŸ¥è¯¢å¯¹è±¡</span></span><br><span class="line">        Query query = parser.parse(q);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®°å½•ç´¢å¼•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//å¼€å§‹æŸ¥è¯¢ï¼ŒæŸ¥è¯¢å‰10æ¡æ•°æ®ï¼Œå°†è®°å½•ä¿å­˜åœ¨docsä¸­</span></span><br><span class="line">        TopDocs docs = searcher.search(query, <span class="number">10</span>);</span><br><span class="line">        <span class="comment">//è®°å½•ç´¢å¼•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        logger.info(<span class="string">"åŒ¹é…&#123;&#125;å…±è€—æ—¶&#123;&#125;æ¯«ç§’"</span>, q, (endTime - startTime));</span><br><span class="line">        logger.info(<span class="string">"æŸ¥è¯¢åˆ°&#123;&#125;æ¡è®°å½•"</span>, docs.totalHits);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœä¸æŒ‡å®šå‚æ•°çš„è¯ï¼Œé»˜è®¤æ˜¯åŠ ç²—ï¼Œå³&lt;b&gt;&lt;b/&gt;</span></span><br><span class="line">        SimpleHTMLFormatter simpleHTMLFormatter = <span class="keyword">new</span> SimpleHTMLFormatter(<span class="string">"&lt;b&gt;&lt;font color=red&gt;"</span>,<span class="string">"&lt;/font&gt;&lt;/b&gt;"</span>);</span><br><span class="line">        <span class="comment">//æ ¹æ®æŸ¥è¯¢å¯¹è±¡è®¡ç®—å¾—åˆ†ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªæŸ¥è¯¢ç»“æœæœ€é«˜çš„å¾—åˆ†</span></span><br><span class="line">        QueryScorer scorer = <span class="keyword">new</span> QueryScorer(query);</span><br><span class="line">        <span class="comment">//æ ¹æ®è¿™ä¸ªå¾—åˆ†è®¡ç®—å‡ºä¸€ä¸ªç‰‡æ®µ</span></span><br><span class="line">        Fragmenter fragmenter = <span class="keyword">new</span> SimpleSpanFragmenter(scorer);</span><br><span class="line">        <span class="comment">//å°†è¿™ä¸ªç‰‡æ®µä¸­çš„å…³é”®å­—ç”¨ä¸Šé¢åˆå§‹åŒ–å¥½çš„é«˜äº®æ ¼å¼é«˜äº®</span></span><br><span class="line">        Highlighter highlighter = <span class="keyword">new</span> Highlighter(simpleHTMLFormatter, scorer);</span><br><span class="line">        <span class="comment">//è®¾ç½®ä¸€ä¸‹è¦æ˜¾ç¤ºçš„ç‰‡æ®µ</span></span><br><span class="line">        highlighter.setTextFragmenter(fragmenter);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å–å‡ºæ¯æ¡æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(ScoreDoc scoreDoc : docs.scoreDocs) &#123;</span><br><span class="line">            <span class="comment">//scoreDoc.docç›¸å½“äºdocID,æ ¹æ®è¿™ä¸ªdocIDæ¥è·å–æ–‡æ¡£</span></span><br><span class="line">            Document doc = searcher.doc(scoreDoc.doc);</span><br><span class="line">            logger.info(<span class="string">"city:&#123;&#125;"</span>, doc.get(<span class="string">"city"</span>));</span><br><span class="line">            logger.info(<span class="string">"desc:&#123;&#125;"</span>, doc.get(<span class="string">"desc"</span>));</span><br><span class="line">            String desc = doc.get(<span class="string">"desc"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ˜¾ç¤ºé«˜äº®</span></span><br><span class="line">            <span class="keyword">if</span>(desc != <span class="keyword">null</span>) &#123;</span><br><span class="line">                TokenStream tokenStream = analyzer.tokenStream(<span class="string">"desc"</span>, <span class="keyword">new</span> StringReader(desc));</span><br><span class="line">                String summary = highlighter.getBestFragment(tokenStream, desc);</span><br><span class="line">                logger.info(<span class="string">"é«˜äº®åçš„desc:&#123;&#125;"</span>, summary);</span><br><span class="line">                list.add(summary);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        reader.close();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸€æ­¥çš„æ³¨é‡Šæˆ‘å†™çš„å¾ˆè¯¦ç»†ï¼Œåœ¨è¿™å°±ä¸èµ˜è¿°äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœã€‚</p>
<h4 id="2-3-3-æµ‹è¯•ä¸€ä¸‹"><a href="#2-3-3-æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="2.3.3 æµ‹è¯•ä¸€ä¸‹"></a>2.3.3 æµ‹è¯•ä¸€ä¸‹</h4><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ thymeleaf æ¥å†™ä¸ªç®€å•çš„é¡µé¢æ¥å±•ç¤ºè·å–åˆ°çš„æ•°æ®ï¼Œå¹¶é«˜äº®å±•ç¤ºã€‚åœ¨ controller ä¸­æˆ‘ä»¬æŒ‡å®šç´¢å¼•çš„ç›®å½•å’Œéœ€è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/lucene"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç´¢å¼•æ‰€åœ¨çš„ç›®å½•</span></span><br><span class="line">        String indexDir = <span class="string">"D:\\lucene2"</span>;</span><br><span class="line">        <span class="comment">// è¦æŸ¥è¯¢çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment">//        String q = "å—äº¬æ–‡æ˜";</span></span><br><span class="line">        String q = <span class="string">"å—äº¬æ–‡åŒ–"</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;String&gt; list = ChineseSearch.search(indexDir, q);</span><br><span class="line">            model.addAttribute(<span class="string">"list"</span>, list);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"result"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›´æ¥è¿”å›åˆ° result.html é¡µé¢ï¼Œè¯¥é¡µé¢ä¸»è¦æ¥å±•ç¤ºä¸€ä¸‹ model ä¸­çš„æ•°æ®å³å¯ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:each</span>=<span class="string">"desc : $&#123;list&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:utext</span>=<span class="string">"$&#123;desc&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œä¸èƒ½ä½¿ç”¨ <code>th:test</code>ï¼Œå¦åˆ™å­—ç¬¦ä¸²ä¸­çš„ html æ ‡ç­¾éƒ½ä¼šè¢«è½¬ä¹‰ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°é¡µé¢ã€‚ä¸‹é¢å¯åŠ¨æœåŠ¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://localhost:8080/lucene/test</code>ï¼Œæµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼Œæˆ‘ä»¬æœç´¢çš„æ˜¯ â€œå—äº¬æ–‡åŒ–â€ã€‚</p>
<p><img src="https://images.gitbook.cn/83b3f810-b377-11e8-88bf-23cb78d1fb4f" alt="å—äº¬æ–‡åŒ–"></p>
<p>å†å°† controller ä¸­çš„æœç´¢å…³é”®å­—æ”¹æˆ â€œå—äº¬æ–‡æ˜â€ï¼Œçœ‹ä¸‹å‘½ä¸­çš„æ•ˆæœã€‚</p>
<p><img src="https://images.gitbook.cn/8ef8a4a0-b377-11e8-911d-27cc5f059829" alt="å—äº¬æ–‡æ˜"></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œä¸åŒçš„å…³é”®è¯ï¼Œå®ƒä¼šè®¡ç®—ä¸€ä¸ªå¾—åˆ†ç‰‡æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„å…³é”®å­—ä¼šå‘½ä¸­ä¸åŒä½ç½®çš„å†…å®¹ï¼Œç„¶åå°†å…³é”®å­—æ ¹æ®æˆ‘ä»¬è‡ªå·±è®¾å®šçš„å½¢å¼é«˜äº®æ˜¾ç¤ºã€‚ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼ŒLucene ä¹Ÿå¯ä»¥å¾ˆæ™ºèƒ½çš„å°†å…³é”®å­—æ‹†åˆ†å‘½ä¸­ï¼Œè¿™åœ¨å®é™…é¡¹ç›®ä¸­ä¼šå¾ˆå¥½ç”¨ã€‚</p>
<h2 id="3-æ€»ç»“-3"><a href="#3-æ€»ç»“-3" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾é¦–å…ˆè¯¦ç»†çš„åˆ†æäº†å…¨æ–‡æ£€ç´¢çš„ç†è®ºè§„åˆ™ï¼Œç„¶åç»“åˆ Luceneï¼Œç³»ç»Ÿçš„è®²è¿°äº†åœ¨ Spring Boot çš„é›†æˆæ­¥éª¤ï¼Œé¦–å…ˆå¿«é€Ÿå¸¦é¢†å¤§å®¶ä»ç›´è§‚ä¸Šæ„Ÿå— Lucene å¦‚ä½•å»ºç«‹ç´¢å¼•å·²ç»å¦‚æœæ£€ç´¢ï¼Œå…¶æ¬¡é€šè¿‡ä¸­æ–‡æ£€ç´¢çš„å…·ä½“å®ä¾‹ï¼Œå±•ç¤ºäº† Lucene åœ¨å…¨æ–‡æ£€ç´¢ä¸­çš„å¹¿æ³›åº”ç”¨ã€‚Lucene ä¸éš¾ï¼Œä¸»è¦å°±æ˜¯æ­¥éª¤æ¯”è¾ƒå¤šï¼Œä»£ç ä¸ç”¨æ­»è®°ç¡¬èƒŒï¼Œæ‹¿åˆ°é¡¹ç›®ä¸­æ ¹æ®å®é™…æƒ…å†µåšå¯¹åº”çš„ä¿®æ”¹å³å¯ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„ä¸ºå¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<h1 id="ç¬¬18è¯¾ï¼šSpring-Bootæ­å»ºå®é™…é¡¹ç›®å¼€å‘ä¸­çš„æ¶æ„"><a href="#ç¬¬18è¯¾ï¼šSpring-Bootæ­å»ºå®é™…é¡¹ç›®å¼€å‘ä¸­çš„æ¶æ„" class="headerlink" title="ç¬¬18è¯¾ï¼šSpring Bootæ­å»ºå®é™…é¡¹ç›®å¼€å‘ä¸­çš„æ¶æ„"></a>ç¬¬18è¯¾ï¼šSpring Bootæ­å»ºå®é™…é¡¹ç›®å¼€å‘ä¸­çš„æ¶æ„</h1><p>å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¸»è¦ç»™å¤§å®¶è®²è§£äº† Spring Boot ä¸­å¸¸ç”¨çš„ä¸€äº›æŠ€æœ¯ç‚¹ï¼Œè¿™äº›æŠ€æœ¯ç‚¹åœ¨å®é™…é¡¹ç›®ä¸­å¯èƒ½ä¸ä¼šå…¨éƒ¨ç”¨å¾—åˆ°ï¼Œå› ä¸ºä¸åŒçš„é¡¹ç›®å¯èƒ½ä½¿ç”¨çš„æŠ€æœ¯ä¸åŒï¼Œä½†æ˜¯å¸Œæœ›å¤§å®¶éƒ½èƒ½æŒæ¡å¦‚ä½•ä½¿ç”¨ï¼Œå¹¶èƒ½è‡ªå·±æ ¹æ®å®é™…é¡¹ç›®ä¸­çš„éœ€æ±‚è¿›è¡Œç›¸åº”çš„æ‰©å±•ã€‚</p>
<p>ä¸çŸ¥é“å¤§å®¶äº†ä¸äº†è§£å•ç‰‡æœºï¼Œå•ç‰‡æœºé‡Œæœ‰ä¸ªæœ€å°ç³»ç»Ÿï¼Œè¿™ä¸ªæœ€å°ç³»ç»Ÿæ­å»ºå¥½äº†ä¹‹åï¼Œå°±å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäººä¸ºçš„æ‰©å±•ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ­å»ºä¸€ä¸ª â€œSpring Boot æœ€å°ç³»ç»Ÿæ¶æ„â€ ã€‚æ‹¿ç€è¿™ä¸ªæ¶æ„ï¼Œå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ ¹æ®å®é™…éœ€æ±‚åšç›¸åº”çš„æ‰©å±•ã€‚</p>
<p>ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªç¯å¢ƒï¼Œä¸»è¦è¦è€ƒè™‘å‡ ç‚¹ï¼šç»Ÿä¸€å°è£…çš„æ•°æ®ç»“æ„ã€å¯è°ƒå¼çš„æ¥å£ã€jsonçš„å¤„ç†ã€æ¨¡æ¿å¼•æ“çš„ä½¿ç”¨ï¼ˆæœ¬æ–‡ä¸å†™è¯¥é¡¹ï¼Œå› ä¸ºç°åœ¨å¤§éƒ¨åˆ†é¡¹ç›®éƒ½å‰åç«¯åˆ†ç¦»äº†ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¹Ÿè¿˜æœ‰éå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘åœ¨æºä»£ç é‡Œä¹ŸåŠ ä¸Šäº† thymeleafï¼‰ã€æŒä¹…å±‚çš„é›†æˆã€æ‹¦æˆªå™¨ï¼ˆè¿™ä¸ªä¹Ÿæ˜¯å¯é€‰çš„ï¼‰å’Œå…¨å±€å¼‚å¸¸å¤„ç†ã€‚ä¸€èˆ¬åŒ…æ‹¬è¿™äº›ä¸œè¥¿çš„è¯ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ª Spring Boot é¡¹ç›®ç¯å¢ƒå°±å·®ä¸å¤šäº†ï¼Œç„¶åå°±æ˜¯æ ¹æ®å…·ä½“æƒ…å†µæ¥æ‰©å±•äº†ã€‚</p>
<p>ç»“åˆå‰é¢çš„è¯¾ç¨‹å’Œä»¥ä¸Šçš„è¿™äº›ç‚¹ï¼Œæœ¬èŠ‚è¯¾æ‰‹æŠŠæ‰‹å¸¦é¢†å¤§å®¶æ­å»ºä¸€ä¸ªå®é™…é¡¹ç›®å¼€å‘ä¸­å¯ç”¨çš„ Spring Boot æ¶æ„ã€‚æ•´ä¸ªé¡¹ç›®å·¥ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå­¦ä¹ çš„æ—¶å€™ï¼Œå¯ä»¥ç»“åˆæˆ‘çš„æºç ï¼Œè¿™æ ·æ•ˆæœä¼šæ›´å¥½ã€‚</p>
<p><img src="https://images.gitbook.cn/6f23c980-b89e-11e8-87f1-559c9b456754" alt="å·¥ç¨‹æ¶æ„"></p>
<h2 id="1-ç»Ÿä¸€çš„æ•°æ®å°è£…"><a href="#1-ç»Ÿä¸€çš„æ•°æ®å°è£…" class="headerlink" title="1. ç»Ÿä¸€çš„æ•°æ®å°è£…"></a>1. ç»Ÿä¸€çš„æ•°æ®å°è£…</h2><p>ç”±äºå°è£…çš„ json æ•°æ®çš„ç±»å‹ä¸ç¡®å®šï¼Œæ‰€ä»¥åœ¨å®šä¹‰ç»Ÿä¸€çš„ json ç»“æ„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°æ³›å‹ã€‚ç»Ÿä¸€çš„ json ç»“æ„ä¸­å±æ€§åŒ…æ‹¬æ•°æ®ã€çŠ¶æ€ç ã€æç¤ºä¿¡æ¯å³å¯ï¼Œæ„é€ æ–¹æ³•å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚åšç›¸åº”çš„æ·»åŠ å³å¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥æœ‰é»˜è®¤çš„è¿”å›ç»“æ„ï¼Œä¹Ÿåº”è¯¥æœ‰ç”¨æˆ·æŒ‡å®šçš„è¿”å›ç»“æ„ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€è¿”å›å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonResult</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‹¥æ²¡æœ‰æ•°æ®è¿”å›ï¼Œé»˜è®¤çŠ¶æ€ç ä¸º0ï¼Œæç¤ºä¿¡æ¯ä¸ºï¼šæ“ä½œæˆåŠŸï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"0"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">"æ“ä½œæˆåŠŸï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‹¥æ²¡æœ‰æ•°æ®è¿”å›ï¼Œå¯ä»¥äººä¸ºæŒ‡å®šçŠ¶æ€ç å’Œæç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ‰æ•°æ®è¿”å›æ—¶ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œé»˜è®¤æç¤ºä¿¡æ¯ä¸ºï¼šæ“ä½œæˆåŠŸï¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"0"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = <span class="string">"æ“ä½œæˆåŠŸï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ‰æ•°æ®è¿”å›ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œäººä¸ºæŒ‡å®šæç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(T data, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.code = <span class="string">"0"</span>;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ä½œä¸ºå‚æ•°ä¼ é€’çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msgEnum</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JsonResult</span><span class="params">(BusinessMsgEnum msgEnum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = msgEnum.code();</span><br><span class="line">        <span class="keyword">this</span>.msg = msgEnum.msg();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœå»getå’Œsetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®ä¸­æ‰€éœ€è¦çš„ä¸€äº›ä¸œè¥¿ï¼Œåˆç†çš„ä¿®æ”¹ç»Ÿä¸€ç»“æ„ä¸­çš„å­—æ®µä¿¡æ¯ã€‚</p>
<h2 id="2-jsonçš„å¤„ç†"><a href="#2-jsonçš„å¤„ç†" class="headerlink" title="2. jsonçš„å¤„ç†"></a>2. jsonçš„å¤„ç†</h2><p>Json å¤„ç†å·¥å…·å¾ˆå¤šï¼Œæ¯”å¦‚é˜¿é‡Œå·´å·´çš„ fastjsonï¼Œä¸è¿‡ fastjson å¯¹æœ‰äº›æœªçŸ¥ç±»å‹çš„ null æ— æ³•è½¬æˆç©ºå­—ç¬¦ä¸²ï¼Œè¿™å¯èƒ½æ˜¯ fastjson è‡ªèº«çš„ç¼ºé™·ï¼Œå¯æ‰©å±•æ€§ä¹Ÿä¸æ˜¯å¤ªå¥½ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œä½¿ç”¨çš„äººä¹Ÿè›®å¤šçš„ã€‚è¿™èŠ‚è¯¾é‡Œé¢æˆ‘ä»¬ä¸»è¦é›†æˆ Spring Boot è‡ªå¸¦çš„ jacksonã€‚ä¸»è¦æ˜¯å¯¹ jackson åšä¸€ä¸‹å¯¹ null çš„é…ç½®å³å¯ï¼Œç„¶åå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * jacksonConfig</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JacksonConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(ObjectMapper<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ObjectMapper</span> <span class="title">jacksonObjectMapper</span>(<span class="title">Jackson2ObjectMapperBuilder</span> <span class="title">builder</span>) </span>&#123;</span><br><span class="line">        ObjectMapper objectMapper = builder.createXmlMapper(<span class="keyword">false</span>).build();</span><br><span class="line">        objectMapper.getSerializerProvider().setNullValueSerializer(<span class="keyword">new</span> JsonSerializer&lt;Object&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serialize</span><span class="params">(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                jsonGenerator.writeString(<span class="string">""</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> objectMapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå…ˆä¸æµ‹è¯•ï¼Œç­‰ä¸‹é¢ swagger2 é…ç½®å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬ä¸€èµ·æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<h2 id="3-swagger2åœ¨çº¿å¯è°ƒå¼æ¥å£"><a href="#3-swagger2åœ¨çº¿å¯è°ƒå¼æ¥å£" class="headerlink" title="3. swagger2åœ¨çº¿å¯è°ƒå¼æ¥å£"></a>3. swagger2åœ¨çº¿å¯è°ƒå¼æ¥å£</h2><p>æœ‰äº† swaggerï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦ç»™å…¶ä»–äººå‘˜æä¾›æ¥å£æ–‡æ¡£ï¼Œåªè¦å‘Šè¯‰ä»–ä»¬ä¸€ä¸ª Swagger åœ°å€ï¼Œå³å¯å±•ç¤ºåœ¨çº¿çš„ API æ¥å£æ–‡æ¡£ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè°ƒç”¨æ¥å£çš„äººå‘˜è¿˜å¯ä»¥åœ¨çº¿æµ‹è¯•æ¥å£æ•°æ®ï¼ŒåŒæ ·åœ°ï¼Œå¼€å‘äººå‘˜åœ¨å¼€å‘æ¥å£æ—¶ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥åˆ©ç”¨ Swagger åœ¨çº¿æ¥å£æ–‡æ¡£æµ‹è¯•æ¥å£æ•°æ®ï¼Œè¿™ç»™å¼€å‘äººå‘˜æä¾›äº†ä¾¿åˆ©ã€‚ä½¿ç”¨ swagger éœ€è¦å¯¹å…¶è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * swaggeré…ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shengwu ni</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                <span class="comment">// æŒ‡å®šæ„å»ºapiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯çš„æ–¹æ³•ï¼šapiInfo()</span></span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">// æŒ‡å®šè¦ç”Ÿæˆapiæ¥å£çš„åŒ…è·¯å¾„ï¼Œè¿™é‡ŒæŠŠcontrollerä½œä¸ºåŒ…è·¯å¾„ï¼Œç”Ÿæˆcontrollerä¸­çš„æ‰€æœ‰æ¥å£</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.itcodai.course18.controller"</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„å»ºapiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                <span class="comment">// è®¾ç½®é¡µé¢æ ‡é¢˜</span></span><br><span class="line">                .title(<span class="string">"Spring Bootæ­å»ºå®é™…é¡¹ç›®ä¸­å¼€å‘çš„æ¶æ„"</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®æ¥å£æè¿°</span></span><br><span class="line">                .description(<span class="string">"è·Ÿæ­¦å“¥ä¸€èµ·å­¦Spring Bootç¬¬18è¯¾"</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®è”ç³»æ–¹å¼</span></span><br><span class="line">                .contact(<span class="string">"å€ªå‡æ­¦ï¼Œ"</span> + <span class="string">"å¾®ä¿¡å…¬ä¼—å·ï¼šç¨‹åºå‘˜ç§æˆ¿èœ"</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®ç‰ˆæœ¬</span></span><br><span class="line">                .version(<span class="string">"1.0"</span>)</span><br><span class="line">                <span class="comment">// æ„å»º</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œï¼Œå¯ä»¥å…ˆæµ‹è¯•ä¸€ä¸‹ï¼Œå†™ä¸€ä¸ª Controllerï¼Œå¼„ä¸€ä¸ªé™æ€çš„æ¥å£æµ‹è¯•ä¸€ä¸‹ä¸Šé¢é›†æˆçš„å†…å®¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Api</span>(value = <span class="string">"ç”¨æˆ·ä¿¡æ¯æ¥å£"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/getUser/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"æ ¹æ®ç”¨æˆ·å”¯ä¸€æ ‡è¯†è·å–ç”¨æˆ·ä¿¡æ¯"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult&lt;User&gt; <span class="title">getUserInfo</span><span class="params">(@PathVariable @ApiParam(value = <span class="string">"ç”¨æˆ·å”¯ä¸€æ ‡è¯†"</span>)</span> Long id) </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(id, <span class="string">"å€ªå‡æ­¦"</span>, <span class="string">"123456"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult&lt;&gt;(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/swagger-ui.html</code> å³å¯çœ‹åˆ° swagger æ¥å£æ–‡æ¡£é¡µé¢ï¼Œè°ƒç”¨ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªæ¥å£ï¼Œå³å¯çœ‹åˆ°è¿”å›çš„ json æ•°æ®ã€‚</p>
<h2 id="4-æŒä¹…å±‚é›†æˆ"><a href="#4-æŒä¹…å±‚é›†æˆ" class="headerlink" title="4. æŒä¹…å±‚é›†æˆ"></a>4. æŒä¹…å±‚é›†æˆ</h2><p>æ¯ä¸ªé¡¹ç›®ä¸­æ˜¯å¿…é¡»è¦æœ‰æŒä¹…å±‚çš„ï¼Œä¸æ•°æ®åº“äº¤äº’ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¥é›†æˆ mybatisï¼Œé›†æˆ mybatis é¦–å…ˆè¦åœ¨ application.yml ä¸­è¿›è¡Œé…ç½®ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£å·</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åº“åœ°å€</span></span><br><span class="line"><span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">localhost:3306/blog_test</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span> <span class="comment"># æ•°æ®åº“é…ç½®</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;datasource.url&#125;?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;allowMultiQueries=true&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;maxReconnects=10</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">10</span> <span class="comment"># æœ€å¤§è¿æ¥æ± æ•°</span></span><br><span class="line">      <span class="attr">max-lifetime:</span> <span class="number">1770000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šåˆ«åè®¾ç½®çš„åŒ…ä¸ºæ‰€æœ‰entity</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.itcodai.course18.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span> <span class="comment"># é©¼å³°å‘½åè§„èŒƒ</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="comment"># mapperæ˜ å°„æ–‡ä»¶ä½ç½®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®å¥½äº†ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å†™ä¸€ä¸‹ dao å±‚ï¼Œå®é™…ä¸­æˆ‘ä»¬ä½¿ç”¨æ³¨è§£æ¯”è¾ƒå¤šï¼Œå› ä¸ºæ¯”è¾ƒæ–¹ä¾¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ xml çš„æ–¹å¼ï¼Œç”šè‡³ä¸¤ç§åŒæ—¶ä½¿ç”¨éƒ½è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é›†æˆï¼Œå…³äº xml çš„æ–¹å¼ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹å‰é¢è¯¾ç¨‹ï¼Œå®é™…ä¸­æ ¹æ®é¡¹ç›®æƒ…å†µæ¥å®šã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;</span><br><span class="line">            <span class="meta">@Result</span>(property = <span class="string">"username"</span>, column = <span class="string">"user_name"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property = <span class="string">"password"</span>, column = <span class="string">"password"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">User <span class="title">getUser</span><span class="params">(Long id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125; and user_name=#&#123;name&#125;"</span>)</span><br><span class="line">    <span class="function">User <span class="title">getUserByIdAndName</span><span class="params">(@Param(<span class="string">"id"</span>)</span> Long id, @<span class="title">Param</span><span class="params">(<span class="string">"name"</span>)</span> String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…³äº service å±‚æˆ‘å°±ä¸åœ¨æ–‡ç« ä¸­å†™ä»£ç äº†ï¼Œå¤§å®¶å¯ä»¥ç»“åˆæˆ‘çš„æºä»£ç å­¦ä¹ ï¼Œè¿™ä¸€èŠ‚ä¸»è¦å¸¦é¢†å¤§å®¶æ¥æ­å»ºä¸€ä¸ª Spring Boot ç©ºæ¶æ„ã€‚æœ€ååˆ«å¿˜äº†åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£æ‰«æ <code>@MapperScan(&quot;com.itcodai.course18.dao&quot;)</code></p>
<h2 id="5-æ‹¦æˆªå™¨"><a href="#5-æ‹¦æˆªå™¨" class="headerlink" title="5. æ‹¦æˆªå™¨"></a>5. æ‹¦æˆªå™¨</h2><p>æ‹¦æˆªå™¨åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯éå¸¸å¤šçš„ï¼ˆä½†ä¸æ˜¯ç»å¯¹çš„ï¼‰ï¼Œæ¯”å¦‚æ‹¦æˆªä¸€äº›ç½®é¡¶çš„ urlï¼Œåšä¸€äº›åˆ¤æ–­å’Œå¤„ç†ç­‰ç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å°†å¸¸ç”¨çš„é™æ€é¡µé¢æˆ–è€… swagger é¡µé¢æ”¾è¡Œï¼Œä¸èƒ½å°†è¿™äº›é™æ€èµ„æºç»™æ‹¦æˆªäº†ã€‚é¦–å…ˆå…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(MyInterceptor<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"æ‰§è¡Œæ–¹æ³•ä¹‹å‰æ‰§è¡Œ(Controlleræ–¹æ³•è°ƒç”¨ä¹‹å‰)"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"æ‰§è¡Œå®Œæ–¹æ³•ä¹‹åè¿›æ‰§è¡Œ(Controlleræ–¹æ³•è°ƒç”¨ä¹‹å)ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡è¿›è¡Œè§†å›¾æ¸²æŸ“"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"æ•´ä¸ªè¯·æ±‚éƒ½å¤„ç†å®Œå’¯ï¼ŒDispatcherServletä¹Ÿæ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾å’¯ï¼Œæ­¤æ—¶æˆ‘å¯ä»¥åšä¸€äº›æ¸…ç†çš„å·¥ä½œäº†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°†è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨åŠ å…¥åˆ°æ‹¦æˆªå™¨é…ç½®ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®ç°WebMvcConfigurerä¸ä¼šå¯¼è‡´é™æ€èµ„æºè¢«æ‹¦æˆª</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> MyInterceptor())</span><br><span class="line">                <span class="comment">// æ‹¦æˆªæ‰€æœ‰url</span></span><br><span class="line">                .addPathPatterns(<span class="string">"/**"</span>)</span><br><span class="line">                <span class="comment">// æ”¾è¡Œswagger</span></span><br><span class="line">                .excludePathPatterns(<span class="string">"/swagger-resources/**"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨å¦‚ä¸‹ç›®å½•é‡Œå­˜æ”¾ä¸€äº›é™æ€èµ„æºï¼š</p>
<blockquote>
<p>classpath:/static<br>classpath:/public<br>classpath:/resources<br>classpath:/META-INF/resources  </p>
</blockquote>
<p>ä¸Šé¢ä»£ç ä¸­é…ç½®çš„ <code>/**</code> æ˜¯å¯¹æ‰€æœ‰ url éƒ½è¿›è¡Œäº†æ‹¦æˆªï¼Œä½†æˆ‘ä»¬å®ç°äº† WebMvcConfigurer æ¥å£ï¼Œä¸ä¼šå¯¼è‡´ Spring Boot å¯¹ä¸Šé¢è¿™äº›ç›®å½•ä¸‹çš„é™æ€èµ„æºå®æ–½æ‹¦æˆªã€‚ä½†æ˜¯æˆ‘ä»¬å¹³æ—¶è®¿é—®çš„ swagger ä¼šè¢«æ‹¦æˆªï¼Œæ‰€ä»¥è¦å°†å…¶æ”¾è¡Œã€‚swagger é¡µé¢åœ¨ swagger-resources ç›®å½•ä¸‹ï¼Œæ”¾è¡Œè¯¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å³å¯ã€‚</p>
<p>ç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸‹ swagger é¡µé¢ï¼Œè‹¥èƒ½æ­£å¸¸æ˜¾ç¤º swaggerï¼Œè¯´æ˜æ”¾è¡ŒæˆåŠŸã€‚åŒæ—¶å¯ä»¥æ ¹æ®åå°æ‰“å°çš„æ—¥å¿—åˆ¤æ–­ä»£ç æ‰§è¡Œçš„é¡ºåºã€‚</p>
<h2 id="6-å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#6-å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="6. å…¨å±€å¼‚å¸¸å¤„ç†"></a>6. å…¨å±€å¼‚å¸¸å¤„ç†</h2><p>å…¨å±€å¼‚å¸¸å¤„ç†æ˜¯æ¯ä¸ªé¡¹ç›®ä¸­å¿…é¡»ç”¨åˆ°çš„ä¸œè¥¿ï¼Œåœ¨å…·ä½“çš„å¼‚å¸¸ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåšå…·ä½“çš„å¤„ç†ï¼Œä½†æ˜¯å¯¹äºæ²¡æœ‰å¤„ç†çš„å¼‚å¸¸ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªç»Ÿä¸€çš„å…¨å±€å¼‚å¸¸å¤„ç†ã€‚åœ¨å¼‚å¸¸å¤„ç†ä¹‹å‰ï¼Œæœ€å¥½ç»´æŠ¤ä¸€ä¸ªå¼‚å¸¸æç¤ºä¿¡æ¯æšä¸¾ç±»ï¼Œä¸“é—¨ç”¨æ¥ä¿å­˜å¼‚å¸¸æç¤ºä¿¡æ¯çš„ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> BusinessMsgEnum &#123;</span><br><span class="line">    <span class="comment">/** å‚æ•°å¼‚å¸¸ */</span></span><br><span class="line">    PARMETER_EXCEPTION(<span class="string">"102"</span>, <span class="string">"å‚æ•°å¼‚å¸¸!"</span>),</span><br><span class="line">    <span class="comment">/** ç­‰å¾…è¶…æ—¶ */</span></span><br><span class="line">    SERVICE_TIME_OUT(<span class="string">"103"</span>, <span class="string">"æœåŠ¡è°ƒç”¨è¶…æ—¶ï¼"</span>),</span><br><span class="line">    <span class="comment">/** å‚æ•°è¿‡å¤§ */</span></span><br><span class="line">    PARMETER_BIG_EXCEPTION(<span class="string">"102"</span>, <span class="string">"è¾“å…¥çš„å›¾ç‰‡æ•°é‡ä¸èƒ½è¶…è¿‡50å¼ !"</span>),</span><br><span class="line">    <span class="comment">/** 500 : å‘ç”Ÿå¼‚å¸¸ */</span></span><br><span class="line">    UNEXPECTED_EXCEPTION(<span class="string">"500"</span>, <span class="string">"ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆæ¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆæ¯å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">BusinessMsgEnum</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">msg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å…¨å±€ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå¯¹è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸æœ€å…ˆå¤„ç†ï¼Œç„¶åå»å¤„ç†ä¸€äº›å¸¸è§çš„ç³»ç»Ÿå¼‚å¸¸ï¼Œæœ€åä¼šæ¥ä¸€ä¸ªä¸€åŠ³æ°¸é€¸ï¼ˆException å¼‚å¸¸ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‹¦æˆªä¸šåŠ¡å¼‚å¸¸ï¼Œè¿”å›ä¸šåŠ¡å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(BusinessErrorException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleBusinessError</span><span class="params">(BusinessErrorException ex)</span> </span>&#123;</span><br><span class="line">        String code = ex.getCode();</span><br><span class="line">        String message = ex.getMessage();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(code, message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex NullPointerException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(NullPointerException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleTypeMismatchException</span><span class="params">(NullPointerException ex)</span> </span>&#123;</span><br><span class="line">        logger.error(<span class="string">"ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œ&#123;&#125;"</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(<span class="string">"500"</span>, <span class="string">"ç©ºæŒ‡é’ˆå¼‚å¸¸äº†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç³»ç»Ÿå¼‚å¸¸ é¢„æœŸä»¥å¤–å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    @<span class="title">ResponseStatus</span>(<span class="title">value</span> </span>= HttpStatus.INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonResult <span class="title">handleUnexpectedServer</span><span class="params">(Exception ex)</span> </span>&#123;</span><br><span class="line">        logger.error(<span class="string">"ç³»ç»Ÿå¼‚å¸¸ï¼š"</span>, ex);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JsonResult(BusinessMsgEnum.UNEXPECTED_EXCEPTION);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼ŒBusinessErrorException æ˜¯è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸ï¼Œç»§æ‰¿ä¸€ä¸‹ RuntimeException å³å¯ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘çš„æºä»£ç ï¼Œæ–‡ç« ä¸­å°±ä¸è´´ä»£ç äº†ã€‚<br>åœ¨ UserController ä¸­æœ‰ä¸ª testException æ–¹æ³•ï¼Œç”¨æ¥æµ‹è¯•å…¨å±€å¼‚å¸¸çš„ï¼Œæ‰“å¼€ swagger é¡µé¢ï¼Œè°ƒç”¨ä¸€ä¸‹è¯¥æ¥å£ï¼Œå¯ä»¥çœ‹å‡ºè¿”å›ç”¨æˆ·æç¤ºä¿¡æ¯ï¼šâ€ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼â€œã€‚å½“ç„¶äº†ï¼Œå®é™…æƒ…å†µä¸­ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡æç¤ºä¸åŒçš„ä¿¡æ¯ã€‚</p>
<h2 id="7-æ€»ç»“"><a href="#7-æ€»ç»“" class="headerlink" title="7. æ€»ç»“"></a>7. æ€»ç»“</h2><p>æœ¬æ–‡ä¸»è¦æ‰‹æŠŠæ‰‹å¸¦é¢†å¤§å®¶å¿«é€Ÿæ­å»ºä¸€ä¸ªé¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨çš„ Spring Boot ç©ºæ¶æ„ï¼Œä¸»è¦ä»ç»Ÿä¸€å°è£…çš„æ•°æ®ç»“æ„ã€å¯è°ƒå¼çš„æ¥å£ã€jsonçš„å¤„ç†ã€æ¨¡æ¿å¼•æ“çš„ä½¿ç”¨ï¼ˆä»£ç ä¸­ä½“ç°ï¼‰ã€æŒä¹…å±‚çš„é›†æˆã€æ‹¦æˆªå™¨å’Œå…¨å±€å¼‚å¸¸å¤„ç†ã€‚ä¸€èˆ¬åŒ…æ‹¬è¿™äº›ä¸œè¥¿çš„è¯ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ª Spring Boot é¡¹ç›®ç¯å¢ƒå°±å·®ä¸å¤šäº†ï¼Œç„¶åå°±æ˜¯æ ¹æ®å…·ä½“æƒ…å†µæ¥æ‰©å±•äº†ã€‚</p>
<p>è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š<a href="https://gitee.com/eson15/springboot_study" target="_blank" rel="noopener">æˆ³æˆ‘ä¸‹è½½</a></p>
<blockquote>
<p>è½¬è½½å¾®ä¿¡å…¬ä¼—å·ï¼šæ­¦å“¥èŠç¼–ç¨‹</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/30/hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/yali.jpg">
      <meta itemprop="name" content="James Li">
      <meta itemprop="description" content="èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lovepli">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/30/hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="post-title-link" itemprop="url">github+gitpages+hexoæ­å»ºä¸ªäººåšå®¢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-30 00:49:20" itemprop="dateCreated datePublished" datetime="2020-04-30T00:49:20+08:00">2020-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-05 23:07:15" itemprop="dateModified" datetime="2020-05-05T23:07:15+08:00">2020-05-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">å…¶ä»–</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä»€ä¹ˆæ˜¯Hexo"><a href="#ä»€ä¹ˆæ˜¯Hexo" class="headerlink" title="ä»€ä¹ˆæ˜¯Hexo ?"></a>ä»€ä¹ˆæ˜¯Hexo ?</h2><p>Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œä¾èµ–å°‘æ˜“äºå®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨GitHubå’ŒHerokuä¸Šï¼Œæ˜¯æ­å»ºåšå®¢çš„é¦–é€‰æ¡†æ¶ã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h3><p><a href="https://github.com/" target="_blank" rel="noopener">Github å®˜ç½‘</a><br><a href="https://pages.github.com/" target="_blank" rel="noopener">Github Pages</a><br><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo å®˜ç½‘</a><br><a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js å®˜ç½‘</a><br><a href="https://git-scm.com/" target="_blank" rel="noopener">Git å®˜ç½‘</a></p>
<h3 id="ç›¸å…³æ•™ç¨‹"><a href="#ç›¸å…³æ•™ç¨‹" class="headerlink" title="ç›¸å…³æ•™ç¨‹"></a>ç›¸å…³æ•™ç¨‹</h3><p><a href="https://wsgzao.github.io/post/hexo-guide/" target="_blank" rel="noopener">ä½¿ç”¨ GitHub å’Œ Hexo æ­å»ºå…è´¹é™æ€ Blog</a><br><a href="https://www.jianshu.com/p/f4dce0e76886" target="_blank" rel="noopener">ç®€ä¹¦ æ­å»ºä¸ªäººåšå®¢</a><br><a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="noopener">ä¸»é¢˜é…ç½®</a></p>
<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><p>ä¾ç…§ä¸Šé¢çš„è¿æ¥æŠŠå‡†å¤‡å·¥ä½œåšå®Œäº†ä¹‹åæ¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¼€å§‹åšå®¢ä¹‹æ—…ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo -g #å®‰è£…Hexo</span><br><span class="line">npm update hexo -g #å‡çº§ </span><br><span class="line">hexo init #åˆå§‹åŒ–åšå®¢</span><br><span class="line">å‘½ä»¤ç®€å†™</span><br><span class="line">hexo n "æˆ‘çš„åšå®¢" == hexo new "æˆ‘çš„åšå®¢" #æ–°å»ºæ–‡ç« </span><br><span class="line">hexo g == hexo generate #ç”Ÿæˆ</span><br><span class="line">hexo s == hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆ</span><br><span class="line">hexo d == hexo deploy #éƒ¨ç½²</span><br><span class="line">hexo server #Hexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— é¡»é‡å¯æœåŠ¡å™¨</span><br><span class="line">hexo server -s #é™æ€æ¨¡å¼</span><br><span class="line">hexo server -p 5000 #æ›´æ”¹ç«¯å£</span><br><span class="line">hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IP</span><br><span class="line">hexo clean #æ¸…é™¤ç¼“å­˜ï¼Œè‹¥æ˜¯ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥è¿™æ¡å‘½ä»¤</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="James Li"
      src="/images/yali.jpg">
  <p class="site-author-name" itemprop="name">James Li</p>
  <div class="site-description" itemprop="description">èº«ä½“å’Œçµé­‚ï¼Œæ€»è¦æœ‰ä¸€ä¸ªåœ¨è·¯ä¸Šã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lovepli" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;lovepli" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      å‹æƒ…é“¾æ¥
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://hexo.io/zh-cn/" title="https:&#x2F;&#x2F;hexo.io&#x2F;zh-cn&#x2F;" rel="noopener" target="_blank">hexoä¸»é¢˜next</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        //ç”¨ä¸‹é¢çš„ç¬¦å·æ³¨é‡Šï¼Œæ³¨é‡Šä»£ç ç”¨ä¸‹é¢æ‹¬å·æ‹¬èµ·æ¥
<!-- -->

<!--

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">James Li</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  















  

  

</body>
</html>
